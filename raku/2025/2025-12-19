[00:03] <wayland> Anyone know why I'd be getting a lot of: raku -Ilib -c lib/Qwiratry/QueryIterator.rakumod

[00:03] <wayland> Sorry, wrong message: Missing serialize REPR function for REPR MVMContext (BOOTContext)

[00:04] <wayland> That one.  Anyone know why I'd be getting that?  

[00:04] <wayland> It happens when running: raku -Ilib -c lib/Qwiratry/QueryIterator.rakumod

[00:04] <wayland> It happens when running: raku -Ilib -e 'use Qwiratry::Context; '

[00:05] <wayland> (sorry, wrong paste again)

[00:05] <wayland> ...and the contents of that file are: role Qwiratry::Context is export {}

[00:09] <ugexe> maybe a precomp error

[00:09] <ugexe> try deleting lib/.precomp, or using -I. instead of -Ilib

[00:13] <wayland> OK, thanks!  

[00:15] <wayland> Neither seemed to help, unfortunately.  

[00:17] <wayland> Unsetting RAKUDO_RAKUAST seems to have fixed it.  But since I'm hoping to use RakuAST in this project, that's a problem.  

[00:17] <wayland> I'll have a look at the Rakudo bugs, and see how I go.  

[00:20] <grondilu> MoarVM panic: Internal error: invalid thread ID 1575425 in GC work pass

[00:21] <grondilu> ^this happened in the middle of a fairly long computation (processing lots of chess grandmaster games)

[00:21] <grondilu> it's going to be difficult to reproduce but I'll try

[00:35] *** wayland left
[01:23] *** wayland76 joined
[01:25] *** sibl joined
[01:34] *** sibl left
[01:35] *** mahlay left
[01:38] *** sibl joined
[01:42] *** sibl left
[01:49] *** sibl joined
[02:26] <Voldenet> this: https://github.com/MoarVM/MoarVM/blob/main/src/gc/collect.c#L435

[02:29] <Voldenet> given pretty wild thread id, I'm assuming it was uninitialized

[02:30] <Voldenet> grondilu: is this "invalid thread ID" error on x86 or arm?

[02:30] <Voldenet> (could be probably relevant because of memory ordering)

[02:39] *** hulk joined
[02:39] *** kylese left
[03:04] <grondilu> x86

[03:05] <grondilu> the weird thing is that this program runs fine for hours, but it did crash at least once.

[03:06] <grondilu> for what it's worth it's a program that process PGN files on pgnmentor.com and turns them into polyglot files.

[03:06] <grondilu> again, very hard to reproduce as it's running fine rn.

[03:15] *** hulk left
[03:15] *** kylese joined
[03:50] <Voldenet> it could always be random bitflip because of no ECC, happens to everyone ;/

[04:05] *** lue joined
[04:06] *** ShimmerFairy left
[04:11] *** mahlay joined
[04:16] *** mahlay left
[04:19] *** lue is now known as ShimmerFairy

[04:22] *** stanrifkin_ joined
[04:23] *** lichtkind joined
[04:24] *** stanrifkin left
[04:25] *** lichtkind_ left
[04:28] *** mahlay joined
[05:01] *** wayland76 left
[05:04] *** arkiuat left
[05:20] *** arkiuat joined
[06:25] <disbot6> <jubilatious1_98524> Ahem... corrected answer now posted.

[06:26] <disbot6> <jubilatious1_98524> weekly: https://unix.stackexchange.com/questions/803056/need-csvuniq-functionality-on-the-command-line-for-csv-with-embedded-end-of-line/803066#803066

[06:38] *** abraxxa joined
[06:46] *** Aedil joined
[06:57] *** silug left
[06:59] *** eseyman left
[07:00] *** manu_ joined
[07:00] *** manu_ is now known as eseyman

[07:09] *** silug joined
[07:39] <ab5tract> wayland: is the code for Qwiratry::Context available for perusal?

[07:52] *** Aedil left
[07:57] *** stanrifkin_ left
[08:12] *** arkiuat left
[08:37] *** abraxxa left
[08:41] *** arkiuat joined
[08:46] *** arkiuat left
[09:00] *** arkiuat joined
[09:04] *** Sgeo left
[09:05] *** arkiuat left
[09:33] *** arkiuat joined
[09:33] *** Aedil joined
[09:37] *** arkiuat left
[09:55] *** sibl left
[10:11] *** arkiuat joined
[10:15] <disbot6> <simon_sibl> Is there any chance to see Raku support in cloudflare through wasm or something else in the near future ?

[10:15] *** arkiuat left
[10:31] <Voldenet> You could compile moarvm to wasm

[10:33] *** sibl joined
[10:37] *** sibl left
[10:43] *** arkiuat joined
[10:47] *** arkiuat left
[10:49] * lizmat feels inspired by https://raku-advent.blog/2025/12/19/day-19-welcome-to-the-megadungeon/

[10:53] *** eseyman left
[10:55] *** manu_ joined
[10:55] *** manu_ is now known as eseyman

[10:57] <lizmat> simon_sibl not sure what you mean with "Raku support in cloudflare", could you elaborate ?

[11:13] *** arkiuat joined
[11:18] *** arkiuat left
[11:27] <grondilu> has someone ever mananged to compile moarvm to wasm?

[11:32] <timo> grondilu: that requires a port of libuv to wasm, or replacing the parts of libuv that moarvm uses with stuff that works on a wasm runtime

[11:44] * ab5tract is very pleased that the article resonated

[11:48] *** arkiuat joined
[11:54] *** arkiuat left
[11:56] *** arkiuat joined
[12:01] *** arkiuat left
[12:29] *** arkiuat joined
[12:34] *** arkiuat left
[12:57] *** arkiuat joined
[13:00] <tbrowder> tbrowder: i also feel grateful for it and all the other articles. the previous ones fit into the "gist" of the last one so neatly...

[13:02] *** arkiuat left
[13:31] *** arkiuat joined
[13:36] *** arkiuat left
[13:38] *** arkiuat joined
[13:38] *** eseyman left
[13:42] *** arkiuat left
[13:58] *** arkiuat joined
[14:00] <disbot6> <antononcube> I added four new headline images in the Media folder of raku-advent.blog .

[14:04] <lizmat> antononcube++

[14:11] *** arkiuat left
[14:14] *** arkiuat joined
[14:19] *** shareable6 left
[14:21] *** shareable6 joined
[14:21] *** arkiuat left
[14:35] *** sibl joined
[14:43] *** arkiuat joined
[14:48] *** arkiuat left
[14:59] <disbot6> <simon_sibl> I meant for this: https://developers.cloudflare.com/workers/languages/ üôè

[15:06] *** arkiuat joined
[15:11] *** arkiuat left
[15:15] *** arkiuat joined
[15:25] *** arkiuat left
[15:25] *** Sgeo joined
[15:36] *** arkiuat joined
[16:19] *** human-blip left
[16:21] *** human-blip joined
[16:30] *** sibl left
[16:31] *** librasteve_ left
[17:02] <disbot6> <aruniecrisps> I've got a silly question, is nqp going to continue to be something that people can use if they truly want to or will  people be directed toward macros and RakuAST?

[17:02] <ugexe> i don't think we direct people to use nqp

[17:26] <ShimmerFairy> If you mean nqp:: ops, those were never really meant to be used outside of the Rakudo compiler; people only use them because of some deficiency in Raku or Rakudo itself. If you mean the program itself, then I don't see why you couldn't keep using it in the foreseeable future.

[17:39] *** librasteve_ joined
[17:46] <disbot6> <aruniecrisps> The reason I'm asking is let's suppose someone wants to make a slang using nqp or they want to create a different HOW, would it still be available to them? Am I even asking the right questions?

[17:55] *** manu_ joined
[18:35] <lizmat> aruniescrips with https://raku.land/zef:lizmat/Slangify it should be almost always possible to not have to use NQP ops

[18:35] <lizmat> if it is, then I would like to know about it   :-)

[18:43] <disbot6> <aruniecrisps> lizmat: would the creation of a new form of ClassHOW like in OO::Actors or EnumHOW not count as using nqp ops or am I confusing something?

[18:45] <lizmat> I don't see any NQP in OO::Actors ?

[18:45] <lizmat> I see dependencies on the metamodel, yes

[18:51] <disbot6> <aruniecrisps> Ah okay I'm confused, thanks for the clarification

[19:15] <arkiuat> I'm having some trouble using defined() on junctions. Here's some example code from https://docs.raku.org/type/Junction#method_defined

[19:15] <arkiuat> m: my $foo=Failure.new; say (one 3, $foo).defined;

[19:15] <camelia> rakudo-moar 159288a3d: OUTPUT: ¬´False‚ê§¬ª

[19:15] <arkiuat> The doc says that is supposed to say True, not False

[19:16] <arkiuat> and this is not a problem with failure:

[19:16] <arkiuat> m: my $bar; say (one 3, $bar).defined; say $bar

[19:16] <camelia> rakudo-moar 159288a3d: OUTPUT: ¬´False‚ê§(Any)‚ê§¬ª

[19:16] <arkiuat> that should say True also, but it doesn't

[19:16] <[Coke]> do you mean (one 3, $bar) or one(3, $bar) ?

[19:17] <arkiuat> oh, so it may be a typo in the example code, then?

[19:18] <arkiuat> m: say (one (3, $bar)).defined

[19:18] <camelia> rakudo-moar 159288a3d: OUTPUT: ¬´===SORRY!=== Error while compiling <tmp>‚ê§Variable '$bar' is not declared. Perhaps you forgot a 'sub' if this was‚ê§intended to be part of a signature?‚ê§at <tmp>:1‚ê§------> say (one (3, <HERE>$bar)).defined‚ê§¬ª

[19:18] <arkiuat> m: my $bar; say (one (3, $bar)).defined

[19:18] <camelia> rakudo-moar 159288a3d: OUTPUT: ¬´False‚ê§¬ª

[19:18] <arkiuat> [Coke], apparently not

[19:20] <arkiuat> m: my $bar; say one(3, $bar).defined

[19:20] <camelia> rakudo-moar 159288a3d: OUTPUT: ¬´False‚ê§¬ª

[19:21] <arkiuat> To me this seems like a bug: the doc is correct but rakudo is misbehaving

[19:21] <arkiuat> I'd love to be wrong about that because I know how to fix the doc, but not how to fix rakudo

[19:21] <[Coke]> m: say one(3).defined

[19:21] <camelia> rakudo-moar 159288a3d: OUTPUT: ¬´False‚ê§¬ª

[19:22] <[Coke]> m: say one(3.defined)

[19:22] <camelia> rakudo-moar 159288a3d: OUTPUT: ¬´one(True)‚ê§¬ª

[19:23] <arkiuat> I'm trying to check to see if exactly one member of a list of several things is defined (it's a failure condition otherwise), so that last case won't help me, sadly

[19:23] *** mehbark left
[19:23] *** lue joined
[19:23] *** mehbark9 joined
[19:26] *** ShimmerFairy left
[19:26] <ugexe> arkuiat: if you want to take a crack at fixing it in rakudo i think you only need to look at this function and can probably figure it out from there https://github.com/rakudo/rakudo/blob/159288a3d50aaee9465dfda8d5e4cf4d0b7f62cd/src/core.c/Junction.rakumod#L114-L122

[19:27] <arkiuat> ugh, a triple chained conditional operator

[19:28] <arkiuat> and defined-one is the final default? weird

[19:28] <ugexe> https://github.com/rakudo/rakudo/commit/7a561d63a82523966a0403d8635486dfc353a92e

[19:29] <ugexe> that commit is the last time it was touched. you could potentially check if the old code did the right thing

[19:30] <arkiuat> hmm, okay

[19:31] <arkiuat> looks like I'd need to fall back to 2020.01?

[19:31] <ugexe> you could. sometimes i just copy paste the code into its own file and adjust things to test it that way

[19:31] <ugexe> if you want to know how to actually go about trying your changes out here is what I do. I use rakubrew to build some version of raku, then i cd into ~/.rakubrew/versions/whatever. then i edit whatever rakudo source files and run `make test && make install` until it works

[19:32] <arkiuat> okay, thanks!

[19:32] <arkiuat> let me just make sure I'm installing the correct ancient version first

[19:32] <ugexe> you could also probably use monkey patching 

[19:35] <arkiuat> rakubrew is building me a 2020.01

[19:39] <arkiuat> build failed, message here: https://gist.github.com/arkiuat/52ca1e0c2b730e065a7a98a14347b496

[19:42] <arkiuat> I guess what I really ought to do at this point is file an issue, no?

[19:42] <arkiuat> I'm going to step away from the keyboard for a bit but will be back within half an hour, probably

[19:49] *** librasteve_ left
[19:53] <ugexe> perl6 -e 'say one(1, my $f).defined'

[19:53] <ugexe> True

[19:53] <ugexe> thats on 2018.01, so it used to work at some point

[20:10] <arkiuat> I'll mention that in the issue, thanks

[20:10] *** inspork left
[20:12] <arkiuat> Math::Precision was on hold while I make a few PRs to Math::Angle for some additional units that I'd like it to have, but the first failure check in Math::Angle's TWEAK submethod is horrible and obviously should be rewritten as a one-junction... except that one-junction tests for definedness apparently haven't worked since before Math::Angle was first released three years ago

[20:29] <ugexe> Here, the loop increments through eigenstates and continues only while the current value is NOT defined (isfalse(.defined)). It also requires nqp::not_i($seen++) to be true (i.e., seen is 0). However, this means it will stop before ever seeing a defined element, so seen never increments on seeing a defined value‚Äîwhich is wrong for the "one" junction semantics.

[20:30] <ugexe> that is what copilot on github said

[20:30] <ugexe> https://gist.github.com/ugexe/dfbb0087a6418bcc8a8413c019efc77e this was its suggested fix

[20:31] <ugexe> "The bug occurs because the loop skips over defined values (since it continues only when .defined is false), meaning the seen counter does not increment for defined elements at all. As a result, it will always return 0 seen and thus iseq_i($seen,1) is false ($seen remains 0), so .defined returns False wrongly."

[20:34] <arkiuat> I was checking to see if any related issues were already open, but I can't find any, or even a similar closed one

[20:35] <arkiuat> I'm putting a timestamped link to this IRC log, along with the examples that [Coke] and I tried already

[20:43] <arkiuat> https://github.com/rakudo/rakudo/issues/6048

[20:50] <arkiuat> okay, now I'm going to try to find some *other* clever way to rewrite Math::Angle's TWEAK

[21:20] <arkiuat> for now I'm using a a one-junction as a simple boolen and ANDing with a one-junction test for equality to zero. Any better suggestions?

[21:21] <arkiuat> that's with an `unless` in front of it

[21:23] <[Coke]> bisectable6: say one(1, my $f).defined

[21:23] <bisectable6> [Coke], Will bisect the whole range automagically because no endpoints were provided, hang tight

[21:24] <arkiuat> at least .defined still works on any-junctions :D

[21:24] <bisectable6> [Coke], Output on all releases: https://gist.github.com/d768b18edd39b58f2338991303d2360a

[21:24] <bisectable6> [Coke], Bisecting by output (old=2020.01 new=2020.02.1) because on both starting points the exit code is 0

[21:25] <[Coke]> wow, broke nearly 6 years ago.

[21:25] <arkiuat> yeah, I know, right! yikes.

[21:26] <arkiuat> here I was wondering why Math::Angle's TWEAK's failure check was written so weird, and instead now I'm wondering why the author didn't report the issue back then

[21:26] <arkiuat> or maybe they just don't use junctions. I haven't turn across any of them anywhere else in Math::Angle so far

[21:34] <ugexe> i'd guess that junctions are going to be slower than not using them

[21:35] <arkiuat> good point! maybe I'd better take that into account before sending in my PR

[21:41] <bisectable6> [Coke], bisect log: https://gist.github.com/c8047db7878c1b69ec1768a822bd2500

[21:41] <bisectable6> [Coke], Output on all releases and bisected commits: https://gist.github.com/85d0b318cb9efcd701d106af6db998b2

[21:47] <arkiuat> [Coke]++ thanks, I've added those to a comment on the issue

[21:49] <arkiuat> grepping on *.defined and counting the elems that result also works for what TWEAK is trying to check here, and I think it's prettier than what I found. Shouldn't be any slower either

[22:21] *** Aedil left
[22:31] *** wayland76 joined
[22:34] <wayland76> .tell ab5tract Certainly!  It can be seen at https://github.com/rakudo/rakudo/issues/6047 .  I'm suspecting that this is something that's only happening on my computer (only because I think it's so obvious it would've been picked up by now), but it's definitely hampering me.  

[22:50] *** arkiuat left
[22:53] *** arkiuat joined
[23:07] <grondilu> m: print { .&exp / (1 + .&exp) }(10)

[23:07] <camelia> rakudo-moar 159288a3d: OUTPUT: ¬´0.9999546021312976¬ª

[23:07] <grondilu> m: print { .&exp / (1 + .&exp) }(10000)

[23:07] <camelia> rakudo-moar 159288a3d: OUTPUT: ¬´NaN¬ª

[23:07] <wayland76> If someone could reproduce it to confirm whether it's just me, that'd be good too.  

[23:08] <grondilu> m: print { .&exp / (1 + .&exp) }(1000)  # kind of annoying but I understand raku is not a CAS

[23:08] <camelia> rakudo-moar 159288a3d: OUTPUT: ¬´NaN¬ª

[23:13] <[Coke]> wayland76: works fine here on 2025.11 on my mac

[23:13] <[Coke]> tried multiple times with and without RAKUDO_RAKUAST=1

[23:13] <wayland76> [Coke]: Did you delete .precomp each time?  

[23:15] <[Coke]> Nope. Just tried again after deleting lib/.precomp, no change

[23:16] <[Coke]> just always passes.

[23:17] <[Coke]> grondilu: what's a CAS?

[23:26] <wayland76> [Coke]: OK, so sounds like it's just on my machine.  That's inconvenient.  

[23:31] <grondilu> [Coke]: Computer Algebra System

[23:32] <grondilu> I do wonder if most computer language chug like this though

[23:34] <grondilu> perl: $_=1000; print exp($_)/(1+exp($_))

[23:34] <grondilu> no perl bot here?

[23:34] <grondilu> p5: $_=1000; print exp($_)/(1+exp($_))

[23:36] <wayland76> [Coke]: How do I get the sw_vers output?  Do I just run that at the Raku prompt?  Because that doesn't work for me.  

