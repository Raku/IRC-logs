[00:09] *** librasteve_ left
[08:42] *** sena_kun joined
[13:08] *** [Coke]__ joined
[13:10] *** [Coke]_ left
[15:49] <Geth> ¦ HTML-Strip/main: 2e0300cf86 | (Elizabeth Mattijsen)++ | .travis.yml

[15:49] <Geth> ¦ HTML-Strip/main: We don't do Travis anymore

[15:49] <Geth> ¦ HTML-Strip/main: review: https://github.com/raku-community-modules/HTML-Strip/commit/2e0300cf86

[18:47] <Geth> ¦ rakudo/azure_improvements: 7d3fecb1c2 | (Timo Paulssen)++ | azure-pipelines.yml

[18:47] <Geth> ¦ rakudo/azure_improvements: Grab a bunch of debug output using strace and ldd

[18:47] <Geth> ¦ rakudo/azure_improvements: review: https://github.com/rakudo/rakudo/commit/7d3fecb1c2

[18:52] <Geth> ¦ rakudo/azure_improvements: 0843566917 | (Timo Paulssen)++ | azure-pipelines.yml

[18:52] <Geth> ¦ rakudo/azure_improvements: build nqp and rakudo with --no-silent-build for helpful(?) details

[18:52] <Geth> ¦ rakudo/azure_improvements: review: https://github.com/rakudo/rakudo/commit/0843566917

[18:57] <Geth> ¦ rakudo/azure_improvements: f04161d152 | (Timo Paulssen)++ | azure-pipelines.yml

[18:57] <Geth> ¦ rakudo/azure_improvements: fix paths to binaries for debug output

[18:57] <Geth> ¦ rakudo/azure_improvements: review: https://github.com/rakudo/rakudo/commit/f04161d152

[19:04] <Geth> ¦ rakudo/azure_improvements: 2e7ef049c7 | (Timo Paulssen)++ | azure-pipelines.yml

[19:04] <Geth> ¦ rakudo/azure_improvements: more and more debug output

[19:04] <Geth> ¦ rakudo/azure_improvements: review: https://github.com/rakudo/rakudo/commit/2e7ef049c7

[19:04] <Geth> ¦ rakudo/azure_improvements: 3da5de9924 | (Timo Paulssen)++ | azure-pipelines.yml

[19:04] <Geth> ¦ rakudo/azure_improvements: replace "perl6" with "raku"

[19:04] <Geth> ¦ rakudo/azure_improvements: review: https://github.com/rakudo/rakudo/commit/3da5de9924

[19:20] <Geth> ¦ rakudo/azure_improvements: ff35d53556 | (Timo Paulssen)++ | azure-pipelines.yml

[19:20] <Geth> ¦ rakudo/azure_improvements: put debugspam in a new artifact

[19:20] <Geth> ¦ rakudo/azure_improvements: review: https://github.com/rakudo/rakudo/commit/ff35d53556

[19:30] <Geth> ¦ rakudo/azure_improvements: c48d2ebf10 | (Timo Paulssen)++ | azure-pipelines.yml

[19:30] <Geth> ¦ rakudo/azure_improvements: look at only one, correct, path for debugspam

[19:30] <Geth> ¦ rakudo/azure_improvements: review: https://github.com/rakudo/rakudo/commit/c48d2ebf10

[19:49] <ab5tract> lizmat: The latest release has a few major (if hack-ish) quality of life improvements for working on `rakudo.git` -- https://github.com/ab5tract/comma-plugin/releases/tag/v2.0-beta.2

[19:50] <Geth> ¦ rakudo/azure_improvements: 17f25f06b5 | (Timo Paulssen)++ | azure-pipelines.yml

[19:50] <Geth> ¦ rakudo/azure_improvements: use absolute path as --prefix instead of relative

[19:50] <Geth> ¦ rakudo/azure_improvements: review: https://github.com/rakudo/rakudo/commit/17f25f06b5

[19:50] <Geth> ¦ rakudo/azure_improvements: 1add5e0096 | (Timo Paulssen)++ | azure-pipelines.yml

[19:50] <Geth> ¦ rakudo/azure_improvements: output actual debugspam files, not left-overs(???)

[19:50] <Geth> ¦ rakudo/azure_improvements: review: https://github.com/rakudo/rakudo/commit/1add5e0096

[19:59] <Geth> ¦ rakudo/azure_improvements: 4a01a33a8c | (Timo Paulssen)++ | azure-pipelines.yml

[19:59] <Geth> ¦ rakudo/azure_improvements: fix output dir for debugspam

[19:59] <Geth> ¦ rakudo/azure_improvements: review: https://github.com/rakudo/rakudo/commit/4a01a33a8c

[19:59] <timo> i sure hope nobody has to pay for all my pipeline runs, i'm just assuming we're getting them for free so i can retry a lot

[20:02] <Geth> ¦ rakudo/azure_improvements: c25d2c3912 | (Timo Paulssen)++ | azure-pipelines.yml

[20:02] <Geth> ¦ rakudo/azure_improvements: win and relocatable mac/linux work fine, skip them for now

[20:02] <Geth> ¦ rakudo/azure_improvements: review: https://github.com/rakudo/rakudo/commit/c25d2c3912

[20:03] <Geth> ¦ rakudo/azure_improvements: 4a24205d62 | (Timo Paulssen)++ | azure-pipelines.yml

[20:03] <Geth> ¦ rakudo/azure_improvements: have to skip win completely, or the stage has 0 jobs and breaks

[20:03] <Geth> ¦ rakudo/azure_improvements: review: https://github.com/rakudo/rakudo/commit/4a24205d62

[20:16] <Geth> ¦ rakudo/azure_improvements: f1bfa83284 | (Timo Paulssen)++ | azure-pipelines.yml

[20:16] <Geth> ¦ rakudo/azure_improvements: turn on debug mode for pipelines!

[20:16] <Geth> ¦ rakudo/azure_improvements: review: https://github.com/rakudo/rakudo/commit/f1bfa83284

[20:16] <Geth> ¦ rakudo/azure_improvements: 70bb8372ea | (Timo Paulssen)++ | azure-pipelines.yml

[20:16] <Geth> ¦ rakudo/azure_improvements: try to put debugspam from different jobs/stages together

[20:16] <Geth> ¦ rakudo/azure_improvements: review: https://github.com/rakudo/rakudo/commit/70bb8372ea

[20:18] <Geth> ¦ rakudo/azure_improvements: 693e4b1e34 | (Timo Paulssen)++ | azure-pipelines.yml

[20:18] <Geth> ¦ rakudo/azure_improvements: need to bump cache version key after changing --prefix= parameter

[20:18] <Geth> ¦ rakudo/azure_improvements: review: https://github.com/rakudo/rakudo/commit/693e4b1e34

[20:23] <Geth> ¦ rakudo/azure_improvements: 1d20d10f12 | (Timo Paulssen)++ | azure-pipelines.yml

[20:23] <Geth> ¦ rakudo/azure_improvements: extra spesh tests depend on relocatable linux build

[20:23] <Geth> ¦ rakudo/azure_improvements: review: https://github.com/rakudo/rakudo/commit/1d20d10f12

[20:23] <Geth> ¦ rakudo/azure_improvements: 7a9570ccef | (Timo Paulssen)++ | azure-pipelines.yml

[20:23] <Geth> ¦ rakudo/azure_improvements: i think linux runners have multiple cores so -j3 yay

[20:23] <Geth> ¦ rakudo/azure_improvements: review: https://github.com/rakudo/rakudo/commit/7a9570ccef

[20:33] <Geth> ¦ rakudo/azure_improvements: 4bd8618565 | (Timo Paulssen)++ | azure-pipelines.yml

[20:33] <Geth> ¦ rakudo/azure_improvements: prove -j and TEST_JOBS up to 3 for non-windows why not

[20:33] <Geth> ¦ rakudo/azure_improvements: review: https://github.com/rakudo/rakudo/commit/4bd8618565

[20:33] <Geth> ¦ rakudo/azure_improvements: 2354259c3c | (Timo Paulssen)++ | azure-pipelines.yml

[20:33] <Geth> ¦ rakudo/azure_improvements: oops, need to *build* relocatable, not just test

[20:33] <Geth> ¦ rakudo/azure_improvements: review: https://github.com/rakudo/rakudo/commit/2354259c3c

[20:45] <Geth> ¦ rakudo/azure_improvements: 2fd4c61793 | (Timo Paulssen)++ | azure-pipelines.yml

[20:45] <Geth> ¦ rakudo/azure_improvements: i could have sworn you could just add to an existing artifact, but no

[20:45] <Geth> ¦ rakudo/azure_improvements: review: https://github.com/rakudo/rakudo/commit/2fd4c61793

[20:49] <timo> patrickb: you know about the azure pipelines, right? what i'm doing here isn't costing any raku person extra money, is that correct?

[20:50] <patrickb> timo: They are completely free. 

[20:50] <timo> can i get some kind of access to the azure devops thing so i can cancel or rerun my own stuff from there?

[20:50] <patrickb> Go ahead, I marvel at your endurance!

[20:51] <patrickb> Let's see

[20:56] <Geth> ¦ rakudo/azure_improvements: bbb5517aac | (Timo Paulssen)++ | azure-pipelines.yml

[20:56] <Geth> ¦ rakudo/azure_improvements: normal variables are not expanded in this property

[20:56] <Geth> ¦ rakudo/azure_improvements: review: https://github.com/rakudo/rakudo/commit/bbb5517aac

[21:09] <timo> i think the problem for a long time has been that you get a file not found for /blah/blah/doesnotexist/../install which makes sense now that i think about it and probably shouldn't be different?

[21:17] <ab5tract> That makes sense to me. Though I have no idea what the context is :)

[21:26] <Geth> ¦ rakudo/azure_improvements: 7b0f572b15 | (Timo Paulssen)++ | azure-pipelines.yml

[21:26] <Geth> ¦ rakudo/azure_improvements: don't rebuild rakudo before running spectests

[21:26] <Geth> ¦ rakudo/azure_improvements: review: https://github.com/rakudo/rakudo/commit/7b0f572b15

[21:28] <ab5tract> timo: ^^^^ and I thought the pipelines at work were overly aggressive in rebuilding :O

[21:35] <timo> well, this is a Make thing i think

[21:36] <timo> after bundling up the install/ folder and the rakudo/ folder in a PipelineArtifact and extracting it in the follow-up stage, "make spectest" has decided that the "all" target also has to be re-built

[21:36] <timo> i'm now having Make spit out why it thinks that, maybe i can find out the exact reason and prevent it. maybe i just have to "touch" the right files or whatever

[21:37] <timo> make: *** unknown debug level specification 'why'.  Stop.

[21:37] <timo> love that

[21:42] <timo> requires GNU Make 4.4, that version of make isn't even in the absolute newest ubuntu, much less 20.04

[21:47] <Geth> ¦ rakudo/azure_improvements: 6918d6e8ed | (Timo Paulssen)++ | azure-pipelines.yml

[21:47] <Geth> ¦ rakudo/azure_improvements: make isn't a new enough version to support --debug=why, so --trace instead

[21:47] <Geth> ¦ rakudo/azure_improvements: review: https://github.com/rakudo/rakudo/commit/6918d6e8ed

[21:51] <ab5tract> Good idea. Trying to determine  what’s missing by examine the make target definitions would be quite a headache

[22:04] *** sena_kun left
[22:04] <Geth> ¦ rakudo/azure_improvements: 41c94d053b | (Timo Paulssen)++ | azure-pipelines.yml

[22:04] <Geth> ¦ rakudo/azure_improvements: rakudo-m needs to be chmod+x'd after extracting from pipeline artifact

[22:04] <Geth> ¦ rakudo/azure_improvements: review: https://github.com/rakudo/rakudo/commit/41c94d053b

[22:04] <timo> sounds like --trace is good enough for now

[22:05] <timo> Makefile:1212: update target 'gen/moar/nqp-version' due to: /home/vsts/work/1/install/bin/nqp-m

[22:05] <timo> ^- i'm assuming that's because of modification date or so?

[22:08] <Geth> ¦ rakudo/azure_improvements: d89e02936d | (Timo Paulssen)++ | azure-pipelines.yml

[22:08] <Geth> ¦ rakudo/azure_improvements: more debug output to find rebuild reasons before spectests

[22:08] <Geth> ¦ rakudo/azure_improvements: review: https://github.com/rakudo/rakudo/commit/d89e02936d

[22:19] <ab5tract> ohhh

[22:20] <ab5tract> IIRC, that's definitely enough for make

[22:23] <Geth> ¦ rakudo/azure_improvements: 0fd1ed8014 | (Timo Paulssen)++ | azure-pipelines.yml

[22:23] <Geth> ¦ rakudo/azure_improvements: get extra precise time output in ls, sleep briefly between extracting artifacts

[22:23] <Geth> ¦ rakudo/azure_improvements: review: https://github.com/rakudo/rakudo/commit/0fd1ed8014

[22:24] <timo> with just ls -l the date&time was the same, so i need --time-style=full-iso :D

[22:27] <ab5tract> lol

[22:27] <ab5tract> make is nothing if not meticulous

[22:28] <ab5tract> I sincerely hope there is some flag that allows a bit of variance, or disables time concerns entirely for a given run

[22:29] <timo> well, i don't have to worry about "make m-spectest" rebuilding rakudo a second time if i just remove the "all" dependency from spectest_update

[22:29] <timo> with a little call to sed

[22:31] <timo> 788057  20K -rwxr-xr-x 1 vsts docker  18K 2024-09-15 22:28:52.874520793 +0000 ../install/bin/nqp-m

[22:31] <timo> 787066 4.0K -rw-r--r-- 1 vsts docker   40 2024-09-15 22:28:32.036734674 +0000 nqp-version

[22:35] <ab5tract> got 'em :)

[22:35] <timo> ok it's using the timestamps from when it was extracted, so i just have to extract the two artifacts in the opposite order

[22:37] <timo> the other jobs don't have to do it like that because they invoke prove directly instead of "make some-kind-of-test"

