[02:53] *** MasterDuke joined
[02:57] <MasterDuke> timo, lizmat, et al.: that leibniz benchmark is interesting. i made some modifications (https://github.com/niklas-heer/speed-comparison/commits/master/src/leibniz.raku) that sped it up, but across some of the different languages i get surprising results on x86 vs apple silicon

[03:00] <MasterDuke> on my laptop (apple silicon), raku takes twice as long as on my desktop (amd x86). but the python version reversed, it takes twice as long on the laptop

[03:03] <MasterDuke> and just changing `$pi = $pi + $x / (2 * $i - 1).Num;` to `$pi = $pi + nqp::div_n($x, (2 * $i - 1));` speeds it up by at least 5x on both laptop and desktop

[03:06] <MasterDuke> and a bunch of the savings is that now there are 0 GCs, where before there were ~8k (doing only 100000000 rounds instead of the default 1000000000, just to get results quicker)

[03:08] <MasterDuke> it'd be great it spesh could figure out that it doesn't need to allocate a new Num each iteration, but can just reuse one

[03:09] <MasterDuke> (oops, typoed the bit about python. it's twice as long on the *desktop*)

[03:11] <MasterDuke> off to bed &

[03:16] *** MasterDuke left
[05:48] *** melezhik joined
[05:48] <melezhik> I am going to post summary of fundings. But right now diff head vs 2025.11 does not show much

[05:49] <melezhik> http://brw.sparrowhub.io/report/brw-reporter/2957

[07:32] <ab5tract> MasterDuke: so wuold spesh essentially install a state variable in the scope and reference that? That also sounds like the kind of thing I would expect a RakuAST based optimizer to be able to do as well

[07:46] *** Voldenet left
[07:47] *** Voldenet joined
[09:27] *** melezhik left
[09:28] *** melezhik_ joined
[09:29] <melezhik_> update on yesterday run on Rakudo head to test PTY merge. I again have seen quite a few TAP related failures , which are pretty meaningless to me - https://gist.github.com/melezhik/599e7282c3d7f1445fd9d6b6359792cf

[09:30] <melezhik_> many times those failures happen on patrickb: agent (happy-herschel-****)

[09:31] <melezhik_> maybe such a failures happen on other agents, I don't know, but what puzzles me more, if I rerun those tests one more time ( and sometimes not on happy-herschel-**** agent ) they all pass

[09:33] <melezhik_> what's so special about happy-herschel-**** agent ? I don't know , the only thing first come to my mind it runs 19 parallels jobs, in comparison with [Coke]: (4 parallel jobs ) and mine (1 parallel job), which makes me think maybe this is sort of high concurrency related issue ? I dunno ðŸ¤· 

[09:34] <melezhik_> but the issue by itself is quite annoying as it cause some modules fails falsely and requires modules rerun ( and sometimes not on  happy-herschel-*** agent )

[09:36] <melezhik_> the latest commit to the agent gave added --debug flag for test runner, so hopefully it will get more details next time we encounter the issues, nevertheless it's still weird to have a such unpredictable behavior given we test the same rakudo version on the same container environment

[09:38] *** [Tux] left
[09:38] <melezhik_> ok, other different between happy-herschel-*** and other agents - mine one at least on docker, [Coke]: which one do you have ? happy-herschel-*** is on podman ... 

[09:39] <melezhik_> other different -> other difference 

[09:43] *** [Tux] joined
[09:46] <patrickb> easy test: I set the parallel jobs to 1 on the next run. Then we'll see if it's the parallelity or something else.

[10:08] *** melezhik_ left
[10:08] *** melezhik_ joined
[10:19] *** melezhik_ left
[10:19] *** melezhik_ joined
[10:24] *** melezhik_ left
[10:25] *** melezhik_ joined
[10:30] *** melezhik_ left
[10:30] *** melezhik_ joined
[10:35] *** melezhik_ left
[10:35] *** melezhik_ joined
[10:41] *** melezhik_ left
[10:41] *** melezhik_ joined
[10:46] *** melezhik_ left
[10:47] *** melezhik_ joined
[10:52] *** melezhik_ left
[10:52] *** melezhik_ joined
[10:57] *** melezhik_ left
[10:58] *** melezhik_ joined
[11:09] *** melezhik_ left
[11:31] *** librasteve_ joined
[11:34] <librasteve_> lizmat: hi i saw your ping - just heading out to get a tree

[11:34] <lizmat> ack

[11:35] <librasteve_> iâ€™ll pong when im back

[11:35] <lizmat> ok

[11:39] *** Geth left
[11:39] *** Geth joined
[11:55] *** melezhik joined
[11:57] <Geth> Â¦ rakudo/andthen-orelse: 11 commits pushed by ab5tract++

[11:57] <Geth> Â¦ rakudo/andthen-orelse: review: https://github.com/rakudo/rakudo/compare/e523bc1c2703...81d9987d7680

[13:26] <melezhik> [Coke]: would be interesting to compare results with blin if you have them

[13:38] <[Coke]> * [ ] [Unicode::Security](https://raku.land/zef:jjmerelo/Unicode::Security) â€“ Fail, Bisected: [1e66a50](https://github.com/rakudo/rakudo/commit/1e66a50cb3e5ef23348b6f2c634dc8e5809c85f2)

[13:38] <[Coke]> * [ ] [Inline::Perl5](https://raku.land/cpan:NINE/Inline::Perl5) â€“ Fail, Bisected: [63bc8b8](https://github.com/rakudo/rakudo/commit/63bc8b839300eff9f13bac2cae62bd108207b510)

[13:38] <[Coke]> So just the one new issue, with Inline::Perl5

[13:39] <[Coke]> ... and that bisected to the pty support merge

[13:42] <lizmat> Unicode::Security failure could be attributed to the move to Unicode 17 perahaps ?

[13:45] <patrickb> Is there a link pointing to the error log?

[13:48] <[Coke]> lizmat: its the same failure as the previous blin run, yes.'

[13:48] <[Coke]> I didn't expect that one to start working.

[13:48] <[Coke]> https://github.com/JJ/raku-unicode-security/issues/6

[13:49] <[Coke]> patrickb: sure, it's just on an azure box, have to ssh things around to get it visible. one moment.

[13:49] <lizmat> [Coke]: ah, that one

[13:49] <lizmat> will look at it once I've written tomorrow's advent post  :-)

[13:51] <[Coke]> https://gist.github.com/coke/0a5f70703ba4fa2370923afd8de8332d - there's a failures.md there you can download.

[13:54] <[Coke]> ... weird, my grep seems to have missed some failures. creating a shortened version without all the verbose output

[13:55] <[Coke]> Text::Markdown::Discount also had a failure.

[13:57] <[Coke]> https://gist.github.com/coke/4c32a56599bbae31fef330aeee9a909f

[13:57] <[Coke]> discount is on merging the release branch, so that's just weird.

[13:57] <lizmat> yeah... 

[13:58] <[Coke]> Digging into the Inline::Perl5 failure in the long version... I don't see a failed test, but a moarvm issue:

[13:58] <[Coke]>   [Inline::Perl5] MoarVM oops: Internal error: unhandled dyncall argument type for str 46

[13:59] <[Coke]> (there's a whole backtrace in there as well)(

[14:01] <lizmat> so maybe it's related to NativeCall varargs support ?

[14:02] <[Coke]> maybe; something triggered by the pty change, though?

[14:03] <[Coke]> so I'm guessing we can rule out T::M::D with a manual test, and I::P5 is the one I'm concerned about.

[14:07] *** finanalyst joined
[14:19] <Geth> Â¦ rakudo/main: 6f557f1ec6 | (Elizabeth Mattijsen)++ | 2 files

[14:19] <Geth> Â¦ rakudo/main: RakuAST: introduce =restart RakuDoc directive

[14:19] <Geth> Â¦ rakudo/main: 

[14:19] <Geth> Â¦ rakudo/main: As suggested by finanalyst++ and thoughtstream++.  May still need

[14:19] <Geth> Â¦ rakudo/main: some fixups, but that's to be seen later

[14:19] <Geth> Â¦ rakudo/main: review: https://github.com/rakudo/rakudo/commit/6f557f1ec6

[14:19] <ShimmerFairy> Could that be a Unicode 17 change issue, perhaps? I didn't have I::P5 installed when I was working on that. I don't think that upgrade should've hurt anything P5-related, and I think it would've been noticed before now, but I wanted to bring it up anyway.

[14:36] <[Coke]> that issue didn't show up on the blin run that just included the unicode 17 update, and bisects to the pty merge.

[14:37] <[Coke]> seems unlikely to me.

[14:37] <[Coke]> but we definitely don't want to break inline::perl5 this release.

[14:42] <disbot6> <melezhik.> Confirming Unicode::Security failure in brownie

[14:46] <disbot6> <melezhik.> Test::Async fails as well,( passed in 2025.11), but maybe this is flapper? http://brw.sparrowhub.io/file_view/brw-reporter/hvoxlnumiwjdgfzaypqc.34/Test::Async.log

[14:49] <[Coke]> are you using PERL6LIB anywhere?

[14:49] <disbot6> <melezhik.> Not confirming Inline::Perl5 test failure in brownie though

[14:49] <disbot6> <melezhik.> http://brw.sparrowhub.io/report/job.1.report/3125

[14:49] <[Coke]> Yup, seems like 50% of blin failures result in lizmat saying "can't verify the issue"

[14:50] <lizmat> hmmm...  :-)

[14:50] <disbot6> <melezhik.> No usage of PERL6LIB in brownie setup on my memory

[14:51] <[Coke]> ok - your log error for async includes a bunch of references to that. Did we deprecate something we hadn't before?

[14:51] <disbot6> <melezhik.> Test::Markdown::Discount failure is confirmed though the report is a bit confusing ( the same link as for inline::perl5 )

[14:52] <patrickb> the Inline::Perl5 issue is non repro able as well. Possibly a flapper

[14:54] <disbot6> <melezhik.> [Coke]: ahh ok , I need to check if perl6lib is set inside container

[14:55] <disbot6> <melezhik.> Let me check

[14:57] <disbot6> <melezhik.> So , not set

[14:58] <disbot6> <melezhik.> root@9bd616413a89:/app# env|grep PERL6LIB| wc -l 0

[14:58] <[Coke]> https://github.com/vrurg/raku-Test-Async/blob/559ac33bad9f0d5914ec575433d6bca54fd0d419/t/005-bootstrap.rakutest#L54

[15:01] <melezhik> Test::Async report was made on Coke-bot btw

[15:04] <disbot6> <melezhik.> Heads up - all brownie links should be prefixed with http:// schema if clicked from irc logs site

[15:04] <disbot6> <melezhik.> Not sure why irclogs.raku.org render removes http://

[15:04] <disbot6> <melezhik.> ^^ lizmat:

[15:12] <lizmat> melezhik. please make an issue for that in App::Raku::Log

[15:14] <[Coke]> the link is still there.

[15:15] <[Coke]> <a href="http://brw.sparrowhub.io/report/job.1.report/3125">brw.sparrowhub.io/report/job.1.report/3125</a>

[15:16] <[Coke]> so clickthrough is fine.

[15:16] <[Coke]> (but yah, it's slightly confusing reading)

[16:12] *** finanalyst left
[16:19] <melezhik> Yeah, from regular irc client it works , but not from irclogs.raku.org logs , which remove http prefix supposedly

[16:27] *** timo left
[17:00] <melezhik> lizmat: will do

[17:00] *** timo joined
[17:03] <disbot6> <melezhik.> [Coke]: patrickb ab5tract I have some changes to agent , please bear this in mind before start it - pull the latest changes , I think no immediate need to run right now , just for information. Mostly these are changes adding zef debug to show all detail of failed tests TAP reports , thanks

[17:58] <[Coke]> melezhik: no, I was reading from the irc log website.

[18:13] <melezhik> Ok. Strange . Maybe itâ€™s also depends on browser ? I dunno ðŸ¤· need to investigate

[18:17] <[Coke]> DDG here.

[18:42] <librasteve_> https://rakudoweekly.blog/2025/12/15/2025-50-exemplar-poll/

[18:57] <lizmat> librasteve_++

[19:00] <releasable6> Next release in â‰ˆ4 days and â‰ˆ23 hours. There are no known blockers. Please log your changes in the ChangeLog: https://github.com/rakudo/rakudo/wiki/ChangeLog-Draft

[20:34] *** melezhik left
