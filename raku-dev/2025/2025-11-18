[00:03] <Geth> ¦ rakudo/main: 6f06f9f1fe | (Will Coleda)++ | docs/release_guide.pod

[00:03] <Geth> ¦ rakudo/main: Add next release date

[00:03] <Geth> ¦ rakudo/main: 

[00:03] <Geth> ¦ rakudo/main: release engineer TBD

[00:03] <Geth> ¦ rakudo/main: review: https://github.com/rakudo/rakudo/commit/6f06f9f1fe

[00:03] <[Coke]> releasable6: next

[00:03] <releasable6> [Coke], Release date for Rakudo 2025.11 is listed in “Planned future releases”, but it was already released.

[00:03] <releasable6> [Coke], and I oop! Backtrace: https://gist.github.com/8462582ad482994687edb731ad86d722

[00:09] <Geth> ¦ rakudo/main: c5c33ba9dc | (Will Coleda)++ | docs/release_guide.pod

[00:09] <Geth> ¦ rakudo/main: Try alpha "TBD" for releasable.

[00:09] <Geth> ¦ rakudo/main: review: https://github.com/rakudo/rakudo/commit/c5c33ba9dc

[00:19] <Geth> ¦ rakudo/main: e66655c07a | (Will Coleda)++ (committed using GitHub Web editor) | 2 files

[00:19] <Geth> ¦ rakudo/main: Coke/releng (#6023)

[00:19] <Geth> ¦ rakudo/main: 

[00:19] <Geth> ¦ rakudo/main: * We don't have future dates listed there...

[00:19] <Geth> ¦ rakudo/main: anymore

[00:19] <Geth> ¦ rakudo/main: 

[00:19] <Geth> ¦ rakudo/main: * minor nits found during 2025.11 release

[00:19] <Geth> ¦ rakudo/main: review: https://github.com/rakudo/rakudo/commit/e66655c07a

[00:24] <Geth> ¦ setup-raku: 5ebf60c573 | dependabot[bot]++ (committed using GitHub Web editor) | package-lock.json

[00:24] <Geth> ¦ setup-raku: Bump js-yaml from 3.14.1 to 3.14.2 (#43)

[00:24] <Geth> ¦ setup-raku: 

[00:24] <Geth> ¦ setup-raku: Bumps [js-yaml](https://github.com/nodeca/js-yaml) from 3.14.1 to 3.14.2.

[00:24] <Geth> ¦ setup-raku: - [Changelog](https://github.com/nodeca/js-yaml/blob/master/CHANGELOG.md)

[00:24] <Geth> ¦ setup-raku: - [Commits](https://github.com/nodeca/js-yaml/compare/3.14.1...3.14.2)

[00:24] <Geth> ¦ setup-raku: 

[00:24] <Geth> ¦ setup-raku: ---

[00:24] <Geth> ¦ setup-raku: <…commit message has 8 more lines…>

[00:24] <Geth> ¦ setup-raku: review: https://github.com/Raku/setup-raku/commit/5ebf60c573

[01:19] <jdv> [Coke]: sure

[02:21] *** unicodable6 left
[02:24] *** unicodable6 joined
[06:02] *** melezhik joined
[07:45] <Geth> ¦ rakudo/main: a1336399a5 | (Patrick Böker)++ | t/04-nativecall/26-varargs.t

[07:45] <Geth> ¦ rakudo/main: Another vararg test: passing `Int`s

[07:45] <Geth> ¦ rakudo/main: review: https://github.com/rakudo/rakudo/commit/a1336399a5

[07:45] <Geth> ¦ rakudo/main: 31ff2eb228 | (Patrick Böker)++ (committed using GitHub Web editor) | t/04-nativecall/26-varargs.t

[07:45] <Geth> ¦ rakudo/main: Merge pull request #6027 from patrickbkr/another-vararg-test

[07:45] <Geth> ¦ rakudo/main: 

[07:45] <Geth> ¦ rakudo/main: Another vararg test: passing `Int`s

[07:45] <Geth> ¦ rakudo/main: review: https://github.com/rakudo/rakudo/commit/31ff2eb228

[07:52] *** librasteve_ joined
[08:01] *** n70470 joined
[08:01] <n70470> .

[08:02] *** n70470 is now known as melezhik2

[08:04] <japhb> lizmat: I just came across https://github.com/lizmat/path-utils/blob/main/lib/path-utils.rakumod#L15-L30 and I have to tip my hat to you for that little bit of packaged evil.  ;-)

[08:06] *** melezhik2 left
[08:14] *** n71246 joined
[08:15] *** n71246 left
[09:16] <lizmat> yeah, the grammar on "and there a no return statements" is horrible  :-)

[09:31] <sjn> looks like a typo to me :-P

[09:34] <melezhik> .

[10:02] *** librasteve_ left
[10:58] <ab5tract> someone pushed a commit that breaks a number of tests, # Found 1 unexpected entries: $current-offset-nanos

[11:03] <ab5tract> bisectable6: use v6c; not SETTING::.keys.grep: * ~~ q|$current-offset-nanos|

[11:03] <bisectable6> ab5tract, Will bisect the whole range automagically because no endpoints were provided, hang tight

[11:04] <bisectable6> ab5tract, Output on all releases: https://gist.github.com/ab45123775f561be70f10bc74e3ee3e9

[11:04] <bisectable6> ab5tract, bisect log: https://gist.github.com/58ca9f2809eb3fb0c580d8a6d0078721

[11:04] <bisectable6> ab5tract, Output on all releases and bisected commits: https://gist.github.com/5d5f53f0526c38008f4718db763b8e27

[11:05] <ab5tract> bisectable6: use v6.c; return not SETTING::.keys.grep: * ~~ q|$current-offset-nanos|

[11:05] <bisectable6> ab5tract, Will bisect the whole range automagically because no endpoints were provided, hang tight

[11:05] <ab5tract> m: use v6.c; say not SETTING::.keys.grep: * ~~ q|$current-offset-nanos|

[11:05] <camelia> rakudo-moar 31ff2eb22: OUTPUT: «False␤»

[11:05] <bisectable6> ab5tract, ¦6c (95 commits): «Attempt to return outside of any Routine␤  in block <unit> at /tmp/Lza_QFPxj_ line 1␤␤ «exit code = 1»»

[11:05] <bisectable6> ab5tract, Nothing to bisect!

[11:06] <ab5tract> bisectable6: use v6.c; not SETTING::.keys.grep: * ~~ q|$current-offset-nanos|

[11:06] <bisectable6> ab5tract, Will bisect the whole range automagically because no endpoints were provided, hang tight

[11:06] <bisectable6> ab5tract, ¦6c (95 commits): «WARNINGS for /tmp/1NdzUan6Hy:␤Useless use of "not " in expression "not SETTING::.keys.grep: * ~~ q|$current-offset-nanos|" in sink context (line 1)␤»

[11:06] <bisectable6> ab5tract, Nothing to bisect!

[11:07] <ab5tract> bisectable6: help

[11:07] <bisectable6> ab5tract, Like this: bisectable6: old=2015.12 new=HEAD exit 1 if (^∞).grep({ last })[5] // 0 == 4 # See wiki for more examples: https://github.com/Raku/whateverable/wiki/Bisectable

[11:07] <ab5tract> bisectable6: use v6.c; exit + not SETTING::.keys.grep: * ~~ q|$current-offset-nanos|

[11:08] <bisectable6> ab5tract, Will bisect the whole range automagically because no endpoints were provided, hang tight

[11:08] <bisectable6> ab5tract, Output on all releases: https://gist.github.com/6ec0687a34664ad18cff37cf5dc1d7e5

[11:08] <bisectable6> ab5tract, Bisecting by exit code (old=2025.11 new=31ff2eb). Old exit code: 1

[11:08] <bisectable6> ab5tract, bisect log: https://gist.github.com/5d72c053db5c13e94cdbe3f97f059407

[11:08] <bisectable6> ab5tract, Output on all releases and bisected commits: https://gist.github.com/4e75ed764c082435b41ea86737a1fc7f

[11:09] <ab5tract> what is going on here? 

[11:09] <ab5tract> bisectable6: use v6.c; exit + not SETTING::.keys.grep: * ~~ q|$current-offset-nanos|

[11:09] <bisectable6> ab5tract, Will bisect the whole range automagically because no endpoints were provided, hang tight

[11:09] <ab5tract> oops

[11:09] <ab5tract> m: use v6.c; say not SETTING::.keys.grep: * ~~ q|$current-offset-nanos|

[11:09] <camelia> rakudo-moar 31ff2eb22: OUTPUT: «False␤»

[11:10] <bisectable6> ab5tract, Output on all releases: https://gist.github.com/7e2b033a11bcfc33da7372a5c18f2bba

[11:10] <bisectable6> ab5tract, Bisecting by exit code (old=2025.11 new=31ff2eb). Old exit code: 1

[11:10] <bisectable6> ab5tract, bisect log: https://gist.github.com/0791121c271bbaba71d56d6395fc11cd

[11:10] <bisectable6> ab5tract, Output on all releases and bisected commits: https://gist.github.com/32d0881b4ef690ba129c891e3d8223c3

[11:12] <ab5tract> here is the commit: 3b80351fa6c99a341f35a2978ee847975c4165d5

[11:12] <ab5tract> is rir on IRC?

[11:15] <ab5tract> is the "right" thing to do to add $current-offset-nanos to the tests? or to just replace the one time the variable is referenced with a direct call to Rakude::Internals.current-offset-nanos

[11:18] <ab5tract> I guess the addition of this variable only affects versions < 6.e because RakuAST is much cleaner about what it brings in

[11:19] <ab5tract> m: use v6.c; q{ say not SETTING::.keys.grep: * ~~ q|$current-offset-nanos| }.AST.EVAL

[11:19] <camelia> rakudo-moar 31ff2eb22: OUTPUT: «True␤»

[11:20] <ab5tract> in that case I will just fix the tests

[11:22] <ab5tract> hmmm, still fails a test: Lexical with name '$current-offset-nanos' has a different type in this frame

[11:26] <Geth> ¦ rakudo/main: 6432643ba3 | ab5tract++ | src/core.c/Instant.rakumod

[11:26] <Geth> ¦ rakudo/main: Remove lexical $current-offset-nanos

[11:26] <Geth> ¦ rakudo/main: 

[11:26] <Geth> ¦ rakudo/main: Using a variable to store `Rakudo::Internals.current-offset-nanos`

[11:26] <Geth> ¦ rakudo/main: pollutes the SETTING and CORE namespaces for versions < 6.e.

[11:26] <Geth> ¦ rakudo/main: 

[11:26] <Geth> ¦ rakudo/main: For 6.e, a different exception occurs:

[11:26] <Geth> ¦ rakudo/main: 

[11:26] <Geth> ¦ rakudo/main:     Lexical with name '$current-offset-nanos' has a different type in this frame

[11:26] <Geth> ¦ rakudo/main: 

[11:26] <Geth> ¦ rakudo/main: These are presumably fixable but it's also feasible that any performance

[11:26] <Geth> ¦ rakudo/main: gains could be delivered at the optimizer level instead.

[11:26] <Geth> ¦ rakudo/main: review: https://github.com/rakudo/rakudo/commit/6432643ba3

[11:36] <lizmat> ab5tract: good catch

[11:37] <lizmat> however, now each time 'now' is called, it will do the calculation in Internals...     so the constant needs to be made there

[11:37] <lizmat> or int assigned at started

[11:37] <lizmat> *startup

[11:39] <ab5tract> well is it static or dynamic?

[11:40] <ab5tract> the return value of Internal.current-offset-nanos, I mean

[11:42] <ab5tract> if there is any chance at all that it changes, it seems to me that it needs to be called each time

[11:42] <ab5tract> and if there is no chance that it changes, why is there a calculation there and not a constant value?

[12:10] <ab5tract> I'm fine with the approach in the previous patch, but it was merged without testing, which is a real annoyance for others who are hacking on core

[12:25] <Geth> ¦ rakudo/r5317-role-it: 178bf24439 | ab5tract++ | src/Perl6/Metamodel/ParametricRoleHOW.nqp

[12:25] <Geth> ¦ rakudo/r5317-role-it: Add an istype check on the role group

[12:25] <Geth> ¦ rakudo/r5317-role-it: 

[12:25] <Geth> ¦ rakudo/r5317-role-it: This addresses R#5317, which had the following test case:

[12:25] <Geth> ¦ rakudo/r5317-role-it: 

[12:25] <Geth> ¦ rakudo/r5317-role-it:     role R {}

[12:25] <Geth> ¦ rakudo/r5317-role-it:     role S does R {}

[12:25] <Geth> ¦ rakudo/r5317-role-it:     my R $v = role V does S {}

[12:25] <Geth> ¦ rakudo/r5317-role-it: <…commit message has 21 more lines…>

[12:25] <linkable6> R#5317 [open]: https://github.com/rakudo/rakudo/issues/5317 [roles][Will be addressed in RakuAST] role-constrained variable does not accept derived role defined inline

[12:25] <Geth> ¦ rakudo/r5317-role-it: review: https://github.com/rakudo/rakudo/commit/178bf24439

[12:25] <Geth> ¦ rakudo: ab5tract++ created pull request #6028: Add an istype check on the role group

[12:25] <Geth> ¦ rakudo: review: https://github.com/rakudo/rakudo/pull/6028

[13:01] <lizmat> ab5tract: the only time that number changes, is when the world adds a leap-second

[13:01] <timo> .o( is it bad that we can't update that in a running process? )

[13:03] <lizmat> well, possibly: if we really want to support a hot update, then we would need quite a different approach

[13:03] <lizmat> because atm it would require a core update / re-compile

[13:04] <timo> maybe processes shouldn't be running for multiple years at a time in the first place

[13:04] <timo> leap seconds are announced long in advance, right?

[13:04] <lizmat> yeah, historically

[13:05] <lizmat> but it also looks like we won't have a leap-second added for quite some time to come, due to climate change

[13:06] <lizmat> and there's been even talk of actually introducing a negative leap-second at some point: https://en.wikipedia.org/wiki/Leap_second

[13:06] <ab5tract> are state variables available in Rakudo::Internals methods?

[13:07] <lizmat> it's pretty early in the core

[13:07] <ab5tract> lizmat: it definitely sounds like we don't want or need to call it more than once

[13:07] <lizmat> yeah

[13:08] <ab5tract> my only real issue with that patch is the ignored test failures

[13:09] <lizmat> eh?   I didn't see any test fails ?

[13:12] <lizmat> ah... because the name got added?    grr  I guess I only checked spectest  :-(

[13:13] <ab5tract> ah, that makes sense

[13:13] <ab5tract> definitely done that before :)

[13:13] <ab5tract> so, I have another role group istype check that produces a lot of TODO passes :D

[13:15] <ab5tract> doesn't totally fix t/spec/S02-types/generics.t, but it does fix the shortened version of that test from r#5970

[13:15] <linkable6> R#5970 [open]: https://github.com/rakudo/rakudo/issues/5970 RakuAST - Fix generics package names

[13:16] <ab5tract> ah crap, now I've done a test fail too lol

[13:17] <ab5tract> echo $RAKUDO_RAKUAST

[13:17] <ab5tract> the patch is not rakuast specific though

[13:34] <patrickb> ab5tract: Can you please retrigger the CI on https://github.com/ab5tract/Terminal-Print/pull/90 ?

[13:53] <ab5tract> patrickb: not at all computer at the moment. Maybe find a typo or a docs gap and push a fix?

[13:53] <ab5tract> Otherwise I can do it in about 2-3 hours

[13:55] <patrickb> ack

[14:46] *** El_Che joined
[14:46] <El_Che> hi, I get a segmentation error when building moarmv on OpenSuse Leap 16.0: +++ Compiling	gen/moar/stage1/nqpmo.moarvm

[14:46] <tellable6> 2025-11-15T19:36:34Z #raku-dev <[Coke]> el_che 2025.11 should be ready for binary releases now

[14:46] <El_Che> make: *** [Makefile:370: gen/moar/stage1/nqpmo.moarvm] Segmentation fault (core dumped)

[14:47] <El_Che> has someone here experienced that here?

[14:49] <lizmat> sounds unfamiliar to me

[14:49] <timo> that's very early in the compilation process isn't it?

[14:50] <timo> can you get a backtrace? maybe you have `coredumpctl` and you can get the output of `coredumpctl info`?

[14:50] <El_Che> it's in a container in a github action, I'll start by pasting the complete build in a guist

[14:50] <El_Che> *gist

[14:51] <timo> ah that's annoying. but at least with a container it should be relatively reproducible? does it happen reliably or sporadically?

[14:52] <El_Che> every time

[14:52] <El_Che> https://productionresultssa14.blob.core.windows.net/actions-results/99e3daf3-930d-41e9-b73c-b7afd96b3679/workflow-job-run-37e831a4-2e24-53ba-8dbe-a6be934584ec/logs/job/job-logs.txt?rsct=text%2Fplain&se=2025-11-18T15%3A01%3A15Z&sig=G%2FeUKKbXfDEkAlGw3fhPbTH%2BA%2FKJAHhE3vOl4TD8TiI%3D&ske=2025-11-18T23%3A06%3A39Z&skoid=ca7593d4-ee42-46cd-af88-8b886a2f84eb&sks=b&skt=2025-11-18T11%3A06%3A39Z&sktid=398a6654-99

[14:52] <El_Che> 7b-47e9-b12b-9515b896b4de&skv=2025-11-05&sp=r&spr=https&sr=b&st=2025-11-18T14%3A51%3A10Z&sv=2025-11-05

[14:52] <El_Che> that is the complete log

[14:52] <timo> "Server failed to authenticate the request" :)

[14:52] <El_Che> damn

[14:52] <timo> ah haha there's more to t he link

[14:52] <timo> now it works

[14:53] <El_Che> https://gist.github.com/nxadm/a4b8d9007ebdd3fbb6d2223a00dc153d#file-rakudo-2025-11-opensuse-leap-16-0

[14:53] <El_Che> in case the action links is temporary

[14:54] <timo> right. we'll need more info to go on than just the log output. something must be quite wrong for moar to segfault with the first .moarvm file it sees

[15:04] *** linkable6__ joined
[15:04] *** bloatable6__ joined
[15:06] <El_Che> leap is a recent distro, just added to the build

[15:06] <El_Che> (sorry I am on and off, in a meeting)

[15:07] <El_Che> building in a loop to see if it 100% segfaults (I suppose)

[15:08] *** bloatable6 left
[15:08] *** linkable6 left
[15:11] <timo> there's another segfault

[15:12] *** tellable6 left
[15:12] *** shareable6 left
[15:12] *** tellable6 joined
[15:12] <El_Che> only segfaults so far

[15:17] <timo> does it spit out a core.$PID file in the CWD? that + the moar binary and libmoar.so would be good to have to find out what's going wrong. `strace -f` of the compiling step could also give a hint

[15:18] <timo> maybe `strace -f -k` to get stack traces as well

[15:19] <El_Che> I will try to run the build locally

[15:19] <timo> AFKBBL

[15:20] <El_Che> I am not able to do it soonish, I'll release without opensuse leap 16

[17:14] <ab5tract> patrickb: Terminal::Print CI/CD re-triggered and all checks are green

[17:25] <japhb> ab5tract: Pretty please can you set the Terminal::Print webhook to point to Geth for #mugs?

[17:30] <ab5tract> japhb: sure, but ... how? :)

[17:33] <japhb> ab5tract: Open the repo on github, go to the Settings page in the tab bar, go to Webhooks in the leftnav, click the Add webhook button, Payload URL should be https://webhooks.liz.nl/?chan=%23mugs and Content type should be application/json and for Which events, choose Send me everything.

[17:42] <ab5tract> japhb: done! thanks for the detailed instructions

[17:43] <japhb> You betcha!  :-D

[17:43] <japhb> And thanks

[20:27] <Geth> ¦ rakudo/r5317-role-it: c70122ad8f | ab5tract++ | src/Perl6/Metamodel/ParametricRoleHOW.nqp

[20:27] <Geth> ¦ rakudo/r5317-role-it: Add an istype check on the role group

[20:27] <Geth> ¦ rakudo/r5317-role-it: 

[20:27] <Geth> ¦ rakudo/r5317-role-it: This addresses R#5317, which had the following test case:

[20:27] <Geth> ¦ rakudo/r5317-role-it: 

[20:27] <Geth> ¦ rakudo/r5317-role-it:     role R {}

[20:27] <Geth> ¦ rakudo/r5317-role-it:     role S does R {}

[20:27] <Geth> ¦ rakudo/r5317-role-it:     my R $v = role V does S {}

[20:27] <linkable6__> R#5317 [open]: https://github.com/rakudo/rakudo/issues/5317 [roles][Will be addressed in RakuAST] role-constrained variable does not accept derived role defined inline

[20:27] <Geth> ¦ rakudo/r5317-role-it: <…commit message has 21 more lines…>

[20:27] <Geth> ¦ rakudo/r5317-role-it: review: https://github.com/rakudo/rakudo/commit/c70122ad8f

[21:00] *** librasteve_ joined
[21:11] *** melezhik left
