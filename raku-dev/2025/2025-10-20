[00:19] *** japhb left
[00:20] *** ds7823 left
[00:35] *** japhb joined
[00:37] *** MasterDuke joined
[00:57] *** japhb left
[01:23] *** japhb joined
[01:36] *** japhb left
[01:41] *** japhb joined
[01:42] *** MasterDuke left
[01:47] *** japhb left
[02:12] *** japhb joined
[06:14] *** timo2 left
[06:17] *** timo2 joined
[08:30] *** melezhik joined
[11:09] *** melezhik left
[15:10] <lizmat> m: sub a(--> Int:D) { }; dd a

[15:10] <camelia> rakudo-moar 4a043ba51: OUTPUT: «Nil  = Nil␤»

[15:39] <[Coke]> Still no response to the bug on META6 that is blocking installation on Windows since February

[15:40] <[Coke]> While there is a workaround that we can do in the module itself to avoid the problematic code, the issue is something to do with Junctions.

[15:40] <[Coke]> Perhaps we can golf that down and get it fixed in the next rakudo release? :|

[15:44] <[Coke]> My simple golf apparently too simple as it works on mac and windows.

[16:01] <timo2> oh, something involving junctions that behaves different on linux vs mac and windows?

[16:04] <[Coke]> https://github.com/jonathanstowe/META6/issues/31

[16:05] <[Coke]> if we iterate over the list, it works. if we do all(...list) ... it works on non-windows

[16:06] <[Coke]> trying to golf it into a oneliner that still fails on windows, but no luck so far.

[16:07] <[Coke]> but SO many things depend on META6, not being able to install it on windows...

[16:07] <timo2> have we tried turning spesh on and off for this?

[16:08] <[Coke]> I can try that now.

[16:10] <[Coke]> $env:MVM_DISABLE_SPESH=1 - test still fails

[16:10] <timo2> because ~~ is type-checky

[16:10] <timo2> it's SPESH_DISABLE

[16:10] <timo2> MVM_SPESH_DISABLE

[16:11] <[Coke]> ... oops!

[16:11] <[Coke]> ok, still fails

[16:12] <timo2> ah, it's broken on windows, not on linux, i misunderstood the earlier message i think?

[16:13] <timo2> otherwise i would have tried it locally

[16:13] <[Coke]> correct, works everywhere but windows

[16:13] <[Coke]> and it's been like this since at least Feb

[16:14] <[Coke]> (but I haven't checked if that's "when I noticed", "when the test was changed" or "when the current rakudo stopped working"

[16:14] <timo2> i'm not sure if you want to take the time to dive in with moar-remote or so, but an initial idea of what the code is doing can be gained by setting MVM_COVERAGE_LOG=this_will_become_huge.txt MVM_COVERAGE_CONTROL=1 and then putting `use nqp; nqp::coveragecontrol(1)` before the problematic call

[16:15] <[Coke]> That's probably beyond my debugging powers at this point. If someone needs that file generated, I can do and share the huge.txt

[16:18] <timo2> it won't become quite as huge with the nqp::coveragecontrol as opposed to setting the env var to 2 which would include the entirety of rakudo's compilation stage and such

[16:22] <jdv> is "squashing" assumed nowadays.  i know i've been out of it for a bit but that wasn't really a normal thing back in my day:)

[16:22] <jdv> merge means merge, to me

[16:23] <lizmat> if it's a single commit PR (or one that could well be considered a single commit) I use squash nowadays, because it doesn't add another entry to the log

[16:24] <lizmat> this is from the days I was going through git logs for the weekly, as a merge of a PR several weeks old, was hard to trace

[16:27] <jdv> arguably in that case a PR may not be even be useful.  just rebase and push.

[16:27] <jdv> but ok:)

[16:28] <lizmat> well, this is mostly seen from the Github online interface

[16:28] <lizmat> afaik you cannot just rebase and push a PR there

[16:29] <Geth> ¦ rakudo/main: 10 commits pushed by (Will Coleda)++

[16:29] <Geth> ¦ rakudo/main: review: https://github.com/rakudo/rakudo/compare/4a043ba5100e...6a9e284f2fd4

[16:30] <[Coke]> jdv: I very often squash commits, e.g. for raku/docs

[16:31] <[Coke]> I figured it was one commit, no worries, except there were worries. :)

[16:32] <[Coke]> btw, jdv, thanks for fixing the inline-perl5 thing a while back!

[16:32] <[Coke]> was nice to see those tests run

[16:33] <Geth> ¦ rakudo: coke self-assigned ake release step 'rakudo-stress-errata' doing too much https://github.com/rakudo/rakudo/issues/5827

[16:33] <jdv> oh did i?

[16:33] <[Coke]> jdv: I'll do https://github.com/rakudo/rakudo/issues/5827 later this week, should be easy

[16:33] <jdv> i vaguely remember something about that:)

[16:33] <[Coke]> :)

[16:33] <jdv> oh, that'd be nice

[16:34] <[Coke]> That's the worst part for me right now is to make sure I catch the end of the 6.c run visually. :)

[16:34] <jdv> trying to catch the embedded failure reports on that step is kinda annoying

[16:34] <[Coke]> (well, after fixing the other few issues this week)

[16:34] <jdv> yup.  its the one part i have to sit there for

[16:35] <[Coke]> I also noted that somewhere, some utility is looking for "very happy to announce" as part of the message, and I DELIBERATELY REMOVE THE VERY, so hopefully I haven't broken anything doing that.

[16:35] <jdv> what's the word on the street with ast?

[16:35] <jdv> EOY?

[16:35] <[Coke]> I don't think we have a solid deadline post-meetup.

[16:36] <[Coke]> ab5tract++ has been doing several updates recently

[16:36] <jdv> ah, ok

[16:36] <ab5tract> [Coke]: why thank you :)

[16:36] <timo2> [Coke]: i can look through the generated file if you share it

[16:37] <ab5tract> I've still been averaging a few hours a day at hacking, but I'm stuck on the remaining issues with generics

[16:37] <[Coke]> jdv: once I split up that ake step into 2, I think my next big thing is to update blin. I had been thinking of a client/server approach, but japhb suggested an intermediate step of just two processes with a supply/tap to work on the jobs. I need to do this because I cannot tell you how many times since I started running blin that it just dies halfway through a run and I have to do the whole thing over.

[16:37] <[Coke]> timo2: OK. no promises, will try to get that out this week

[16:38] <[Coke]> I will rank that above "complete blin rewrite". :)

[16:47] <jdv> that's only happened to me a few times over the few dozen runs i've done.  weird.

[16:47] <jdv> what is the cause of the failure?

[16:48] <jdv> i thought he mentioned a simpler fs based "job queue"

[16:48] <jdv> but sure

[16:49] <jdv> sounds cool.  but afaik we still don't have a recent release of the deps of blin.  it is a little overly complex 

[16:50] <jdv> aka Whateverable - i think that's what its called

[16:50] <jdv> this why my blin docker container is "20 months ago"

[16:50] <[Coke]> (cause of the failure) - I have no idea, because the whole run crashes, closes the tmux session. all I have is the "overview" in progress.

[16:50] <jdv> *image

[16:51] <jdv> for me its typically oom

[16:51] <[Coke]> we can update the docker image you're using (or, rather, create a new one. I have a few under coke/ that I've been created for other raku usages...)

[16:51] <[Coke]> Sure - but then there's no way to say "skip this one that caused an OOM" (or which one even caused it)

[16:52] <[Coke]> and we shouldn't require like 64G to run this.

[16:52] <jdv> which is why i have a 100% sized swap so i can be relatively lucky if i check in every few hours to catch it before it goes oom it gets buried in swapping

[16:52] <jdv> i have 16G of ram and swap:)(

[16:52] <[Coke]> Yup.

[16:52] <jdv> its dumb

[16:53] <jdv> idk we don't just ulimit it or whatever

[16:53] <jdv> haven't loked 

[16:53] <jdv> *looked

[16:54] <[Coke]> Well, allowing it to split into jobs across processes will eventually allow us to split it up over agents, and also collect data over multiple runs so we can do smarter skips. "oh, this failed for the last 10 releases, maybe let's just not test it going forward"

[16:55] <jdv> i have no problem running such an old blin.  a large point of my trying to update mine was to get it to the point any rando can do it.

[16:55] <[Coke]> "at the very least, don't re-test the known failure from last time, only test it against HEAD"

[16:55] <jdv> but i don't have tuits and liz gave up, so far;)

[16:55] <[Coke]> as I recall, I couldn't even get your docker image to work for me, which is why I'm running of blin head.

[16:55] <jdv> at one point maybe a couple years ago it was a clean docker build 

[16:56] <[Coke]> eh. liz has plenty of other stuff on her plate, no worries there

[16:56] <jdv> well, she does the moves to community module and she was kinda manintaining it

[16:56] <jdv> but if anyone else wants to do that, that'd be cool

[16:57] <jdv> iirc the issue is all the whateverable dists on the ecos are out of date 

[16:57] <jdv> i can continue to fix the docker build once that's corrected.  i think.  been a while.

[17:02] <[Coke]> could do a build that pulled in from git repo instead of zef.

[17:05] <timo2> could new-blin be built on top of sparky maybe?

[17:07] <[Coke]> What does that give us?

[17:08] <timo2> well, i imagine sparky already has job management, a web frontend, i think it has distributed runners, too

[17:09] <timo2> (all speculation from my side)

[17:11] <[Coke]> I mean, maybe. Seems like it would be better for the full client/server workflow, but probably overkill for the "make the runs resumable" part.

[17:12] <timo2> it'll also reliably slurp up logs for us, and already have handling for resource exhaustion?

[17:20] <timo2> also, sparky is already being maintained and has been battle-tested, and it's always better to rely on Other People's Code™ when you yourself don't have that much time to invest, right?

[17:42] <librasteve_> https://rakudoweekly.blog/2025/10/20/2025-42-release-186-2025-10/

[17:45] <[Coke]> agreed, want to focus on solving the problem, not implementing a solution

[17:53] <ab5tract> I keep intending to learn sparky and would be willing to help efforts

[18:34] <[Coke]> cool, cool.

[18:58] <timo2> is the CoreHackers namespace still good to use for new stuff?

[19:18] <[Coke]> so if we using sparky, looks like we can eventually "just" switch from having local runners to remote runners.

[19:20] <[Coke]> it does look like sparrow is not letting clients pull jobs, but is pushing them?

[19:38] <timo2> ah, i guess it's vaguely ansible-ish in that way?

[19:40] <[Coke]> ab5tract: what's your github id?

[19:41] <[Coke]> ah, same.

[19:58] <jdv> i prefer the push pull

[22:35] <Geth> ¦ rakudo/coke/errata-split: 95c56c2fa9 | (Will Coleda)++ | 2 files

[22:35] <Geth> ¦ rakudo/coke/errata-split: Split -errata akefile target into 6c/6d

[22:35] <Geth> ¦ rakudo/coke/errata-split: 

[22:35] <Geth> ¦ rakudo/coke/errata-split: Also reset the branch to master when done.

[22:35] <Geth> ¦ rakudo/coke/errata-split: 

[22:35] <Geth> ¦ rakudo/coke/errata-split: Fixes #5827

[22:35] <Geth> ¦ rakudo/coke/errata-split: Fixes #5829

[22:35] <Geth> ¦ rakudo/coke/errata-split: review: https://github.com/rakudo/rakudo/commit/95c56c2fa9

[22:36] <Geth> ¦ rakudo: coke++ created pull request #5992: Split -errata akefile target into 6c/6d

[22:36] <Geth> ¦ rakudo: review: https://github.com/rakudo/rakudo/pull/5992

[22:36] <[Coke]> jdv: there's another one for your review.

[22:37] <[Coke]> splits stress-errata ake step and forces us back to master after each test. (so that when we archive, we're using the right branch)

[22:40] <[Coke]> jdv: I'll take the next release to make sure all my changes work.

[22:40] <[Coke]> (unless you want it!)

[22:44] <Geth> ¦ rakudo/coke/antiflap: ffeb426021 | (Will Coleda)++ | tools/releasable/Akefile

[22:44] <Geth> ¦ rakudo/coke/antiflap: Only check flappers 2 times.

[22:44] <Geth> ¦ rakudo/coke/antiflap: 

[22:44] <Geth> ¦ rakudo/coke/antiflap: Good enough, Fixes #5828

[22:44] <Geth> ¦ rakudo/coke/antiflap: review: https://github.com/rakudo/rakudo/commit/ffeb426021

[22:45] <Geth> ¦ rakudo: coke++ created pull request #5993: Only check flappers 2 times.

[22:45] <Geth> ¦ rakudo: review: https://github.com/rakudo/rakudo/pull/5993

[22:51] <[Coke]> releasable6: next

[22:51] <releasable6> [Coke], Release date for Rakudo 2025.10 is listed in “Planned future releases”, but it was already released.

[22:51] <releasable6> [Coke], and I oop! Backtrace: https://gist.github.com/47dc7ac18253797c36e006ecad4d6543

[22:53] <Geth> ¦ rakudo/main: 923b95fc33 | (Will Coleda)++ | docs/release_guide.pod

[22:53] <Geth> ¦ rakudo/main: note next release

[22:53] <Geth> ¦ rakudo/main: review: https://github.com/rakudo/rakudo/commit/923b95fc33

[22:53] <[Coke]> releasable6: next

[22:53] <releasable6> [Coke], Next release in ≈25 days and ≈20 hours. There are no known blockers. Changelog for this release was not started yet

[22:53] <releasable6> [Coke], Details: https://gist.github.com/7e92c74df4e21d7c7a0916918cacdc87

[22:58] <[Coke]> releasable6: next

[22:58] <releasable6> [Coke], Next release in ≈25 days and ≈20 hours. There are no known blockers. 18 out of 18 commits logged

[23:03] <[Coke]> So many commits.... oh, it's because I didn't squash one of my PRs.

