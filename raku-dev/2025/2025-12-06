[02:17] <ShimmerFairy> [Coke]: To answer your earlier question, I checked the JSON spec and it's still very much a valid JSON file, it just can't be parsed as a sequence of graphemes. (It should've caused problems a while ago, but IIRC MoarVM never handled Prepends exactly right.)

[02:18] <ShimmerFairy> Assuming my quick glance at the JSON spec is right, in order to correctly parse all possible JSON files, you should be using something like NFC (possibly Uni if you can manage to leave the text unnormalized?) to do the parsing with. Since JSON::Fast isn't using Grammars, that's hopefully not too bad a change to make.

[08:55] <ab5tract> Hmmm, this is also maybe another motivation for me to finish the work on adding a third-party JSON parser to MoarVM. Besides the speed, we can avoid some pitfalls like this\

[08:56] <ab5tract> ShimmerFairy: Nice to see you around these days btw! I went lookking for your blog a while ago but couldn't recollect the domain

[08:57] <ShimmerFairy> Thanks! Don't worry about that, I've not blogged in many many years.

[08:58] <ShimmerFairy> About the JSON thing, the issue isn't really with the JSON parser itself, rather a bigger issue with Raku that would be nice to fix someday. Namely, while NFG strings are really nice for a lot of work, they flat out aren't the right tool for every job, and right now Raku's support for codepoint-based strings is pretty terrible (about as bad as C and C++, I'd say).

[09:03] <ShimmerFairy> A related issue is that, in retrospect, we didn't really think NFG through as much as it perhaps needed to be. For example, right now Raku accepts "‡µé"" as a single double-quoted string (as it parses source code as NFG), but should it? Or is it technically OK but a security issue?

[09:27] <lizmat> from what I can see, that roundtrips...      not sure I see a security issue here?

[09:47] <ab5tract> lizmat: Fixed my patch! :D

[09:47] <ShimmerFairy> I was thinking along the lines of "confusables", like you could possibly trick someone reading source code into misinterpreting a " if it's actually part of a grapheme that gets swallowed up into a string literal.

[09:48] <ab5tract> it needed to guard against $checkee being a role group itself

[09:48] <lizmat> ab5tract++

[09:48] <ab5tract> still needs a roast run, but it's working fine with Hash::Ordered now

[09:49] <lizmat> cool!

[09:49] <ab5tract> sometimes we can have nice things ;)

[09:49] <lizmat> almost Xmas :-)

[09:52] <ab5tract> I tend to get too excited and announce news to soon

[09:53] <ab5tract> which is to say, this still needs more work :)

[09:56] <Geth> ¬¶ rakudo/main: 6b47541e27 | (Elizabeth Mattijsen)++ | src/Raku/Grammar.nqp

[09:56] <Geth> ¬¶ rakudo/main: RakuAST: make sure "constant" is localizable

[09:56] <Geth> ¬¶ rakudo/main: 

[09:56] <Geth> ¬¶ rakudo/main: Spotted by habere-et-dispertire++ in

[09:56] <Geth> ¬¶ rakudo/main:   https://github.com/Raku-L10N/L10N/issues/16

[09:56] <Geth> ¬¶ rakudo/main: review: https://github.com/rakudo/rakudo/commit/6b47541e27

[09:56] <lizmat> ab5tract: understood  :-)

[09:57] <ShimmerFairy> One thing that's on my mind now, after going through the Unicode upgrade, is idly wondering what parts of Raku are based on old, obsolete ideas from Unicode (along the lines of Windows's 16-bit wchar_t), or what would be different in a new language today.

[10:28] <ab5tract> Those are excellent questions. Have there ever been attempts to re-implement the NFG plumbing in a separate library?

[10:29] <ab5tract> It feels like NFG is mostly unknown in the outside world, which is a bit sad considering what an achievement it is

[10:30] <ab5tract> Just thinking out loud, but maybe implementing a libnfg in say, Zig, would surface some of those spots you‚Äôre pondering about

[10:44] <ShimmerFairy> Writing a library (or multiple) to let me work with strings in C++ like I can in Raku has long been an idea in the back of my head. The funny thing about NFG is that it's not that complicated an idea really, it's just a way of working with grapheme clusters without having to think about it too much.

[10:53] *** melezhik joined
[10:54] <melezhik> [Coke]: will do. I am working on improving brownie reports , once it‚Äôs settled I will probably fill few tickets

[10:55] <melezhik> Meanwhile , once you have a time please upgrade agents and run it - cc ab5tract [Coke] patrickb - thanks üôè I would like to run new rounds with improved reports data

[11:21] <ab5tract> melezhik: "wonder-thunder has entered the chat"

[11:22] <ab5tract> I wonder if running under qemu would solve my issues with capping ressources

[11:22] <melezhik> ab5tract: ++

[12:06] <melezhik> Ok, tests reports are more informative now.  I use prove6 t/ ‚Äî verbose -I lib

[12:06] <melezhik> http://brw.sparrowhub.io/file_view/job.1.report/xpqdsoygzhmcjibarvtk.65040/Trait::Traced.log

[12:06] <melezhik> To get details on failing modules

[12:15] <melezhik> Ok. This clear some details ‚ÄúZMQ error: Address already in use (code 98)‚Äù

[12:15] <melezhik> http://brw.sparrowhub.io/report/job.1.report/784

[12:15] <melezhik> Why some tests fail

[12:16] <[Coke]> melezhik: upgraded

[12:17] <melezhik> [Coke]: ++

[12:18] <melezhik> [Coke]: could please pull the latest ?

[12:18] <melezhik> 0.0.47

[12:18] <melezhik> use prove6 verbose to get full report for failed modules

[12:18] <[Coke]> so not just the "update inside the container" but start over?

[12:19] <melezhik> Ah, interesting, this should pulled it , let me see

[12:19] <melezhik> Maybe it‚Äôs just old job

[12:19] <[Coke]> send termination request as /root/.sparky/work/agent/.states/1765023402.terminate

[12:19] <[Coke]> start new agent job

[12:20] <melezhik> Ok . Looks good now

[12:20] <melezhik> Yep . This is what upgrade does

[12:20] <melezhik> heartbeat from cokebot-53585969, version: 0.0.47, max threads: 4, jobs run cnt: 0

[12:20] <melezhik> Now up update üëç

[12:34] <melezhik> ugexe: looks like zef install . --deps-only does not install test dependencies, how can install all modules dependencies without installing a module?

[12:37] <melezhik> Or maybe it does ‚Ä¶ ü§î still not sure

[12:40] <melezhik> Ok . Looks like I found yet another bug in brownie, it uses prove6 from default Raku, no good , stopping 010r

[12:40] <melezhik> Sigh

[13:02] *** melezhik_ joined
[13:16] <melezhik_> [Coke]: ab5tract: I've fixed one important bug, could you please upgrade one more time? thanks 

[13:21] *** melezhik_ left
[13:36] <[Coke]> done

[14:43] *** melezhik left
[15:17] *** melezhik joined
[15:17] <melezhik> Thanks

[16:21] *** melezhik2 joined
[16:21] <melezhik2> [Coke]: fixed yet another bug, please upgrade again , thanks )

[16:22] <melezhik2> working version should be 0.0.49,

[16:22] <melezhik2> finally I think reports format is good enough , there is enough details in failing tests

[16:25] *** melezhik2 left
[16:50] <ugexe> if you want to run tests without installing test dependencies then use --/test-depends --test

[16:58] *** Pixi left
[17:03] *** Pixi joined
[17:19] <ab5tract> melezhik: my box is going to be indisposed for a bit, so I've deactivated the agents for now

[17:20] <melezhik> ab5tract: no worries and thanks for all your help

[17:22] <[Coke]> laptop crashed, coming back online

[17:27] <melezhik> ‚Äú7:50 PM <ugexe> if you want to run tests without installing test dependencies then use --/test-depends --test‚Äù ugexe thanks . Finally I figured out that I had to run ‚Äòzef ‚Äîdeps‚Äîonly install . && zef ‚Äîverbose test .‚Äô

[17:28] <melezhik> [Coke]: ++

[18:04] *** Pixi` joined
[18:05] *** Pixi left
[18:10] *** Pixi` left
[18:19] *** Pixi joined
[18:21] *** finanalyst joined
[19:37] *** melezhik left
[21:14] <ab5tract> [Coke]: I‚Äôve had some crashes while running brownie too. Are you running with podman-compose?

[21:15] <ab5tract> Because I haven‚Äôt managed to actually get any resource constraint options to work reliably

[22:01] *** finanalyst left
[22:29] <[Coke]> ab5tract: using docker.

[22:30] <[Coke]> (host OS is mac)

