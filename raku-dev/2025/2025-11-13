[00:00] <timo> Failure is explicitly allowed through in the dispatchers.nqp line i refered to

[00:01] <japhb> timo: I missed that in the scrollback.  What line?

[00:05] <timo> 4430 in src/vm/moar/dispatchers.nqp in rakudo

[00:14] <japhb> Huh.  I wonder why that is?

[00:22] <lizmat> m: my $a := Failure.new    # because

[00:22] <camelia> rakudo-moar 7106759ed: ( no output )

[00:22] <lizmat> m: my Int $a := Failure.new    # more correct

[00:22] <camelia> rakudo-moar 7106759ed: OUTPUT: «Earlier failure:␤ Failed␤␤Final error:␤ Type check failed in binding; expected Int but got Failure (Failure.new(exceptio...)␤  in block <unit> at <tmp> line 1␤␤»

[00:22] <lizmat> hmmm

[00:23] <lizmat> m: my Int() $a := Failure.new    # more correct

[00:23] <camelia> rakudo-moar 7106759ed: ( no output )

[00:23] <lizmat> ok, I guess we haz a bug in the coercion logic

[00:30] <timo> we compile the coercing code into binding into a register, which doesn't cause type checks

[00:30] <timo> that's inside Actions.nqp, look for "raku-coerce" or something being used in a dispatch op qastnode

[01:59] *** librasteve_ left
[04:56] *** [Coke]_ joined
[04:59] *** lizmat_ joined
[05:01] *** [Coke]__ joined
[05:04] *** [Tux] left
[05:04] *** [Coke] left
[05:05] *** unicodable6 left
[05:05] *** sourceable6 left
[05:05] *** lizmat left
[05:05] *** releasable6 left
[05:05] *** [Coke]_ left
[05:05] *** committable6 left
[05:05] *** committable6 joined
[05:05] *** unicodable6 joined
[05:05] *** notable6 left
[05:05] *** quotable6 left
[05:05] *** quotable6 joined
[05:05] *** notable6 joined
[05:05] *** releasable6 joined
[05:05] *** sourceable6 joined
[05:05] *** [Tux] joined
[05:47] *** quotable6 left
[05:47] *** committable6 left
[05:47] *** bloatable6 left
[05:47] *** bloatable6 joined
[05:47] *** releasable6 left
[05:47] *** notable6 left
[05:47] *** committable6 joined
[05:47] *** notable6 joined
[05:47] *** quotable6 joined
[05:47] *** releasable6 joined
[07:00] <releasable6> Next release in ≈2 days and ≈11 hours. There are no known blockers. Please log your changes in the ChangeLog: https://github.com/rakudo/rakudo/wiki/ChangeLog-Draft

[07:37] *** melezhik joined
[09:15] *** lizmat_ left
[09:15] *** lizmat joined
[09:23] <patrickb> [Coke]__: It seems you managed to get the nqp CI working by recreating the pipeline. I have now deleted the broken one. We are done, right?

[09:35] <Geth> ¦ rakudo: patrickbkr++ created pull request #6017: Add a missing error check in runner.c

[09:35] <Geth> ¦ rakudo: review: https://github.com/rakudo/rakudo/pull/6017

[09:38] *** vrurg joined
[09:38] <ab5tract> Oh, interestingly the coercion stuff may overlap with R#9317

[09:39] <ab5tract> Sorry R#5317

[09:39] <linkable6> R#5317 [open]: https://github.com/rakudo/rakudo/issues/5317 [roles][Will be addressed in RakuAST] role-constrained variable does not accept derived role defined inline

[09:40] <ab5tract> At least the location of it

[09:41] *** vrurg_ left
[10:28] <Geth> ¦ rakudo/main: 2785bfe909 | (Patrick Böker)++ | src/runner/runner.c

[10:28] <Geth> ¦ rakudo/main: Add a missing error check in runner.c

[10:28] <Geth> ¦ rakudo/main: 

[10:28] <Geth> ¦ rakudo/main: Found by Snyk.

[10:28] <Geth> ¦ rakudo/main: review: https://github.com/rakudo/rakudo/commit/2785bfe909

[10:28] <Geth> ¦ rakudo/main: a58018a24e | (Patrick Böker)++ | src/runner/runner.c

[10:28] <Geth> ¦ rakudo/main: Explain what src/runner/runner.c is doing

[10:28] <Geth> ¦ rakudo/main: review: https://github.com/rakudo/rakudo/commit/a58018a24e

[10:28] <Geth> ¦ rakudo/main: e2c5571785 | (Patrick Böker)++ (committed using GitHub Web editor) | src/runner/runner.c

[10:28] <Geth> ¦ rakudo/main: Merge pull request #6017 from patrickbkr/fix-missing-check-in-runner

[10:29] <Geth> ¦ rakudo/main: 

[10:29] <Geth> ¦ rakudo/main: Add a missing error check in runner.c

[10:29] <Geth> ¦ rakudo/main: review: https://github.com/rakudo/rakudo/commit/e2c5571785

[11:54] *** librasteve_ joined
[12:05] <ab5tract> lizmat: do these Nqp nodes in the --target=ast output look familiar to you? https://gist.githubusercontent.com/ab5tract/222cd8534d4eeb965b0685ae290faa83/raw/1934ae9aa9928b17a483acf577da7723b3282109/gistfile1.txt

[12:13] <lizmat> i usually look at them like this:

[12:13] <lizmat> https://gist.github.com/lizmat/37e05d33f5cd9e0bdfc414170ac8d35e

[12:14] <lizmat> you mean the "Declaration::ResolvedConstant" in your gist ?

[12:39] <[Coke]__> patrickb: (done) I think so

[12:40] *** [Coke]__ is now known as [Coke]

[12:40] <[Coke]> two failures in the 2nd blin run, just cutting and pasting here, haven't diagnosed:

[12:40] <[Coke]> * [ ] [Acme::Test::Module::Zef](https://raku.land/zef:skaji/Acme::Test::Module::Zef) – Fail, Bisected: [7106759](https://github.com/rakudo/rakudo/commit/7106759ed6dbcfb45999fcdf2c36594f662f5fa6)

[12:40] <[Coke]> * [ ] [LWP::Simple](https://raku.land/zef:dwarring/LWP::Simple) – Fail, Bisected: [c1d8805](https://github.com/rakudo/rakudo/commit/c1d8805e984fbd35b430df13b3f692d5409643f0)

[12:41] <[Coke]> but both of those commits are the brand new commits. :|

[12:45] <[Coke]> ... who merged something to main?

[12:45] <[Coke]> I am VERY surprised to find 3 new commits to main since I started the followup blin run.

[12:48] <[Coke]> (yes, that one seems fine)

[12:52] <[Coke]> https://gist.github.com/coke/0a5f70703ba4fa2370923afd8de8332d - latest blin files

[12:53] <lizmat> FWIW, LWP::Simple installs without issues for me

[12:53] <lizmat> as does Acme::Test::Module::Zef

[12:54] <[Coke]> ... just added the output files from the two failures.

[12:55] <[Coke]> in the output files, acme says it can't see a META6.json file, and LWP says [LWP::Simple] Failed to get passing tests, but continuing with --force-test

[12:55] <[Coke]> but there is no instance of 'not ok' or "failed test" in that output

[12:56] <[Coke]> lizmat: thanks for double checking. It seems it's been a few releases since blin has found a *real* issue.

[12:57] <[Coke]> this run took 14 hours - I tried to overuse CPUs a bit instead of slightly underuse, and apparently the machine didn't like that. Will switch it back to using 87.5% of cores

[12:57] <[Coke]> (previous one was 12)

[13:04] <[Coke]> (ah, the limit I was at with this VM setup is that I can't easily increase the # of CPUs past 8; memory I can go up to 672G if I need

[13:05] <[Coke]> Setting up a VM with more CPUS would be a good exercise for creating an azure ARM template to run blin/setup a machine to do a release on/test raku.land, etc.

[13:05] <[Coke]> (since this one was done ad hoc). Less of a need for blin if brownie ends up working out. (will dig into that more post-release, melezhik)

[13:07] <[Coke]> There are 688 modules tested in the last run that are "alwaysfail", which we don't consider exceptional.

[13:09] <[Coke]> I'll start a list of them, and we can open tickets with the modules and/or recommend to blin/brownie that we exclude these going forward from testing.

[13:09] <lizmat> could you key them on auth ?

[13:16] <[Coke]> blin isn't tracking that, but we could look it up when generating the table.

[13:16] <[Coke]> (blin has it when testing, just not writing it out when there's a failure)

[13:17] <[Coke]> I imagine a lot of these are "found in REA" which is basically an insta-skip for me at this point.

[13:18] <[Coke]> e.g. Slang::Nogil:ver<0.09>

[13:20] *** melezhik_ joined
[13:20] <melezhik_> .

[13:28] <lizmat> yeah, that's not on raku.land

[13:28] <lizmat> rakkable: eco-provides Slang::Nogil

[13:28] <rakkable> lizmat, Running: eco-provides Slang::Nogil, please be patient!

[13:29] <rakkable> lizmat, Found 6 lines in 2 files (1 distributions):

[13:29] <rakkable> lizmat, https://gist.github.com/6d74631c74fe94c619dec45e06bcd555

[13:31] *** melezhik_ left
[13:31] *** melezhik_ joined
[13:37] <lizmat> https://github.com/tinmarino/nogil/issues/3  

[13:37] <lizmat> guess I'll fork that one of these days

[13:38] <lizmat> afk&

[13:42] *** melezhik_ left
[13:42] *** melezhik_ joined
[13:45] <melezhik> [Coke]: ++

[13:56] *** melezhik_ left
[13:56] *** melezhik_ joined
[14:05] *** melezhik_ left
[14:06] *** melezhik_ joined
[14:09] <[Coke]> If someone wants to write up some raku, could use a script to take that data.json, parse it, find anything that isn't "OK", make a markdown table with name, version, source-url, status, space for comments, space for a ticket link if we have one open in the module about the failure. if the source-url is in REA, the comment can be something like "REA: skip" (or maybe have an ecosystem column) - will have 

[14:09] <[Coke]> to likely run 'zef info' on the each row that isn't OK.

[14:15] <[Coke]> (if someone picks up that task, tell me so I don't duplicate effort when I swing back around to it. :)

[14:15] <[Coke]> also I have about 15 lines of code thrown at it so far if someone wants those

[14:17] *** melezhik_ left
[14:17] *** melezhik_ joined
[14:24] *** melezhik_ left
[14:24] *** melezhik_ joined
[14:31] *** melezhik_ left
[14:31] *** melezhik_ joined
[14:38] *** melezhik_ left
[14:38] *** melezhik_ joined
[14:48] *** melezhik_ left
[14:48] *** melezhik_ joined
[14:55] *** melezhik_ left
[14:55] *** melezhik_ joined
[15:02] *** melezhik_ left
[15:02] *** melezhik_ joined
[15:04] *** melezhik_ left
[15:04] *** melezhik_ joined
[15:13] *** melezhik_ left
[15:13] *** melezhik_ joined
[15:20] *** melezhik_ left
[15:20] *** melezhik_ joined
[15:26] <[Coke]> I have a volunteer thing early saturday morning, so I will probably start the release Friday night and finish closer to noon (Eastern US) saturday

[15:32] *** melezhik_ left
[15:32] *** melezhik_ joined
[15:39] *** melezhik_ left
[15:39] *** melezhik_ joined
[15:45] <Geth> ¦ rakudo/main: 5438dea2fa | (Patrick Böker)++ | 4 files

[15:45] <Geth> ¦ rakudo/main: Win: Tell users they might need to do a reboot post install

[15:45] <Geth> ¦ rakudo/main: review: https://github.com/rakudo/rakudo/commit/5438dea2fa

[15:45] <Geth> ¦ rakudo/main: 5ddbdb9855 | (Patrick Böker)++ | 11 files

[15:45] <Geth> ¦ rakudo/main: Improve the Windows first time experience

[15:45] <Geth> ¦ rakudo/main: 

[15:45] <Geth> ¦ rakudo/main: - Reword the READMEs

[15:45] <Geth> ¦ rakudo/main: - Improve the `set-env` scripts to also change the shell to UTF-8

[15:45] <Geth> ¦ rakudo/main: - Explain the Windows unicode mess in the README

[15:45] <Geth> ¦ rakudo/main: - Update the BuildTools installer wizard to the latest BuildTools version

[15:45] <Geth> ¦ rakudo/main:   and make it fully automated

[15:45] <Geth> ¦ rakudo/main: review: https://github.com/rakudo/rakudo/commit/5ddbdb9855

[15:45] <Geth> ¦ rakudo/main: 3d21d069d7 | (Geoffrey Broadwell)++ (committed using GitHub Web editor) | 11 files

[15:45] <Geth> ¦ rakudo/main: Merge pull request #6016 from patrickbkr/install-improvements

[15:45] <Geth> ¦ rakudo/main: 

[15:46] <Geth> ¦ rakudo/main: Install improvements

[15:46] <Geth> ¦ rakudo/main: review: https://github.com/rakudo/rakudo/commit/3d21d069d7

[15:47] *** melezhik left
[15:49] <[Coke]> HEY

[15:49] <[Coke]> PLEASE STOP MERGING THINGS TO MAIN

[15:49] <[Coke]> WITHOUT CHECKIING WITH THE RELEASE MANAGER

[15:49] <[Coke]> THIS CLOSE TO A RELEASE

[15:52] <japhb> [Coke]: Very sorry!

[15:52] <[Coke]> At least it wasn't the same person who did it twice. :|

[15:53] <[Coke]> If we can show that this is likely safe, we can leave it in, but it seems like it's changing things that are hard to test.

[15:53] <japhb> Nah, that was pure screwup on my part.  Had gotten so used to reviewing PRs in other repos, my brain didn't click that I should stay hands off of this one

[15:53] <japhb> It's trying to give a better install experience for Windows folk.

[15:54] <japhb> I had done a first-timer UX walkthrough with a friend, and discovered that the Windows experience can be confuzzling

[15:54] <japhb> So patrickb++ and I had been working through making that better.

[15:54] <[Coke]> OK. seems like a nice thing to try to include in a release. Was this tested by someone other than the author?

[15:55] <japhb> Not that I know of; I don't have a Windows build env.

[15:55] <japhb> patrickb: Could you create a test MSI for my friend to try?

[15:56] <[Coke]> (and if you do, do so off main. :)

[15:56] <japhb> Heh

[16:00] *** melezhik_ left
[16:00] *** melezhik_ joined
[16:07] *** melezhik_ left
[16:07] *** melezhik_ joined
[16:09] *** melezhik joined
[16:19] *** melezhik_ left
[16:19] *** melezhik_ joined
[16:22] <patrickb> japhb: Can send you an MSI this evening.

[16:23] <patrickb> [Coke]: Those changes will break the binary release pipeline should they be flawed. So the source release will be unaffected and the issue will show up on my end after the release.

[16:23] <patrickb> Fixing those are possible to do without point releases.

[16:23] <patrickb> Ugly, but possible.

[16:28] *** melezhik_ left
[16:28] *** melezhik_ joined
[16:32] <japhb> patrickb: Great, thank you

[16:37] *** melezhik_ left
[16:37] *** melezhik_ joined
[16:51] *** melezhik_ left
[16:51] *** melezhik_ joined
[16:58] *** melezhik_ left
[16:58] *** melezhik_ joined
[17:10] *** melezhik_ left
[17:10] *** melezhik_ joined
[17:13] <[Coke]> patrickb: sounds good. Thanks for the clarification

[17:19] *** melezhik_ left
[17:19] <[Coke]> can I get feedback on https://github.com/rakudo/rakudo/pulls?q=is%3Apr+is%3Aopen+label%3ARELENG ?

[17:19] *** melezhik_ joined
[17:20] <[Coke]> FYI, someone who I thought was blocked from interacting with our repositories reacted to the first comment on #6000

[17:22] <lizmat> [Coke]: reviewed

[17:23] <Geth> ¦ rakudo/main: f612611165 | (Will Coleda)++ | tools/create-release-announcement.raku

[17:23] <Geth> ¦ rakudo/main: Remove mention of JVM in release announcement

[17:23] <Geth> ¦ rakudo/main: 

[17:23] <Geth> ¦ rakudo/main: We can make a big announcement when it returns

[17:23] <Geth> ¦ rakudo/main: review: https://github.com/rakudo/rakudo/commit/f612611165

[17:23] <Geth> ¦ rakudo/main: 0949e869a4 | (Will Coleda)++ (committed using GitHub Web editor) | tools/create-release-announcement.raku

[17:23] <Geth> ¦ rakudo/main: Merge pull request #6000 from rakudo/coke/quiet

[17:23] <Geth> ¦ rakudo/main: 

[17:23] <Geth> ¦ rakudo/main: Remove mention of JVM in release announcement

[17:23] <Geth> ¦ rakudo/main: review: https://github.com/rakudo/rakudo/commit/0949e869a4

[17:23] <Geth> ¦ rakudo/main: bb515e4a1a | (Will Coleda)++ | tools/create-release-announcement.raku

[17:23] <Geth> ¦ rakudo/main: Minor cleanups to release announcement

[17:23] <Geth> ¦ rakudo/main: 

[17:23] <Geth> ¦ rakudo/main: Mention the discord, don't repeat ourselves.

[17:23] <Geth> ¦ rakudo/main: review: https://github.com/rakudo/rakudo/commit/bb515e4a1a

[17:23] <Geth> ¦ rakudo/main: 6fe6c5f0c6 | (Will Coleda)++ | tools/create-release-announcement.raku

[17:23] <Geth> ¦ rakudo/main: whitespace

[17:23] <Geth> ¦ rakudo/main: review: https://github.com/rakudo/rakudo/commit/6fe6c5f0c6

[17:23] <Geth> ¦ rakudo/main: 40b4e11b53 | (Will Coleda)++ (committed using GitHub Web editor) | tools/create-release-announcement.raku

[17:23] <Geth> ¦ rakudo/main: Merge pull request #5983 from rakudo/coke/release

[17:23] <[Coke]> lizmat++

[17:23] <Geth> ¦ rakudo/main: 

[17:23] <Geth> ¦ rakudo/main: Minor cleanups to release announcement

[17:23] <Geth> ¦ rakudo/main: review: https://github.com/rakudo/rakudo/commit/40b4e11b53

[17:31] *** melezhik_ left
[17:31] *** melezhik_ joined
[17:38] *** melezhik_ left
[17:38] *** melezhik_ joined
[17:43] *** coleman_ joined
[17:45] *** melezhik_ left
[17:45] *** melezhik_ joined
[17:50] *** coleman left
[17:50] *** coleman_ is now known as coleman

[17:57] *** melezhik_ left
[17:57] *** melezhik_ joined
[18:04] *** melezhik_ left
[18:04] *** melezhik_ joined
[18:11] *** melezhik_ left
[18:11] *** melezhik_ joined
[18:18] *** melezhik_ left
[18:18] *** melezhik_ joined
[18:25] *** melezhik_ left
[18:25] *** melezhik_ joined
[18:36] <lizmat> A working https://raku.land/zef:lizmat/Slang::Nogil has hit the ecosystem

[18:36] <melezhik_> .

[19:22] <[Coke]> ... that was not what I was trying to do. :)

[19:23] <[Coke]> but that does hide the dead one as far as blin is concerned, so lizmat++ for that part too

[19:23] <lizmat> yeah, thought there was at least that upside

[19:24] <lizmat> also: it turns out that the grammar has improved in such a way since the original Slang::Sigil was released, that creating a new one was basically a cat license from https://raku.land/zef:lizmat/Slang::Emoji

[19:27] *** librasteve_ left
[19:29] *** melezhik_ left
[19:30] *** melezhik_ joined
[20:26] *** melezhik_ left
[20:26] *** melezhik_ joined
[20:43] <[Coke]> Lovely, since I authored the foundation name change, the URL has stopped working.

[20:45] <[Coke]> ... or maybe I tested the wrong one. wtf. 

[20:46] <lizmat> ah...

[20:47] <lizmat> perhaps I can make a raku.foundation URL do the correct redirect for now?

[20:47] <[Coke]> I have one that works. It's rakufoundation.org/donate, not donate.rakufoundation.org

[20:48] <[Coke]> (that takes you TPF's site as I originally intended)

[20:48] <lizmat> ok, then I don't have to do anything now  :)

[20:51] <[Coke]> Just frustrated at myself

[21:23] *** melezhik_ left
[22:02] <Geth> ¦ rakudo: patrickbkr++ created pull request #6018: Fix a strange char in build-msi.ps1

[22:02] <Geth> ¦ rakudo: review: https://github.com/rakudo/rakudo/pull/6018

[22:04] <patrickb> [Coke] I'd like to merge the above before the release. (there's a Unicode dash in a Powershell script) It's a one char cleanup. It seems to have worked like that before, but I wonder how. OK?

[22:14] <[Coke]> yup!

[22:14] <[Coke]> already app. the pr

[22:23] <[Coke]> apologies for the all caps before. :(

[22:27] *** melezhik left
[22:39] <Geth> ¦ rakudo/main: 221cf2c899 | (Patrick Böker)++ | tools/build/binary-release/msi/build-msi.ps1

[22:39] <Geth> ¦ rakudo/main: Fix a strange char in build-msi.ps1

[22:39] <Geth> ¦ rakudo/main: 

[22:39] <Geth> ¦ rakudo/main: No idea how this managed to work on the CI in the past

[22:39] <Geth> ¦ rakudo/main: review: https://github.com/rakudo/rakudo/commit/221cf2c899

[22:39] <Geth> ¦ rakudo/main: ac97ef2089 | (Patrick Böker)++ (committed using GitHub Web editor) | tools/build/binary-release/msi/build-msi.ps1

[22:39] <Geth> ¦ rakudo/main: Merge pull request #6018 from patrickbkr/fix-build-msi-ps1

[22:39] <Geth> ¦ rakudo/main: 

[22:39] <Geth> ¦ rakudo/main: Fix a strange char in build-msi.ps1

[22:39] <Geth> ¦ rakudo/main: review: https://github.com/rakudo/rakudo/commit/ac97ef2089

