[00:06] *** melezhik_ joined
[00:08] *** melezhik_ left
[00:39] *** melezhik_ joined
[00:41] *** melezhik_ left
[01:07] *** melezhik_ joined
[01:10] *** melezhik_ left
[01:46] <[Coke]> bad module might be "Russian", it's up to 88G virtual

[01:47] <[Coke]> running t/01-basic.t

[01:48] <[Coke]> also wondering why it isn't using L10N

[01:48] *** melezhik_ joined
[01:50] *** melezhik_ left
[01:51] <[Coke]> seems to also hang and start chewing memory locally too.

[01:53] <Geth> ¬¶ Blin: 178e61fcbd | (Will Coleda)++ | bin/blin.p6

[01:53] <Geth> ¬¶ Blin: Avoid testing Russian

[01:53] <Geth> ¬¶ Blin: review: https://github.com/Raku/Blin/commit/178e61fcbd

[01:54] <[Coke]> only happened to notice because I have htop running on that box and I wasn't afk. :)

[02:09] *** melezhik_ joined
[02:11] *** melezhik_ left
[02:28] <ugexe> That‚Äôs one of the AI generated modules from that person who was submitted a bunch 

[03:01] <ugexe> and ye olde `use lib` in tests

[03:10] *** melezhik_ joined
[03:12] *** melezhik_ left
[04:11] *** melezhik_ joined
[04:13] *** melezhik_ left
[04:50] *** melezhik_ joined
[04:59] *** melezhik_ left
[04:59] *** melezhik_ joined
[05:05] *** melezhik_ left
[05:06] *** melezhik_ joined
[05:17] *** melezhik_ left
[05:17] *** melezhik_ joined
[05:29] *** melezhik_ left
[05:29] *** melezhik_ joined
[05:35] *** melezhik_ left
[05:35] *** melezhik_ joined
[05:41] *** melezhik_ left
[05:41] *** melezhik_ joined
[05:47] *** melezhik_ left
[06:08] *** melezhik_ joined
[06:13] *** melezhik_ left
[06:13] *** melezhik_ joined
[06:15] *** evalable6 left
[06:18] *** melezhik_ left
[06:18] *** melezhik_ joined
[06:26] *** melezhik_ left
[06:56] *** Pixi left
[07:01] *** Pixi joined
[07:41] *** melezhik_ joined
[07:47] *** melezhik_ left
[07:47] *** melezhik_ joined
[07:52] <melezhik_> .

[07:52] <tellable6> 2025-11-11T20:47:41Z #raku-dev <ab5tract> melezhik_: I think it would be worth it. Usually when I want to run a blin, it's before a PR merge

[07:53] <melezhik_> I hit a weird bug when running zef on my container

[07:53] <melezhik_> whatever I try to install ( say `zef install Kind` ) I get "Must specify a non-empty string" as a path error

[07:54] <melezhik_> I tried to grep this message in zef source code and did not find anything

[07:54] <melezhik_> .tell ab5tract: yeah, this is almost done, will let you know, so you will be able to run brownie against Rakudo installed from PR's commits

[07:54] <tellable6> melezhik_, I'll pass your message to ab5tract

[07:56] *** melezhik_ left
[07:56] *** melezhik_ joined
[08:08] <ab5tract> melezhik_: let's make sure to use Blin's exclusion list

[08:08] <tellable6> 2025-11-12T07:54:56Z #raku-dev <melezhik_> ab5tract: yeah, this is almost done, will let you know, so you will be able to run brownie against Rakudo installed from PR's commits

[08:09] <ab5tract> [Coke]: any particular reason why you are using blin on a paid VM when you can use my (and your) cores with brownie for free? :)

[08:17] <ab5tract> (my guess is that it's because brownie isn't quite finished, which is of course perfectly fine)

[08:22] <melezhik_> found. the issue `ZEF_INSTALL_TO=` was set to none

[08:23] <melezhik_> it'd be cool to reference this var in the error message or at least to give some sort of hint 

[08:23] <melezhik_> it took me while to figure this our 

[08:23] <melezhik_> out

[08:30] *** melezhik_ left
[08:30] *** melezhik_ joined
[08:35] *** melezhik_ left
[08:35] *** melezhik_ joined
[08:49] <melezhik_> ab5tract: compile from PR's commit is ready, now we can test your commit 

[08:49] <melezhik_> https://pasteboard.co/N36fJOlEzTjt.jpg

[08:49] <melezhik_> I just run 100 modules

[08:49] <Geth> ¬¶ rakudo: ab5tract self-assigned role-constrained variable does not accept derived role defined inline https://github.com/rakudo/rakudo/issues/5317

[08:49] <melezhik_> if you want to add your agent please result from the latest commit

[08:52] <melezhik_> result -> rebuild 

[08:58] <ab5tract> melezhik_: got it. firing up the agent now

[08:58] <ab5tract> well, technically an agent is already running

[08:58] <ab5tract> let me rebuild and restart

[08:59] <melezhik_> sure

[09:00] <melezhik_> and by the way when installing rakudo from source code commit, we are free to run agents on ANY arch

[09:00] <melezhik_> we are not limited to x86_64

[09:10] *** melezhik_ left
[09:10] *** melezhik_ joined
[09:10] <melezhik_> ping from agent: secret-agent-60471428, version: 0.0.14, jobs-run-cnt: 2, max-threads: 4

[09:10] <melezhik_> ab5tract: did you limit to 4 threads now?

[09:11] <melezhik_> use all 4 cores right now anyway - ping from agent: secret-agent-60471428, version: 0.0.14, jobs-run-cnt: 4, max-threads: 4

[09:12] <ab5tract> huh, max should be 7

[09:13] <ab5tract> wait, no, I see that I set the default to 4

[09:13] <ab5tract> in the compose file generator

[09:14] <melezhik_> yep,

[09:14] <ab5tract> BRW_AGENT_MAX_THREADS is the envvar, right?

[09:15] <melezhik_> yes

[09:15] <ab5tract> okay somehow the generator isn't even setting that right now. I guess I've been patching it manually

[09:16] <ab5tract> anyway, let's see how this run does and I can fix it later

[09:18] <melezhik_> yeah, I also run my agent on laptop , in 7 threads

[09:18] <melezhik_> and btw I added skip list from blin

[09:19] <melezhik_> https://github.com/melezhik/brownie/blob/main/orchestrator/config.raku

[09:33] *** melezhik_ left
[09:35] *** melezhik_ joined
[09:38] *** melezhik_ left
[09:42] *** melezhik_ joined
[09:52] *** melezhik_ left
[10:18] *** melezhik_ joined
[10:25] <melezhik_> ab5tract: looks like your agent has got wrong Raku env, can you please result agent from the latest commit and run it again? Thanks. I added debug info

[10:30] *** melezhik_ left
[11:00] <releasable6> Next release in ‚âà3 days and ‚âà7 hours. There are no known blockers. Please log your changes in the ChangeLog: https://github.com/rakudo/rakudo/wiki/ChangeLog-Draft

[12:28] *** melezhik_ joined
[12:30] *** melezhik_ left
[12:43] <Geth> ¬¶ rakudo/main: c1d8805e98 | (Elizabeth Mattijsen)++ | 2 files

[12:43] <Geth> ¬¶ rakudo/main: RakuAST: don't allow :{ } if it's a block

[12:43] <Geth> ¬¶ rakudo/main: 

[12:43] <Geth> ¬¶ rakudo/main: Addresses https://github.com/rakudo/rakudo/issues/1559 in RakuAST.

[12:43] <Geth> ¬¶ rakudo/main: 

[12:43] <Geth> ¬¶ rakudo/main: This removes the RakuAST::Block.block-or-hash method, and re-instates

[12:43] <Geth> ¬¶ rakudo/main: that as a "block-or-hash" sub in the Actions (where it should have

[12:43] <Geth> ¬¶ rakudo/main: been in the first place, as this has nothing to do with artificially

[12:43] <Geth> ¬¶ rakudo/main: <‚Ä¶commit message has 5 more lines‚Ä¶>

[12:43] <Geth> ¬¶ rakudo/main: review: https://github.com/rakudo/rakudo/commit/c1d8805e98

[12:45] *** finanalyst joined
[12:53] <[Coke]> Well, not done yet, but it's at 95% (blin)

[12:54] <[Coke]> brownie isn't proven out, ab5tract 

[12:55] <[Coke]> and trying to get it just right days before a release isn't a good use of my stress. I'll pay the 15-20 bucks, no worries.

[12:55] <ab5tract> Sure man, I was trying to be playful but also to gauge what‚Äôs missing for you

[12:56] <ab5tract> Definitely not worth any stress

[12:57] <[Coke]> Perhaps I should make a cup of caffeine before trying to read irc. :)

[12:58] <ab5tract> :)

[13:15] *** melezhik_ joined
[13:17] <melezhik_> .

[13:22] *** melezhik_ left
[13:35] <[Coke]> ‚è≥ 2343 out of 2385 modules processed (98.23%)

[13:41] *** finanalyst left
[13:44] *** melezhik joined
[13:46] <melezhik> ab5tract: can you please update agent from the last commit and run it? Thanks . I try to debug Raku env related issues

[13:48] * [Coke] opens https://github.com/raku-multilingual/raku-russian/issues/1

[13:51] <Geth> ¬¶ rakudo/main: dd78e653d5 | (Elizabeth Mattijsen)++ | src/Raku/Actions.nqp

[13:51] <Geth> ¬¶ rakudo/main: RakuAST: don't allow &( ) contextualizer

[13:51] <Geth> ¬¶ rakudo/main: 

[13:51] <Geth> ¬¶ rakudo/main: Before, it would treat it as $( ), which is wrong.

[13:51] <Geth> ¬¶ rakudo/main: review: https://github.com/rakudo/rakudo/commit/dd78e653d5

[14:14] <Geth> ¬¶ rakudo/main: 0121b33861 | (Elizabeth Mattijsen)++ | src/Raku/Grammar.nqp

[14:14] <Geth> ¬¶ rakudo/main: RakuAST: recognized =numtable as a type of =table

[14:14] <Geth> ¬¶ rakudo/main: 

[14:14] <Geth> ¬¶ rakudo/main: Also, rename $*IN_TABLE to the more appropriate $*IN-TABLE.

[14:14] <Geth> ¬¶ rakudo/main: 

[14:14] <Geth> ¬¶ rakudo/main: Fixes #6015

[14:14] <Geth> ¬¶ rakudo/main: review: https://github.com/rakudo/rakudo/commit/0121b33861

[14:18] <lizmat> [Coke]: that concludes my work on core before the next release

[14:27] <ugexe> melezhik: if you want more info on a *rakudo* error you can use --ll-exception

[14:27] <ugexe> m: say "".IO

[14:27] <camelia> rakudo-moar dd78e653d: OUTPUT: ¬´Must specify a non-empty string as a path‚ê§  in block <unit> at <tmp> line 1‚ê§‚ê§¬ª

[14:28] <ugexe> i mean i guess that works for any error, but none-the-less you are talking about a rakudo error

[14:29] <[Coke]> Blin: Service runtime: 12h 1min 29.999s Memory peak: 49.1G

[14:32] <melezhik> Ok, can zef convert such an error into more human readable format, by adding helpful message , hint?

[14:33] <ugexe> it is human readable. rakudo explicitly tries to make its error human readable

[14:36] <ugexe> m: sub MAIN(IO() $foo where *.chars) { }; @*ARGS = ""

[14:36] <camelia> rakudo-moar 0121b3386: OUTPUT: ¬´Must specify a non-empty string as a path‚ê§  in block <unit> at <tmp> line 1‚ê§‚ê§¬ª

[14:37] <melezhik> For example if zef check the value of ZEF_INSTALL_TO env var and then warn something ‚Äúit should none empty if set‚Äù ..,  and yes sorry imho I don‚Äôt find the error helpful ( human readable in that sense )

[14:38] <ugexe> that doesn't really fit with the design of MAIN validation

[14:39] <ugexe> m: BEGIN %*ENV<ZEF_INSTALL_TO> = ""; sub MAIN(IO() $foo = %*ENV<ZEF_INSTALL_TO>) { }()

[14:39] <camelia> rakudo-moar 0121b3386: OUTPUT: ¬´Must specify a non-empty string as a path‚ê§  in sub MAIN at <tmp> line 1‚ê§  in block <unit> at <tmp> line 1‚ê§‚ê§¬ª

[14:40] <ugexe> pre-validating the data before using it as values in main parameters is redundant

[14:41] <ugexe> imo MAIN should mention more information about the error, something like `Must specify a non-empty string as a path for argument --foo`

[14:41] <melezhik> ‚Äú5:39 PM <ugexe> m: BEGIN %*ENV<ZEF_INSTALL_TO> = ""; sub MAIN(IO() $foo = %*ENV<ZEF_INSTALL_TO>) { }()‚Äù this exactly what I am saying what if ZEF_INSTALL_TO gets sanitized / verified before passing to main ?

[14:41] <ugexe> i dont want to sanitize/verify all of those values. that is why i use MAIN with types in the first place

[14:42] <ugexe> if the error coming out of main isn't satisfactory then there is probably improvements to be made in rakudo over its MAIN error messages

[14:42] <timo> does "will complain" help here?

[14:42] <timo> or is this more about changing rakudo's default / builtin behaviour?

[14:43] <ugexe> m: sub MAIN(IO() $foo) {}; @*ARGS = ""

[14:43] <camelia> rakudo-moar 0121b3386: OUTPUT: ¬´Must specify a non-empty string as a path‚ê§  in sub MAIN at <tmp> line 1‚ê§  in block <unit> at <tmp> line 1‚ê§‚ê§¬ª

[14:43] <ugexe> its a rakudo issue

[14:44] <timo> m: my IO() $foo = "";

[14:44] <camelia> rakudo-moar 0121b3386: OUTPUT: ¬´Must specify a non-empty string as a path‚ê§  in block <unit> at <tmp> line 1‚ê§‚ê§¬ª

[14:44] <melezhik> ‚Äú5:41 PM <ugexe> imo MAIN should mention more information about the error, something like `Must specify a non-empty string as a path for argument --foo`‚Äù from end user point of view it literally took me halve an hour to realized it was the incorrect value of env var, nothing in the message said that, stack trace would be helpful ad well but there were no stack trace ,   error message also is not greppable in zef source 

[14:44] <melezhik> code, so no hints nor clues

[14:44] <ugexe> i told you to use --ll-exception for a trace

[14:46] <[Coke]> ] [Cro::FCGI ‚Äì Fail, Bisected: 6a9e284

[14:46] <[Coke]> except that bisect is me merging the release branch last time.

[14:46] <[Coke]> so, clean blin run?

[14:47] <[Coke]> https://gist.github.com/coke/0a5f70703ba4fa2370923afd8de8332d

[14:57] <ugexe> m: sub MAIN(Int $foo) {}; @*ARGS = ""

[14:57] <camelia> rakudo-moar 0121b3386: ( no output )

[14:57] <ugexe> m: sub MAIN(Int $foo) { say $foo.raku }; @*ARGS = ""

[14:57] <camelia> rakudo-moar 0121b3386: OUTPUT: ¬´IntStr.new(0, "")‚ê§¬ª

[14:57] <ugexe> that doesn't seem right either

[14:57] <timo> interesting

[15:00] <lizmat> my %*SUB-MAIN-OPTS =  :coerce-allomorphs-to(Int)       # perhaps ?

[15:00] <[Coke]> whoops, not the release branch, but a branch about releng stuff only.

[15:00] <ugexe> i dont see why any option should be needed

[15:00] <lizmat> m: dd Int ~~ IntStr

[15:00] <camelia> rakudo-moar 0121b3386: OUTPUT: ¬´Bool::False‚ê§¬ª

[15:00] <lizmat> m: dd IntStr ~~ Int

[15:00] <camelia> rakudo-moar 0121b3386: OUTPUT: ¬´Bool::True‚ê§¬ª

[15:00] <lizmat> m: dd Int.ACCEPTS(IntStr)

[15:00] <camelia> rakudo-moar 0121b3386: OUTPUT: ¬´Bool::True‚ê§¬ª

[15:01] <lizmat> that's what the binder does, and since it is acceptable, you wind up with an IntStr in $foo

[15:01] <ugexe> "" is not an Int, that is wrong

[15:01] <lizmat> aah... ok, misread

[15:02] <lizmat> na, I think that's right

[15:02] <lizmat> m: dd "".Int

[15:02] <camelia> rakudo-moar 0121b3386: OUTPUT: ¬´0‚ê§¬ª

[15:03] <ugexe> that also seems wrong

[15:03] <ugexe> like crazy wrong

[15:04] <lizmat> m: dd infix:<+>("")

[15:04] <camelia> rakudo-moar 0121b3386: OUTPUT: ¬´0‚ê§¬ª

[15:04] *** melezhik_ joined
[15:04] <lizmat> m: dd prefix:<+>("")

[15:04] <camelia> rakudo-moar 0121b3386: OUTPUT: ¬´0‚ê§¬ª

[15:05] <lizmat> m: dd +""

[15:05] <camelia> rakudo-moar 0121b3386: OUTPUT: ¬´0‚ê§¬ª

[15:05] <ugexe> ouch, that is really a bad look for us

[15:06] <Geth> ¬¶ nqp/main: 335b29197c | (Will Coleda)++ | tools/templates/MOAR_REVISION

[15:06] <Geth> ¬¶ nqp/main: Grab last MoarVM commits before release

[15:06] <Geth> ¬¶ nqp/main: review: https://github.com/Raku/nqp/commit/335b29197c

[15:07] <ugexe> m: dd "      ".Int

[15:07] <camelia> rakudo-moar 0121b3386: OUTPUT: ¬´0‚ê§¬ª

[15:07] <ugexe> insane

[15:08] <Geth> ¬¶ rakudo/main: 7106759ed6 | (Will Coleda)++ | tools/templates/NQP_REVISION

[15:08] <Geth> ¬¶ rakudo/main: Pull in last NQP/MoarVM pre-release

[15:08] <Geth> ¬¶ rakudo/main: review: https://github.com/rakudo/rakudo/commit/7106759ed6

[15:08] <[Coke]> c: 7106759ed 1.put

[15:08] <committable6> [Coke], ¬¶7106759: ¬´Cannot find this revision (did you mean ‚Äú7e106c5‚Äù?)¬ª

[15:08] <[Coke]> lizmat, I just bumped moarvm/nqp

[15:09] *** melezhik_ left
[15:15] <[Coke]> We are probably fine with the one blin run, but I am going to kick off another with those few minor changes.

[15:18] <[Coke]> This is an informational run. A problem occurred reaching Could not get the latest source version for repository Raku/nqp hosted on https, which prevents Azure Pipelines from determining if the pipeline should run. If you expected this pipeline to run, please try again later. Could not get the latest source version for repository Raku/nqp hosted on https error: //github.com/ using ref 

[15:18] <[Coke]> 335b29197c3112f618d54aac4a1ba64030049e6c. GitHub reported the error, "Not Found"

[15:19] <[Coke]> patrickb ^^

[15:20] *** melezhik_ joined
[15:24] *** melezhik_ left
[15:25] *** melezhik_ joined
[15:27] <melezhik_> .

[15:30] <melezhik_> nick - I asked not how to debug the issue, but how to improve the error message , which may spare other who encounter the error for the first time from ( time consuming ) debugging 

[15:31] <melezhik_> I this could be improved on zef side, that'd be awesome 

[15:33] <ugexe> it would be awesome to fix it in rakudo

[15:34] <ugexe> fixing it in zef is working around an issue, that isn't really awesome thats unfortunate

[15:34] <ab5tract> uff, that MAIN code is not the easiest code path to perform surgery on

[15:35] <ab5tract> otoh, maybe it would could be reasonably improved by migrating logic to RakuAST

[15:36] <timo> is there any guidance on whether coercer methods are meant to throw exceptions or return Failure objects?

[15:37] <ab5tract> timo: good question. now you have me wondering whether core is even aligned to one or the other 

[15:38] <timo> m: say "whoa".Int.raku

[15:38] <camelia> rakudo-moar 7106759ed: OUTPUT: ¬´Failure.new(exception => X::Str::Numeric.new(source => "whoa", pos => 0, reason => "base-10 number must begin with valid digits or '.'"), backtrace => Backtrace.new)‚ê§¬ª

[15:38] <timo> m: say "whoa".Num.raku; say "whoa".Complex.raku; say "test".Hash.raku

[15:38] <camelia> rakudo-moar 7106759ed: OUTPUT: ¬´Failure.new(exception => X::Str::Numeric.new(source => "whoa", pos => 0, reason => "base-10 number must begin with valid digits or '.'"), backtrace => Backtrace.new)‚ê§Odd number of elements found where hash initializer expected:‚ê§Only saw: "test"‚ê§‚Ä¶¬ª

[15:39] <timo> so the .Hash method does die

[15:43] <ab5tract> feels like failures are the "right" choice

[15:43] <ab5tract> but that's just a gut feeling on my part

[15:45] <ugexe> for this specific instance in zef i think we can just change `%*ENV<ZEF_INSTALL_TO> // $CONFIG<DefaultCUR>` to `%*ENV<ZEF_INSTALL_TO> // $CONFIG<DefaultCUR>`

[15:46] <ugexe> er, to `%*ENV<ZEF_INSTALL_TO> || $CONFIG<DefaultCUR>`

[15:47] <ugexe> there would be no error, but it'd do what you probably expect

[15:48] <ab5tract> ugexe: I was picturing that this was the case

[15:49] <ab5tract> I think this might be the more correct way of handling environment variables

[15:50] <ab5tract> as setting a env var to "null" is relatively common practice 

[15:50] <timo> m: sub MAIN(Int() $foo) { }; MAIN("test")

[15:50] <camelia> rakudo-moar 7106759ed: OUTPUT: ¬´Usage:‚ê§  <tmp> <foo>‚ê§¬ª

[15:51] <timo> ah, right

[15:51] <timo> m: sub MAIN(Int() $foo) { }; @*ARGS = "test"

[15:51] <camelia> rakudo-moar 7106759ed: ( no output )

[15:51] <timo> m: sub MAIN(Int() $foo) { say $foo.raku }; @*ARGS = "test"

[15:51] <camelia> rakudo-moar 7106759ed: OUTPUT: ¬´Failure.new(exception => X::Str::Numeric.new(source => "test", pos => 0, reason => "base-10 number must begin with valid digits or '.'"), backtrace => Backtrace.new)‚ê§¬ª

[15:51] <timo> hm.

[15:54] <ab5tract> oh, interesting

[15:55] <ab5tract> so maybe the answer is to fatalize?

[15:55] <timo> so, presumably, you'd use the value soon, so the failure would be thrown and you will get a traceback into the sub that was chosen and the place where the value is attempted to be used

[15:56] <timo> m: multi sub MAIN(Int() $foo) { say "foo was int-coerced"; say $foo.raku }; multi sub MAIN($bar) { say "argument matched nothing" };  @*ARGS = "test"

[15:56] <camelia> rakudo-moar 7106759ed: OUTPUT: ¬´Ambiguous call to 'MAIN(Str)'; these signatures all match:‚ê§  (Int(Any) $foo) from <tmp> line 1‚ê§  ($bar) from <tmp> line 1‚ê§  in block <unit> at <tmp> line 1‚ê§‚ê§¬ª

[15:58] <ugexe> yeah that isn't great. like if I were reading docs for a language and saw "If you use coercing make sure you use the parameter asap to explode any failure" it probably would make me think twice about using it at all

[15:58] <ugexe> code gets moved around after the fact, often years later and by other people

[16:03] *** melezhik_ left
[16:03] *** melezhik_ joined
[16:10] *** melezhik_ left
[16:10] *** melezhik_ joined
[16:13] <ab5tract> maybe death is indeed preferable to this

[16:14] <timo> i seem to be holding the "handle" op wrong ...

[16:14] <ab5tract> the handles trait-y thing?

[16:15] <timo> nah, QAST::Op.new( :op('handle'), [...] ) is how we handle exceptions in qast land

[16:16] <timo> i'm trying to catch the "die" from IO::Path's constructor

[16:17] <ab5tract> ugexe: I expect that any overall software design will evolve more robustly (edge cases accounted for in multi sigs, type-dependent code paths, etc) if coercion fatals are fatal

[16:18] <ugexe> agreed

[16:18] <ab5tract> maybe it's worth a problem solving ticket?

[16:18] <ab5tract> "fatals are fatal" <-- a casualty of misspeech

[16:22] <lizmat> m: dd "".Int   # I think that logic falls out of "".Bool  (which is False), and False.Int  being 0   ugexe ab5tract 

[16:22] <camelia> rakudo-moar 7106759ed: OUTPUT: ¬´0‚ê§¬ª

[16:22] <lizmat> m: dd "    ".Int   # I would expect to fail

[16:22] <camelia> rakudo-moar 7106759ed: OUTPUT: ¬´0‚ê§¬ª

[16:23] <lizmat> he

[16:23] <lizmat> m: dd "    ".Bool

[16:23] <camelia> rakudo-moar 7106759ed: OUTPUT: ¬´Bool::True‚ê§¬ª

[16:23] <ab5tract> oh wow

[16:23] <lizmat> ab5tract   what wow?

[16:23] <timo> nonempty strings truify, yeah

[16:23] <ab5tract> real False but True in the codebase

[16:24] <ab5tract> usually .Int.Bool on an object will match .Bool

[16:25] <timo> for containers like arrays or hashes maybe

[16:25] <ab5tract> so this one was worthy of a little mouth gaping :)

[16:26] <ab5tract> timo: for most things that coerce to Int, I would expect

[16:26] <ab5tract> I'm not saying its impossible or wrong, just an unusual beast

[16:26] <timo> m: my $specimen = 0.123; say $specimen.Bool; say $specimen.Int.Bool # :)

[16:26] <camelia> rakudo-moar 7106759ed: OUTPUT: ¬´True‚ê§False‚ê§¬ª

[16:26] <ab5tract> especiallybah

[16:27] <ab5tract> bah! great point :)

[16:27] <melezhik_> ab5tract: pinging you on upgrade of agent )) thanks üôè 

[16:28] <timo> oh there's a more obvious place to put a try/catch that will have the great added benefit of not increasing the code size of all methods that take a coercive parameter

[16:31] <lizmat> https://github.com/rakudo/rakudo/blob/main/src/core.c/Str.rakumod#L820-L821    # the place where "    ".Int becomes 0

[16:31] <lizmat> I guess we also need to check for the number of characters parsed

[16:32] *** melezhik_ left
[16:34] <ab5tract> timo: are you moving towards having all coercions be failures?

[16:34] <ab5tract> *being

[16:34] <ab5tract> ugh. all coercion failures being Failures

[16:34] <timo> for now i'm trying to catch exceptions from coercer method calls and turning them into Failure to see what it does

[16:35] <ab5tract> because I think ugexe made a really good point that it should really be the opposite

[16:36] <lizmat> fwiw, I think "".Int giving 0 is correct   (the "".Bool.Int argument)

[16:36] <lizmat> however, "    ".Int being 0 is a bug imo

[16:39] <ugexe> i dont find the "".Bool.Int argument satisfactory

[16:39] <ugexe> m: say "123".Bool.Int

[16:39] <camelia> rakudo-moar 7106759ed: OUTPUT: ¬´1‚ê§¬ª

[16:39] <ugexe> you wouldnt expect "123".Int to return 1

[16:40] <ugexe> if someone wants to turn a bool into a int that is one thing, but using the bool value of a string to determine the int is another

[16:55] <timo> so what i've been trying so far was to put a CATCH and creation of a Failure object in coerce-by-type-method in src/vm/moar/dispatchers.nqp line 4430, but the last attempt was wrong and resulted in an NQPMu making it to the next check and causing !invalid_coercion to be called, which wasn't what i wanted

[16:56] <timo> i have to go rest up, if anyone else wants to pick this up ...

[17:09] *** librasteve_ joined
[17:52] *** melezhik_ joined
[18:12] *** melezhik_ left
[18:23] *** melezhik_ joined
[18:28] *** melezhik_ left
[18:40] *** melezhik_ joined
[18:56] <ugexe> melezhik_: https://github.com/ugexe/zef/pull/595 while i disagreed about improving the error message, we can ultimately avoid the error message altogether

[19:08] <melezhik_> ugexe: ++

[19:47] <[Coke]> Folks, please consider any cleanups to https://github.com/rakudo/rakudo/wiki/ChangeLog-Draft

[19:47] <[Coke]> releasable6: next

[19:47] <releasable6> [Coke], Next release in ‚âà2 days and ‚âà23 hours. There are no known blockers. 31 out of 34 commits logged

[19:47] <releasable6> [Coke], Details: https://gist.github.com/b6917d1c3d804209c4e0beabfb10505c

[19:47] <lizmat> [Coke]: am editing now

[19:48] <[Coke]> ... I just snuck in an edit, sorry

[19:48] <lizmat> grrrrr  :-)

[19:48] <[Coke]> feel free to throw mine away, I can always readd

[19:50] <lizmat> it did not give me that option

[19:51] <lizmat> but no worries, I'm done  :-)

[19:53] <[Coke]> releasable6: next

[19:53] <releasable6> [Coke], Next release in ‚âà2 days and ‚âà23 hours. There are no known blockers. 32 out of 34 commits logged

[19:53] <releasable6> [Coke], Details: https://gist.github.com/e5a8f6982cf339c3ffcff90e5d3eab08

[19:54] <[Coke]> releasable6: next

[19:54] <releasable6> [Coke], Next release in ‚âà2 days and ‚âà23 hours. There are no known blockers. 32 out of 34 commits logged

[19:54] <releasable6> [Coke], Details: https://gist.github.com/138d70bff6fcde4b43f6a8608b4d3bac

[19:55] <[Coke]> I think those last 2 are fixed now (needed each to be its own [] wrapper

[19:55] <[Coke]> Thank you, those edits made them much more readable

[19:55] <[Coke]> I've just been using the short messages directly a lot, because I'm lazy

[19:56] <lizmat> no worries :-)

[19:57] <lizmat> m: my $a ‚âî 42   #  using  2254 COLON EQUALS ‚âî   instead of :=

[19:57] <camelia> rakudo-moar 7106759ed: OUTPUT: ¬´===SORRY!=== Error while compiling <tmp>‚ê§Confused‚ê§at <tmp>:1‚ê§------> my $a<HERE> ‚âî 42   #  using  2254 COLON EQUALS ‚âî   ‚ê§    expecting any of:‚ê§        infix‚ê§        infix stopper‚ê§        statement end‚ê§        statement modifier‚ê§ ‚Ä¶¬ª

[19:57] <lizmat> why are we not supporting that ?

[19:59] *** melezhik_ left
[20:29] *** melezhik_ joined
[20:33] *** melezhik_ left
[21:45] <[Coke]> never noticed this before, one of the blin tests is prompted for a username for github.com

[21:50] <[Coke]> one of these, I'm guessing, but I've ruled out a few already. https://gist.github.com/coke/42299baadcd29f2e2b0344f7b25a8947

[21:52] <[Coke]> ah, TXN::Remarshal

[21:53] <[Coke]> Looks like it's not showing on raku.land, and the github repo in the META6.json is gone

[22:07] *** finanalyst joined
[22:41] <Geth> ¬¶ rakudo: patrickbkr++ created pull request #6016: Install improvements

[22:41] <Geth> ¬¶ rakudo: review: https://github.com/rakudo/rakudo/pull/6016

[22:46] <patrickb> Coke: I can't make sense of the error you posted. I think I might be missing context. Can you provide a link where I can see the error?

[22:49] <[Coke]> it was an email from azdo about the pipeline

[22:50] <patrickb> that'd becnice

[22:54] *** melezhik left
[23:11] *** finanalyst left
[23:14] <timo> lizmat: thanks for checking out my JSON::Fast PR. I think it's fine to have $startpos as a parameter because it's only for the error reporting functions, it doesn't go through a bunch of parser functions

[23:58] <japhb> m: multi f(Int() $bar) { say "int"; dd; dd $bar }; multi f(Str() $bar) { say "str"; dd; dd $bar }; f('abc')

[23:58] <camelia> rakudo-moar 7106759ed: OUTPUT: ¬´str‚ê§sub f(Str(Any) $bar)‚ê§"abc"‚ê§¬ª

[23:58] <japhb> But ...

[23:58] <japhb> m: multi f(Int() $bar) { say "int"; dd; dd $bar }; f('abc')

[23:58] <camelia> rakudo-moar 7106759ed: OUTPUT: ¬´int‚ê§sub f(Int(Any) $bar)‚ê§Failure.new(exception => X::Str::Numeric.new(source => "abc", pos => 0, reason => "base-10 number must begin with valid digits or '.'"))‚ê§¬ª

[23:59] <japhb> That doesn't seem right.  Why is the bind generating a coerce Failure but the routine is still executing?

