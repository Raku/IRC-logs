[00:14] <Geth> ¦ rakudo/reproducible_RegexCaptures: 159c82e2f2 | (Timo Paulssen)++ | src/Perl6/bootstrap.c/BOOTSTRAP.nqp

[00:14] <Geth> ¦ rakudo/reproducible_RegexCaptures: Make CORE.c setting build reproducibly

[00:14] <Geth> ¦ rakudo/reproducible_RegexCaptures: 

[00:14] <Geth> ¦ rakudo/reproducible_RegexCaptures: The last thing missing was the array of capture names getting

[00:14] <Geth> ¦ rakudo/reproducible_RegexCaptures: a different order depending on hash randomization, thus breaking

[00:14] <Geth> ¦ rakudo/reproducible_RegexCaptures: reproducibility.

[00:14] <Geth> ¦ rakudo/reproducible_RegexCaptures: review: https://github.com/rakudo/rakudo/commit/159c82e2f2

[00:15] <Geth> ¦ rakudo: timo++ created pull request #6005: Make CORE.c setting build reproducibly

[00:16] <Geth> ¦ rakudo: review: https://github.com/rakudo/rakudo/pull/6005

[00:49] *** vrurg joined
[00:49] *** vrurg_ left
[00:52] *** guifa left
[02:07] *** vrurg_ joined
[02:10] *** vrurg left
[02:59] *** vrurg joined
[03:04] *** nativecallable6_ joined
[03:05] *** shareable6__ joined
[03:05] *** greppable6__ joined
[03:05] *** benchable6__ joined
[03:07] *** vrurg_ left
[03:07] *** benchable6 left
[03:07] *** greppable6 left
[03:07] *** shareable6 left
[03:07] *** nativecallable6 left
[03:07] *** apogee_ntv left
[03:07] *** apogee_ntv joined
[03:32] *** librasteve_ left
[05:14] *** melezhik joined
[05:36] *** lizmat left
[05:56] *** JimmyZhuo joined
[05:57] <JimmyZhuo> hello, looks like nqp lost some git tags

[05:57] <JimmyZhuo> for now, it has 2025.04

[05:59] <JimmyZhuo>  E:\OpenSource\MoarVM\install/bin/nqp-m.exe version 2025.04-1-g68eb3a190 is outdated, 2025.10-1-gea336280d expected.

[06:04] <Voldenet> I can see 2025.10 in here https://github.com/Raku/nqp/tags

[06:07] <JimmyZhuo> thanks , I use git pull --tags and now works

[06:18] <JimmyZhuo> looks like VERSION is not updated, still is 2025.04

[06:19] <Voldenet> it is, it's even tagged 2025.10: https://github.com/Raku/nqp/commit/b242f7e692645179b8b88ec94f72eaf3ef2150bb

[06:19] <Voldenet> try doing clean pull

[06:19] <Voldenet> erm, clone

[06:23] <JimmyZhuo> thanks very much, looks I has some problem with GFW , and it's ok now

[07:24] *** melezhik left
[08:04] *** melezhik joined
[08:36] <Geth> ¦ rakudo: zhuomingliang++ created pull request #6007: Add RakuAST Optimizer

[08:36] <Geth> ¦ rakudo: review: https://github.com/rakudo/rakudo/pull/6007

[08:40] *** JimmyZhuo left
[10:28] <melezhik> o/

[10:29] <melezhik> Hit an interesting issue when testing zef in another brownie round - http://brw.sparrowhub.io/file_view/pensive-chebyshev-02994136.report/dzmqbihuvsygnrkwoefl.13377/zef:ver%3C0.2.6%3E:auth%3Cgithub:ugexe%3E.log

[10:29] <melezhik> Cc ugexe

[10:33] <melezhik> Also looks like if we run zef install Foo in several parallel threads on the same container AND we use standard zef path ( no ZEF_INSTALL_TO) I don’t see “already installed” errors from zef , at least so far

[10:33] <melezhik> Cc ab5tract

[10:33] *** lizmat joined
[12:21] <lizmat> timo: I've come to the conclusion that OO::Monitors.clone issue is actually deeper

[12:22] <lizmat> and could be fixed by making an nqp::clone() on an object with ReentrantMutex REPR do a nqp::new()

[12:23] <lizmat> the alternative would be re-implement Mu.clone in OO::Monitors, but that wouldn't fix any of the other cases (think Method::Protected)

[12:32] <lizmat> rakkable: eco-provides Lock.new --and=$!

[12:32] <rakkable> lizmat, Running: eco-provides Lock.new --and=$!, please be patient!

[12:32] <rakkable> lizmat, Found 51 lines in 41 files (38 distributions):

[12:32] <rakkable> lizmat, https://gist.github.com/d6cdb4f0ca07944a4e5ef730bcca9433

[12:32] <lizmat> so that's quite a few dists that have a Lock attribute, that cannot be .clone d currently

[12:55] <lizmat> m: class A { has int $.a = 42 }; dd A.new.clone(a => 666)   # meh

[12:55] <camelia> rakudo-moar 89dff65d3: OUTPUT: «Died with X::Assignment::RO␤  in block <unit> at <tmp> line 1␤␤»

[13:59] <lizmat> https://github.com/rakudo/rakudo/issues/6008

[14:56] <timo> i'm not sure just doing an nqp::new on any lock attribute when cloning is a good idea

[14:58] <timo> it may be more useful to have something in the core that makes writing a custom clone method implementation more convenient, or something that makes the behaviour of the builtin clone method customizable by the class in question

[15:24] *** Guest5968 joined
[15:52] *** vrurg_ joined
[15:56] *** vrurg left
[15:59] *** librasteve_ joined
[16:27] <ab5tract> that sounds reasonable to me

[16:39] *** Guest5968 left
[16:58] <timo> deep cloning is also a thing people are often interested in, but it's a rather hairy topic with many easily overlooked details i think?

[17:05] <ab5tract> would cloning a lock clone it's locked-ness?

[17:57] <ugexe> depends on the sequencing of the inherit race condition

[18:20] <lizmat> now, if Mu.clone would have a way to indicate the attributes *not* to clone

[18:21] <lizmat> OTOH, what *does* it mean if we clone a monitor: should they share the lock?

[18:22] <lizmat> ab5tract: in my book, it would, yes

[18:22] <lizmat> but that's keeping the OO::Monitors semantics in the back of my head

[18:24] *** melezhik_ joined
[18:25] <melezhik_> zero "already installed" errors, if not use ZEF_INSTALL_TO var and if run many zef install Foo in parallel 

[18:25] <melezhik_> cc ab5tract:

[18:25] <melezhik_> root@fa5b368a1dcc:/app# grep "already install" ~/.brownie/versions/2025.10/*.log | wc -l

[18:25] <melezhik_> 0

[18:30] *** melezhik_ left
[18:35] *** melezhik_ joined
[18:41] *** melezhik_ left
[18:41] *** melezhik_ joined
[18:46] *** melezhik_ left
[18:46] *** melezhik_ joined
[18:49] *** librasteve_ left
[18:56] *** melezhik_ left
[19:23] *** melezhik_ joined
[19:39] *** melezhik_ left
[19:42] *** vrurg joined
[19:42] *** vrurg_ left
[19:48] *** melezhik_ joined
[19:51] *** melezhik_ left
[19:54] *** melezhik_ joined
[19:55] *** melezhik_ left
[20:04] *** melezhik_ joined
[20:05] <Geth> ¦ rakudo/main: 78a43bc20d | (Elizabeth Mattijsen)++ | src/core.c/Mu.rakumod

[20:05] <Geth> ¦ rakudo/main: Allow native attributes can be twiddled with .clone

[20:05] <Geth> ¦ rakudo/main: 

[20:05] <Geth> ¦ rakudo/main: Before this, trying to twiddle a native attribute with .clone, would

[20:05] <Geth> ¦ rakudo/main: die.  As described in #6008

[20:05] <Geth> ¦ rakudo/main: 

[20:05] <Geth> ¦ rakudo/main: Also streamlined the .clone logic into separate "twiddling" and

[20:05] <Geth> ¦ rakudo/main: "non-twiddling" private methods, which makes it go up to 10% faster.

[20:05] <Geth> ¦ rakudo/main: review: https://github.com/rakudo/rakudo/commit/78a43bc20d

[20:13] <Geth> ¦ roast: 11505482f4 | (Elizabeth Mattijsen)++ | S12-attributes/clone.t

[20:13] <Geth> ¦ roast: Add test for native attribute twiddling with .clone

[20:13] <Geth> ¦ roast: 

[20:13] <Geth> ¦ roast: See also https://github.com/rakudo/rakudo/issues/6008

[20:13] <Geth> ¦ roast: review: https://github.com/Raku/roast/commit/11505482f4

[20:21] <disbot1> <jubilatious1_98524> "would cloning a lock clone it's locked-ness?" Great question!

[20:43] *** melezhik_ left
[21:12] *** melezhik_ joined
[21:14] *** melezhik_ left
[21:30] *** melezhik_ joined
[21:35] *** melezhik_ left
[21:35] *** melezhik_ joined
[21:40] *** Voldenet left
[21:41] *** Voldenet joined
[21:44] *** melezhik_ left
[21:45] *** melezhik_ joined
[21:50] *** melezhik_ left
[22:04] *** melezhik_ joined
[22:06] *** melezhik_ left
[22:20] *** melezhik_ joined
[22:23] *** melezhik_ left
[22:24] *** melezhik left
[22:28] *** melezhik_ joined
[22:33] *** melezhik_ left
[22:33] *** melezhik_ joined
[22:37] *** melezhik_ left
[22:43] *** melezhik_ joined
[22:45] *** melezhik_ left
[22:59] *** melezhik_ joined
[23:01] *** melezhik_ left
[23:14] *** melezhik_ joined
[23:17] *** melezhik_ left
[23:31] *** melezhik_ joined
[23:38] *** melezhik_ left
[23:44] *** melezhik_ joined
[23:48] *** melezhik_ left
