[06:01] *** camelia joined
[06:15] *** melezhik joined
[06:15] <melezhik> .

[08:22] *** melezhik left
[09:10] <ab5tract> these final tickets for v6.e are a real doozy

[09:11] <ab5tract> m: use v6.*; subset E of Int; my E $e = 11; dd $e.VAR.VAR.default

[09:11] <camelia> rakudo-moar e1b3f9277: OUTPUT: ¬´Any‚ê§¬ª

[09:11] <ab5tract> m: use v6.*; subset E of Int; my E $e = 11; dd $e.VAR..default

[09:11] <camelia> rakudo-moar e1b3f9277: OUTPUT: ¬´===SORRY!=== Error while compiling <tmp>‚ê§Undeclared routine:‚ê§    default used at line 1‚ê§‚ê§¬ª

[09:12] <ab5tract> m: use v6.*; subset E of Int; my E $e = 11; dd $e.VAR.default

[09:12] <camelia> rakudo-moar e1b3f9277: OUTPUT: ¬´Int‚ê§¬ª

[09:12] <ab5tract> this one works if I disable setting the language revision in SubsetHOW.new_type

[09:15] <ab5tract> but the only language revision specific code in SubsetHOW itself is clearly unrelated

[09:15] <ab5tract> I removed it anyway and it doesn't change the result

[09:18] <ab5tract> I guess the language revision "has" to be in one of SubsetHOW's parent classes

[09:23] *** melezhik joined
[10:56] <ab5tract>   Blech ü§Æ

[13:11] <ab5tract> melezhik: My agent should be up and running. I called it `agent-code-named-ab5tract`

[13:12] <melezhik> Hey , let me check

[13:13] <melezhik> Did you run agent job ?

[13:15] *** melezhik_ joined
[13:16] <melezhik_> .

[13:17] <melezhik_> so far I only see pings from m2 agents - http://brw.sparrowhub.io/builds

[13:17] <melezhik_> agent-HG2pgG1Nu6 and agent-jd8viIozQK

[13:18] <melezhik_> ^^ ab5tract:

[13:18] <ab5tract> hmm

[13:19] <ab5tract> well, I'm technically using podman instead of docker, but the commands ran flawlessly

[13:20] <melezhik_> yep, then you need to go to http://127.0.0.1:4000 and run agent job to add agent to pool

[13:20] <melezhik_> just running docker/podman container is not enough

[13:21] <melezhik_> https://github.com/melezhik/brownie/tree/main/agent#add-agent-to-pool 

[13:23] <melezhik_> https://pasteboard.co/zUtjKBCvQcBG.jpg

[13:24] <ab5tract> melezhik_: I did run the agent job

[13:25] <melezhik_> ok, what do you see on http://127.0.0.1:4000/builds ? 

[13:25] <ab5tract> looks like I'm agent-jd8viIozQK

[13:26] <ab5tract> not sure why it didn't pick up the environment variable. maybe I did a typo

[13:26] <melezhik_> yep, I see it in the list, cool

[13:26] *** melezhik_ left
[13:27] <ab5tract> oh, duh. it's an environment variable in my environment, not in the container

[13:28] *** melezhik_ joined
[13:28] <melezhik_> yeah, you can see the progress on http://brw.sparrowhub.io/builds

[13:29] <melezhik_> also your web UI for agent will show running agents jobs on recent builds page

[13:29] <melezhik_> right now modules are being installed on 3 agents

[13:30] <melezhik_> 2 agents are on the same machine though , so practically this 2 agents setup , yours and 2 mine

[13:31] <melezhik_> you can visit orchestrator running job http://brw.sparrowhub.io/report/brw-orch/7 to see things (from all agents ) in realtime - http://brw.sparrowhub.io/report/brw-orch/7

[13:32] <melezhik_> there 100 Raku modules for `zef install` test - https://github.com/melezhik/brownie/blob/main/orchestrator/config.raku

[13:32] <melezhik_> just a random list so far

[13:33] <melezhik_> we have `[54] tests out of [100] left` right after 20 minutes of work which is not bad

[13:34] <melezhik_> how many jobs do you see on your agent queue right now? if you to queue page on your agent UI ?

[13:36] <melezhik_> mine agents queues are http://agent.sparrowhub.io/queue and http://agent2.sparrowhub.io/queue

[13:39] <melezhik_> "duh. it's an environment variable in my environment, not in the container", yep, you need to docker run .... -e -e BRW_AGENT_NAME_PREFIX=bla-bla-bla

[13:41] <melezhik_> I wonder how many resource your box have? can I see uptime info ( shown on agent UI main page ) ...

[13:52] <melezhik_> [13] tests out of [100] left, it slows down in the end, but I think I know how I can optimize it in the next runs ...

[13:53] <melezhik_> 40 minutes left

[13:53] <melezhik_> left -> last

[13:56] *** melezhik_ left
[14:01] *** melezhik_ joined
[14:06] *** melezhik_ left
[14:15] <melezhik> Ok, it‚Äôs finished now .http://brw.sparrowhub.io/file_view/brw-orch/ibepqzdwnrtloycjhsvm.33/summary.txt

[14:15] <melezhik> It took 51 minute

[14:17] <melezhik> Faster than it was . But like said there is a room for improvement and I have some idea how to lessen time. I think current algorithm is a bit sub optimal as it sends ‚Äúduplicate‚Äù  jobs and agents waste time installing  the same module more then one time, it‚Äôs easy fixable though ‚Ä¶

[14:23] <melezhik> a5tract: once I have fixed the algorithm I may ask you to stop / start agent one more time, thanks again , I see that even adding one agent sufficiently lessen overall time even for sub optimal naive algorithm, so we are good üëç

[14:42] <ab5tract> ü•≥

[14:43] <ab5tract> the box is a ryzen 5950, IIRC

[16:02] *** melezhik_ joined
[16:05] *** melezhik_ left
[16:19] *** melezhik_ joined
[16:28] *** melezhik_ left
[16:28] *** melezhik_ joined
[16:32] <melezhik_> ab5tract: could you pleas stop / start your container and run agent job ?

[16:32] <melezhik_> please make it sure you drop dropped container files by fully stopping container ( restart command will keep files afik for docker )

[16:33] *** melezhik left
[16:33] <melezhik_> thanks

[16:34] <melezhik_> once you start container I will run new round of tests

[16:44] *** melezhik joined
[16:46] *** melezhik_ left
[17:52] *** melezhik_ joined
[17:52] *** melezhik_ left
[18:47] *** finanalyst joined
[19:33] *** melezhik left
[19:55] *** Geth left
[20:45] *** librasteve_ joined
[20:58] *** finanalyst left
[21:31] <ab5tract> melezhik: I kicked the container.

[21:31] <tellable6> ab5tract, I'll pass your message to melezhik_

[21:39] <ab5tract> melezhik: also wanted to suggest that you declare `config` as a term. that way you can use the associative access directly, no need for parentheses

[21:39] <tellable6> ab5tract, I'll pass your message to melezhik_

[21:39] <timo> you're free to kick many kinds of containers, but please refrain from kicking the bucket

[21:40] <timo> kick the mug maybe, there's precedent for that in this community

[21:40] <ab5tract> yeah, I'll stick to mugs for now lol

[21:41] <ab5tract> m: sub term:<config> { %( <path interval> X=> 1 ) }; dd config<path>

[21:41] <camelia> rakudo-moar e1b3f9277: OUTPUT: ¬´1‚ê§¬ª

[21:42] <ab5tract> m: sub term:<config> { %( <path interval> X=> 1 ) }; dd config<wow> = 3

[21:42] <camelia> rakudo-moar e1b3f9277: OUTPUT: ¬´3‚ê§¬ª

[21:42] <ab5tract> m: sub term:<config> { %( <path interval> X=> 1 ) }; dd config<wow> = 3; dd config<wow>

[21:42] <camelia> rakudo-moar e1b3f9277: OUTPUT: ¬´3‚ê§element of %{'wow'} = Any‚ê§¬ª

[21:43] <ab5tract> ok phew

[23:11] *** Geth joined
