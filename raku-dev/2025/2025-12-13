[00:07] *** Geth left
[00:08] *** Geth joined
[00:08] <Geth> ¦ rakudo/lizmat-mixed-int-num-infixes: 9a17de9efa | (Elizabeth Mattijsen)++ | src/core.c/Num.rakumod

[00:08] <Geth> ¦ rakudo/lizmat-mixed-int-num-infixes: Address japhb++'s thinko catches

[00:08] <Geth> ¦ rakudo/lizmat-mixed-int-num-infixes: review: https://github.com/rakudo/rakudo/commit/9a17de9efa

[00:08] <lizmat> japhb++  ^^

[00:26] *** librasteve_ left
[00:59] <japhb> lizmat++

[04:36] *** kjp left
[04:38] *** kjp joined
[05:35] *** kjp left
[05:36] *** kjp joined
[05:37] *** kjp left
[05:37] *** kjp joined
[05:57] *** melezhik joined
[06:35] <patrickb> [Coke]: When's the blin run planned? I haven't merged all the PTY stuff yet. But now that I got write perms on the libuv fork repo I could.

[08:16] *** melezhik left
[11:28] *** librasteve_ joined
[13:07] <patrickb> [Coke]: The PTY branches are now all ready (they now rely on the temporary libuv fork, are rebased onto latest main and pass make test and make spectest). I could merge the entire lot. Can you give me a final "go ahead"? (i.e. the blin run didn't start yet)

[13:42] <disbot6> <melezhik.> patrickb: ooo what’s PTY branches ?

[13:45] <disbot6> <melezhik.> ooc

[14:10] <patrickb> adding PTY support to Rakudo involved changes in Rakudo, moar and the underlying third party libuv library. So I had git branches for all of them.

[14:14] <disbot6> <melezhik.> Ok. We can run tests over brownie if you want , it allows to build Rakudo  source code

[14:15] <disbot6> <melezhik.> Is it just one Rakudo branch from which we can build Rakudo ? Or many ?

[14:30] *** librasteve_ left
[14:34] <[Coke]> I haven't started blin yet, can start it sunday late if needed.

[14:56] <patrickb> Then I'll go ahead and merge it in the next few hours. Thanks!

[15:04] <[Coke]> Sounds good. Thanks!

[15:05] <[Coke]> .tell melezhik next release is basically a week from today

[15:05] <[Coke]> .tell melezhik if you want to try to coordinate a brownie run after patrickb's merge, also very cool.

[16:28] *** melezhik3 joined
[16:32] *** melezhik joined
[16:32] <melezhik> [Coke]: absolute doable just need to point brownie to the head I guess

[16:33] <melezhik> I will just need free agents ) , patrickb please let me know when you merge into master so we can run brownie round and then compare with 2025.11

[16:33] *** melezhik3 left
[16:45] *** finanalyst joined
[16:48] <finanalyst> anyone on line use zef in a dockerfile ? I'm having a problem with `zef install --/test 'Getopt::Long'`

[16:49] <finanalyst> some time ago I had no problem with `RUN zef ...` but now something has changed

[16:56] <finanalyst> seems that I broke a chained sequence of zef into separate RUNs. So the problem is not zef, but Docker image building.

[17:54] <[Coke]> can you gist the Dockerfile showing problems?

[18:35] <finanalyst> [Coke] The problem is installing modules with  zef. I have now discovered that the cpan repository is not enabled upon installation 

[18:36] <finanalyst> The module that is not being found is Getoption::Long

[18:38] <[Coke]> That module doesn't exist?

[18:38] <[Coke]> Do you mean "Getopt::Long" ?

[18:38] <finanalyst> The difficulty is that if a docker image that only has an installed zef is run as a container, and then a terminal is opened in the container, `zef install Getoption::Long` will run without error

[18:38] <[Coke]> https://raku.land/cpan:LEONT/Getopt::Long ?

[18:38] <finanalyst> My bad Getopt::Long

[18:39] <[Coke]> Yah. No reason why that shouldn't work in a dockerfile with zef.

[18:39] <[Coke]> Can you show the dockerfile so we can see if something else is going on? weird pathing, weird zef env vars...

[18:40] <finanalyst> So I looked at the zef configuration file in the docker image, and the 'enable' field for cpan is 0

[18:41] <finanalyst> I found that Getopt::Long is in cpan, while Getopt::Long::Grammar is in fez

[18:42] <lizmat> finanalyst: what is the REA setting in zef's config?    It should find Getopt::Long there

[18:42] <finanalyst> looking

[18:43] <finanalyst> yes the 'rea' repository is enable: 1

[18:44] <lizmat> then it should install Getopt::Long from there

[18:45] <finanalyst> However, when I include a `RUN zef update` command in the dockerfile, I get an error saying that the mirror can be established

[18:46] <lizmat> (not ?)

[18:46] <[Coke]> I can't help you if you don't share the Dockerfile. :)

[18:46] <finanalyst> not be established

[18:47] * [Coke] -> afk

[18:47] <finanalyst> [Coke] sorry. Making a gist

[18:48] <lizmat> finanalyst: the latest Getopt::Long on the REA is  Getopt::Long:ver<0.4.2>:auth<cpan:LEONT>

[18:51] *** melezhik left
[18:53] <finanalyst> <script src="https://gist.github.com/finanalyst/7480bea3a6f2497ec0a62eadee4ef66a.js"></script>

[18:53] <finanalyst> https://gist.github.com/finanalyst/7480bea3a6f2497ec0a62eadee4ef66a

[18:55] <finanalyst> FWIW The dockerfile I had developed only included Cro and it was working up until v1.0.0 of zef

[18:56] <finanalyst> Then I began to get install failures, and I have only needed to work out why now.

[19:08] *** melezhik_ joined
[19:10] *** melezhik_ left
[19:41] <finanalyst> lizmat: is there a way to increase the time zef tries to get information before it fails?

[19:41] <lizmat> ugexe might know, I do not offhand

[19:43] <finanalyst> ugexe: zef is failing to update the rea mirror after an update. I want to know if its a timing issue. Can I increase the time for an update?

[19:43] <finanalyst> The problem occurs when setting up a docker image

[19:55] <ugexe> does `curl https://raw.githubusercontent.com/Raku/REA/main/META.json` run in that docker image work?

[19:58] <finanalyst> ugexe: checking

[20:01] <finanalyst> curl is not found. 

[20:03] <leont> Right I still need to transfer that one to zef

[20:04] <leont> I've moved most of them, it was my last raku release to CPAN, but I just haven't needed to do any release of since February 2023

[20:08] <finanalyst> ugexe: by installing curl in the Alpine image, zef update completed without a problem, and the module installed without a problem

[20:09] <lizmat> shouldn't zef spot the lack of 'curl'  ?

[20:09] <patrickb> lizmat: May I kindly ask for a moar and nqp bump?

[20:09] <finanalyst> leont: Getopt::Long was the first problematic module, but there are several others

[20:09] <lizmat> patrickb: will do

[20:10] <patrickb> ❤️

[20:10] <lizmat> patrickb: no changes to NQP, correct ?

[20:10] <patrickb> no only moar

[20:12] <lizmat> patrickb: how should I describe the MoarVM work?   "Implement PTY support" ?    or something more specific?

[20:12] <patrickb> that's actually pretty on spot

[20:13] <patrickb> no PTY before, now there is :-D

[20:13] <Geth> ¦ nqp/main: 01ddba8a4d | (Elizabeth Mattijsen)++ | tools/templates/MOAR_REVISION

[20:13] <Geth> ¦ nqp/main: Bump MoarVM to get PTY support implemented by patrickb++

[20:13] <Geth> ¦ nqp/main: review: https://github.com/Raku/nqp/commit/01ddba8a4d

[20:19] <Geth> ¦ rakudo/lizmat-mixed-int-num-infixes: 291f0aaf84 | (Elizabeth Mattijsen)++ | tools/templates/NQP_REVISION

[20:19] <Geth> ¦ rakudo/lizmat-mixed-int-num-infixes: Bump NQP to get MoarVM PTY support implemented by patrickb++

[20:19] <Geth> ¦ rakudo/lizmat-mixed-int-num-infixes: review: https://github.com/rakudo/rakudo/commit/291f0aaf84

[20:19] <lizmat> argh, wrong branch

[20:20] <Geth> ¦ rakudo/main: 1d6aae348b | (Elizabeth Mattijsen)++ | tools/templates/NQP_REVISION

[20:20] <Geth> ¦ rakudo/main: Bump NQP to get MoarVM PTY support implemented by patrickb++

[20:20] <Geth> ¦ rakudo/main: review: https://github.com/rakudo/rakudo/commit/1d6aae348b

[20:21] <patrickb> Thank you! Greatly appreciated.

[20:22] <ugexe> if they didn't have curl installed but zef didn't complain about not having an available fetcher, then it would have been using wget

[20:25] <lizmat> I guess there is no wget either then ?

[20:25] <lizmat> in that container, I mean?

[20:26] <ugexe> there has to be. not only did zef not complain that no available fetcher was found, but it is clearly fetching the fez ecosystem list

[20:27] <lizmat> afk&

[20:29] <disbot6> <melezhik.> My 2 cents . On minimal vanilla alpine Linux wget is way too old by default , so it might not work as expected , but maybe this is not a cause of the issue …

[20:58] <patrickb> does the error "Could not open (BUILDPLAN)". Failed to stat file: no such file or directory" during `install-core-dist.raku` ring a bell for anyone?

[21:39] <[Coke]> Did we ever get a look at the Dockerfile?

[21:39] <[Coke]> Anything else incoming before I hit blin?

[21:39] <[Coke]> patrickb: you want that win box spun up, let me know.

[21:40] <[Coke]> c: 1d6aae348 3.put

[21:40] <committable6> [Coke], ¦1d6aae3: «3␤»

[21:43] <[Coke]> blin started

[21:43] <[Coke]> We never had a fix for that Unicode Security issue, I don't think, so that'll still be there.

[22:13] <SmokeMachine> Test::Time's test should not be hanging any more

[22:15] <patrickb> That PTY merge seems to have broken Rakudo on Windows. My best guess is some form of bit-rot. I'm investigating, but I'll definitely won't be able to get this fixed tonight.

[22:15] <patrickb> Shall we revert?

[22:17] <[Coke]> Do you think you can fix it this weekend?

[22:17] <[Coke]> I'm happy to give a day or two.

[22:18] <[Coke]> I will kill the blin run, though.

[22:19] <patrickb> Maybe. But as I don't know what's wrong though it's a bit hard to tell.

[22:55] <patrickb> I think I found the issue.

[23:04] <patrickb> That latest MoarVM commit fixes the issue.

[23:05] <patrickb> That'll need another moar and nqp bump. And then (given things are all good then) merging of the respective Rakudo PR and then blin can go.

[23:07] <patrickb> I'm off to bed now. lizmat can you do the bumps once more?

[23:07] <patrickb> Coke: Please don't start blin until the Rakudo PR is merged.

[23:29] <Geth> ¦ nqp/main: 57217cbd75 | (Elizabeth Mattijsen)++ | tools/templates/MOAR_REVISION

[23:29] <Geth> ¦ nqp/main: Bump MoarVM to unbreak the Windows build

[23:29] <Geth> ¦ nqp/main: review: https://github.com/Raku/nqp/commit/57217cbd75

[23:34] <Geth> ¦ rakudo/main: 81a6e768d3 | (Elizabeth Mattijsen)++ | tools/templates/NQP_REVISION

[23:34] <Geth> ¦ rakudo/main: Bump NQP to unbreak the Windows build

[23:34] <Geth> ¦ rakudo/main: review: https://github.com/rakudo/rakudo/commit/81a6e768d3

[23:53] <Geth> ¦ rakudo/main: 6 commits pushed by (Patrick Böker)++, (Elizabeth Mattijsen)++

[23:53] <Geth> ¦ rakudo/main: 029cb9fdde | Proc::Async PTY support

[23:53] <Geth> ¦ rakudo/main: 1dfd3b5e4e | Implement setting the initial window size

[23:53] <Geth> ¦ rakudo/main: f347d084aa | Implement Proc::Async.resize-pty()

[23:53] <Geth> ¦ rakudo/main: e246fc23bb | fixes

[23:53] <Geth> ¦ rakudo/main: fd386dbc82 | Changes to only build the PTY spawn helper when necessary

[23:53] <Geth> ¦ rakudo/main: 63bc8b8393 | Merge pull request #5651 from patrickbkr/pty

[23:53] <Geth> ¦ rakudo/main: review: https://github.com/rakudo/rakudo/compare/81a6e768d357...63bc8b839300

[23:54] <[Coke]> restarting blin

[23:55] <lizmat> [Coke]: please wait  until I double checked locally whether it tests ok  :-)

[23:55] <lizmat> probably will, but just in case

[23:56] <[Coke]> I'll stop it if not.

[23:57] <lizmat> ok

[23:57] <[Coke]> if it tests OK, I'll let it keep going.

[23:57] <[Coke]> c: 81a6e768d pi.say

[23:57] <committable6> [Coke], ¦81a6e76: «3.141592653589793␤»

