[02:11] *** benchable6 joined
[02:17] *** benchable6__ left
[03:00] <releasable6> Next release in ≈6 days and ≈15 hours. There are no known blockers. Please log your changes in the ChangeLog: https://github.com/rakudo/rakudo/wiki/ChangeLog-Draft

[07:47] *** melezhik joined
[09:57] *** melezhik left
[11:05] *** librasteve_ joined
[12:11] <timo> found something that was making the compilation of BOOTSTRAP/v6c.moarvm take longer than it needed to

[12:14] <timo> almost 10% of its time spent in the linefileof method of HLL::Compiler :D

[12:14] <timo> we never anticipated a very large number of "#line" directives in nqp code, so the just over 3k line directives in bootstrap/v6c.nqp caused very poor performance on our linear scan through the directives

[12:18] <timo> not helpful for the performance of pretty much any other compilation i'm afraid

[12:34] <ab5tract> m: Q| class A { has @.a is readonly = <a b c> }; my $a = A.new; $a.a = <c d e>; dd $a.a |.AST.EVAL

[12:34] <camelia> rakudo-moar 690b7f07a: OUTPUT: «===SORRY!===␤Unknown compilation input 'qast'␤»

[12:35] <ab5tract> lizmat: maybe this is an indication that things are slightly better for RakuAST?

[12:35] <timo> do we need the experimental use for something like that?

[12:37] <ab5tract> Nope. It’s a handy patch for debugging that probably should not survive the release

[12:37] <ab5tract> m: Q| say “hallo!” |.AST.EVAL

[12:37] <camelia> rakudo-moar 690b7f07a: OUTPUT: «hallo!␤»

[12:39] <timo> mhm

[12:45] *** melezhik joined
[12:49] <timo> m: say 2553181 * 100 / 2571245

[12:49] <camelia> rakudo-moar 690b7f07a: OUTPUT: «99.297461␤»

[13:12] *** camelia left
[13:12] *** camelia joined
[13:12] <nine> lizmat: camelia should be in #raku-doc now

[13:30] <timo> m: say 2523212 * 100 / 2571245

[13:30] <camelia> rakudo-moar 690b7f07a: OUTPUT: «98.1319166␤»

[13:37] <timo> m: say 2521040 * 100 / 2571245

[13:37] <camelia> rakudo-moar 690b7f07a: OUTPUT: «98.0474439␤»

[13:44] <timo> m: say 2518832 * 100 / 2571245

[13:44] <camelia> rakudo-moar 690b7f07a: OUTPUT: «97.9615711␤»

[13:44] <timo> haha, oh yeah!

[14:01] <timo> .o( i might have b0rked it in the middle and gotten wrong results? )

[14:02] <timo> m: say 2516506 * 100 / 2571245 # or maybe it's been actually correct

[14:02] <camelia> rakudo-moar 690b7f07a: OUTPUT: «97.8711091␤»

[14:04] <timo> but the code is ugly and i don't like it

[14:06] <timo> m: say 2493135 * 100 / 2571245 # or maybe it's been actually correct

[14:06] <camelia> rakudo-moar 690b7f07a: OUTPUT: «96.962172␤»

[14:15] <timo> huh. i made the 12-rakuast/origins.rakutest break, it now includes the lines of "method throw" and "sub die" in the output, which the test is not expecting

[14:34] <timo> i think i found the mistake (in something else i did before)

[14:55] *** melezhik left
[15:33] <timo> why is it so easy to mess up a "simple" binary search :D

[15:50] <ab5tract> What is this equation?

[15:51] <timo> you mean the numbers i've been calculating?

[16:27] <ab5tract> Yeah. Are you saying Raku is giving the wrong result?

[16:28] <timo> no

[16:31] <timo> i've been decreasing the size of the v6c bootstrap nqp source file

[17:37] <Geth> ¦ nqp/faster_comp_line_directives: ddfc4348b1 | (Timo Paulssen)++ | 3 files

[17:37] <Geth> ¦ nqp/faster_comp_line_directives: Transform comp_line_directives from an AoS to a SoA

[17:37] <Geth> ¦ nqp/faster_comp_line_directives: 

[17:37] <Geth> ¦ nqp/faster_comp_line_directives: Instead of having an object array with many three-element obj-arrays in it,

[17:37] <Geth> ¦ nqp/faster_comp_line_directives: have two int-arrays and a str-array.

[17:38] <Geth> ¦ nqp/faster_comp_line_directives: 

[17:38] <Geth> ¦ nqp/faster_comp_line_directives: This removes one indirection from line number lookup when searching through

[17:38] <Geth> ¦ nqp/faster_comp_line_directives: the array of comp line directives. Also, this should use less memory at

[17:38] <Geth> ¦ nqp/faster_comp_line_directives: <…commit message has 15 more lines…>

[17:38] <Geth> ¦ nqp/faster_comp_line_directives: review: https://github.com/Raku/nqp/commit/ddfc4348b1

[17:38] <Geth> ¦ nqp: timo++ created pull request #844: Transform comp_line_directives from an AoS to a SoA

[17:38] <Geth> ¦ nqp: review: https://github.com/Raku/nqp/pull/844

[17:38] <timo> behold!

[17:49] <timo> m: say 2065410 * 100 / 2142295 # difference in size of gen/moar/ast.nqp with my changes in an upcoming rakudo branch

[17:49] <camelia> rakudo-moar 690b7f07a: OUTPUT: «96.4110918␤»

[19:33] <timo> i think the code there is actually giving wrong results now that i "improved" it

[20:57] *** Guest66 joined
[21:00] *** Guest66 left
[22:35] <[Coke]> jdv: am I still on for release in a week?

[22:49] <[Coke]> If there are any bumps left to do for moar/nqp into nqp/rakudo, can someone press the button on those?

[23:00] <releasable6> Next release in ≈5 days and ≈19 hours. There are no known blockers. Please log your changes in the ChangeLog: https://github.com/rakudo/rakudo/wiki/ChangeLog-Draft

[23:07] <lizmat> nine++  thanks!

