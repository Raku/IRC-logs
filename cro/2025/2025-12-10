[01:51] *** [Coke]_ joined
[02:00] *** [Coke] left
[02:39] *** [Coke]_ is now known as [Coke]

[11:41] *** librasteve_ left
[14:02] *** librasteve_ joined
[17:18] *** laggyluke joined
[17:52] <laggyluke> Hi, I'm looking for help on Cro::HTTP::Client

[17:52] <[Coke]> Sure, what's up?

[17:53] <[Coke]> Need some examples, have a bug... ?

[17:53] <laggyluke> shall i paste the important lines here?

[17:56] <laggyluke> my \client = Cro::HTTP::Client.new: base-uri => 'https://localhost:8200/v1', content-type => "application/json", ca => { :insecure }, :$headers ;

[17:57] <[Coke]> Sure, one liners ok, anything big, please use something like gist.github.com

[17:59] <laggyluke> when i run the script with CRO_TRACE=1 ./script I catch the error message "connection refused", I'm not sure where this is coming from

[18:00] <[Coke]> ... can you open that site in a browser?

[18:00] <[Coke]> that is, are you sure this is a cro client issue at all?

[18:00] <laggyluke> yes its a local hashicorp vault for development and a selfsigned certificate

[18:01] <laggyluke> I was able to build a perl script with REST::Client, that is working

[18:02] <laggyluke> with this service on localhost

[18:03] <laggyluke> when i use httpbin.org the raku script is working alright

[18:03] <[Coke]> can you gist the full script?

[18:04] <[Coke]> also what OS are you running on?

[18:04] <laggyluke> yes i can put the whole script on gist, 

[18:04] <laggyluke> I'm running linux

[18:04] <[Coke]> (I added some headers and an await.get around that one liner, and yah, it works fine here on the site I tried against)

[18:05] <[Coke]> this shouldn't matter, but any luck with 127.0.0.1 instead of localhost?

[18:06] <laggyluke> let me prepare the script and put it on gist, that might take a while...

[18:08] <[Coke]> or if you have it checked in somewhere.

[18:09] <[Coke]> I am guessing it's something about the TLS negotiation. Maybe a dump of the cro trace too?

[18:25] <laggyluke> https://gist.github.com/wolowizard/05798fa61d97df42ff685887f0db506f

[18:25] <laggyluke> with localhost there is no trace output, that's a bit odd

[18:28] <laggyluke> I have the feeling the issue is with ssl handshake perhaps

[18:29] <laggyluke> with httpbin.org i there is trace output but not connecting to localhost

[18:33] <laggyluke> i added the CATCH block to gist

[18:47] <[Coke]> you have a password in there.

[18:47] <[Coke]> in case you want to remove that before I read it.

[19:05] <laggyluke> this is no real password it's just a test

[19:06] <[Coke]> OK. I don't see anything obviously wrong, guessing it's related to your specific local connection. :(

[19:07] <[Coke]> To get more eyes on it, can you open a Cro issue?

[19:07] <laggyluke> sure

[19:10] <[Coke]> sorry it wasn't something obvious!

[19:11] <laggyluke> could you give me a hint where i should open an issue?

[19:13] <laggyluke> croservices/cro ?

[19:15] <laggyluke> or in croservices/cro-tls ?

[19:18] <[Coke]> any raku folks here? Is there a raku* repo these days??

[19:18] <[Coke]> I'd start with https://github.com/croservices/cro/issues

[19:19] <[Coke]> We can always move a ticket.

[19:20] <laggyluke> ok, on it...

[19:34] <[Coke]> Huh, forgot about my "can't install cro on windows" from Jan-21 2023.

[19:49] *** laggyluke left
[19:49] *** laggyluke joined
[19:57] <laggyluke> ticket created

[20:14] *** Geth__ joined
[20:18] *** Geth left
[20:21] *** Geth__ left
[20:21] *** Geth joined
[21:01] <disbot6> <librasteve> laggyluke: [Coke] has asked for some help ... its late here (UK) but I will try and help ... maybe tomorrow

[21:05] <disbot6> <librasteve> laggyluke: please can you change to ca => Cro::TLS::Insecure, ?

[21:05] <disbot6> <librasteve> and try that

[21:09] <disbot6> <librasteve> hmmm - not that

[21:31] <disbot6> <librasteve> laggyluke: I am posting some ideas on the GH issue ... suggest we interact over there for now...

[21:57] <laggyluke> ok...

