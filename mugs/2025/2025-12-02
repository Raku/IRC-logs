[01:21] <Geth> ¦ Terminal-Widgets/main: 1a2f2a60bd | (Geoffrey Broadwell)++ | lib/Terminal/Widgets/Scrollable.rakumod

[01:21] <Geth> ¦ Terminal-Widgets/main: Fix off-by-one error in set-x/y-scroll

[01:21] <Geth> ¦ Terminal-Widgets/main: 

[01:21] <Geth> ¦ Terminal-Widgets/main: It's feels odd to have the *entire* visible content scroll away, so

[01:21] <Geth> ¦ Terminal-Widgets/main: make sure that the last line/cell remain visible.  Yes, with ragged

[01:21] <Geth> ¦ Terminal-Widgets/main: text you could end up scrolling to the lower right corner and not

[01:21] <Geth> ¦ Terminal-Widgets/main: being able to see anything (because the very last cell was empty),

[01:21] <Geth> ¦ Terminal-Widgets/main: but I'm not trying to fight that particular battle right now.

[01:21] <Geth> ¦ Terminal-Widgets/main: review: https://github.com/japhb/Terminal-Widgets/commit/1a2f2a60bd

[01:21] <japhb> Commit comment longer than diff, wheee

[01:21] <japhb> So that's the easy bug down.

[01:23] <japhb> Have been looking at the empty directory bug.  I was looking for some difference between the KB and mouse paths in terms of *actually setting the expanded state*, and I haven't found anything obvious yet.  I did test with the mouse and noticed that it only turned the arrow on the *second* click, which indicates I've got some sort of refresh bug having to do with empty directories.

[01:23] <japhb> Grrrr.

[03:02] <japhb> Today's yak is apparently "better debugging for event processing"

[07:21] <Geth> ¦ Terminal-Widgets/main: 10 commits pushed by (Geoffrey Broadwell)++

[07:21] <Geth> ¦ Terminal-Widgets/main: review: https://github.com/japhb/Terminal-Widgets/compare/1a2f2a60bd35...ba4fb76893bd

[07:21] <japhb> So ... massive improvement to debugging, and finally a fix for the "empty dir wouldn't expand" bug.

[08:51] *** librasteve_ joined
[15:41] *** librasteve_ left
[22:34] *** librasteve_ joined
[23:48] <japhb> Keyboard event pile up when CursorDown held confirmed.  Total time to respond to each incoming key event was 35-55ms when used on a tree with 38844 nodes.  My keyboard repeat rate is set fairly close to the "fast" end of the slider, but annoyingly that doesn't actually say *exactly how fast it is*.  I'm going to assume more than 20/s, possibly more than 30/s, which would make sense for pile up.

[23:50] <japhb> That was under VTE/7600.  Going to check if the time to respond is the same on Ghostty 1.2.2, which I think is the fastest terminal I have access to, which will hopefully tell me if the terminal or the Raku code are limiting performance here.

[23:55] <japhb> Ghostty is a few ms faster on average to respond to each event than VTE, and generally seems more stable time-wise.  Still, that only gained like 10-15% performance, so most likely the Raku code is the perf limiter here.

[23:56] <japhb> (And yes, pile up still happened under Ghostty.)

