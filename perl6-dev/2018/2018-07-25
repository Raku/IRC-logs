[00:26] <AlexDaniel> hmmmmmm https://github.com/rakudo/rakudo/issues/2126#issuecomment-407591812

[00:34] <[Coke]> nqp repo is showing a potential vuln.

[00:35] <timotimo> in the javascripd code, yeah

[00:35] <timotimo> surely pmurias has already seen it, too

[00:35] <[Coke]> ^^pmurias, maybe?

[00:37] *** fake_space_whale joined
[00:46] <Geth> Â¦ nqp: AlexDaniel assigned to pmurias Issue Flagged as vulnerable https://github.com/perl6/nqp/issues/437

[02:08] *** mst joined
[02:18] <Geth> Â¦ nqp/revert-485-unfudge-test: 1b1ddea13e | é™ˆæ¢“ç«‹++ (committed using GitHub Web editor) | 0 files

[02:18] <Geth> Â¦ nqp/revert-485-unfudge-test: Revert "[MoarVM Bump] Brings 4 commits"

[02:18] <Geth> Â¦ nqp/revert-485-unfudge-test: 

[02:18] <Geth> Â¦ nqp/revert-485-unfudge-test: This reverts commit 3a4cbe04237a7eae15c045385f43a178b470d74f.

[02:18] <Geth> Â¦ nqp/revert-485-unfudge-test: review: https://github.com/perl6/nqp/commit/1b1ddea13e

[02:19] <Geth> Â¦ nqp/revert-485-unfudge-test: ce177f5cb1 | é™ˆæ¢“ç«‹++ (committed using GitHub Web editor) | t/nqp/019-file-ops.t

[02:19] <Geth> Â¦ nqp/revert-485-unfudge-test: Revert "unfudge test, co #274 (#485)"

[02:19] <Geth> Â¦ nqp/revert-485-unfudge-test: 

[02:19] <Geth> Â¦ nqp/revert-485-unfudge-test: This reverts commit 15c9774719f98c0c04252a3a1712b35c84b29931.

[02:19] <Geth> Â¦ nqp/revert-485-unfudge-test: review: https://github.com/perl6/nqp/commit/ce177f5cb1

[02:19] <Geth> Â¦ nqp: TisonKun++ created pull request #490: Revert "unfudge test, co #274"

[02:19] <synopsebot> NQP#274 [open]: https://github.com/perl6/nqp/issues/274 t/nqp/19-file-ops.t failure in pre-2016.01

[02:19] <Geth> Â¦ nqp: review: https://github.com/perl6/nqp/pull/490

[02:22] *** ufobat_ joined
[02:26] *** ufobat left
[02:27] <Geth> Â¦ nqp: aff38355c1 | é™ˆæ¢“ç«‹++ (committed using GitHub Web editor) | t/nqp/019-file-ops.t

[02:27] <Geth> Â¦ nqp: Fudge test 019-file-ops.t

[02:27] <Geth> Â¦ nqp: 

[02:27] <Geth> Â¦ nqp: Fails when MoarVM/MoarVM test with option

[02:27] <Geth> Â¦ nqp: 

[02:27] <Geth> Â¦ nqp: or `MVM_OPTIONS="--no-jit" CC='gcc'`

[02:27] <Geth> Â¦ nqp: or `MVM_OPTIONS="" CC='gcc'`

[02:27] <Geth> Â¦ nqp: or `MVM_OPTIONS="--no-jit" CC='clang'`

[02:27] <Geth> Â¦ nqp: or `MVM_OPTIONS="" CC='clang'`

[02:27] <Geth> Â¦ nqp: 

[02:28] <Geth> Â¦ nqp: would not unfudge it before a certainly fix.

[02:28] <Geth> Â¦ nqp: review: https://github.com/perl6/nqp/commit/aff38355c1

[02:30] *** dct left
[03:15] *** stmuk joined
[03:17] *** stmuk_ left
[04:40] *** squashable6 joined
[05:59] *** fake_space_whale left
[06:05] *** benjikun left
[06:05] *** MasterDuke left
[06:22] <[Tux]> Rakudo version 2018.06-247-ga71e370bb - MoarVM version 2018.06-318-gb8f9f85f2

[06:22] <[Tux]> csv-test-xs-20      0.457 -  0.465

[06:22] <[Tux]> test-t --race       1.018 -  1.048

[06:22] <[Tux]> csv-ip5xs           1.189 -  1.271

[06:22] <[Tux]> test-t              2.302 -  2.397

[06:22] <[Tux]> csv-ip5xs-20        8.066 -  8.892

[06:22] <[Tux]> test               10.300 - 11.018

[06:22] <[Tux]> test-t-20 --race   14.084 - 14.187

[06:22] <[Tux]> csv-parser         25.600 - 25.602

[06:22] <[Tux]> test-t-20          40.866 - 44.630

[06:51] *** robertle joined
[08:10] *** lizmat left
[08:23] *** lizmat joined
[08:25] <lizmat> Files=1246, Tests=76406, 382 wallclock secs (16.32 usr  5.78 sys + 2682.04 cusr 264.13 csys = 2968.27 CPU)

[08:48] <Geth> Â¦ nqp/nqp-in-the-browser: 870ad0844c | (PaweÅ‚ Murias)++ | 3 files

[08:48] <Geth> Â¦ nqp/nqp-in-the-browser: [js] Add .npmignore, bump versions in package.json after releases

[08:48] <Geth> Â¦ nqp/nqp-in-the-browser: review: https://github.com/perl6/nqp/commit/870ad0844c

[09:01] <Geth> Â¦ nqp/master: 51 commits pushed by pmurias++, (PaweÅ‚ Murias)++

[09:01] <Geth> Â¦ nqp/master: review: https://github.com/perl6/nqp/compare/aff38355c13e...2434978a639c

[09:11] *** pmurias joined
[09:50] *** timotimo left
[09:50] *** timotimo joined
[11:38] *** robertle left
[11:40] *** robertle joined
[11:59] *** robertle left
[12:10] *** robertle joined
[12:24] *** diakopter left
[13:15] <Geth> Â¦ nqp/truffle: 131819e902 | (PaweÅ‚ Murias)++ | src/vm/jvm/runtime/org/perl6/nqp/truffle/nodes/variables/NQPBindLocalVariableNode.java

[13:15] <Geth> Â¦ nqp/truffle: [truffle] Cleanup by removing unneeded code

[13:15] <Geth> Â¦ nqp/truffle: review: https://github.com/perl6/nqp/commit/131819e902

[13:15] <Geth> Â¦ nqp/truffle: 9453e7fe5b | (PaweÅ‚ Murias)++ | 11 files

[13:15] <Geth> Â¦ nqp/truffle: [truffle] Implement native types on variables

[13:15] <Geth> Â¦ nqp/truffle: review: https://github.com/perl6/nqp/commit/9453e7fe5b

[13:15] <Geth> Â¦ nqp/truffle: e300cac81e | (PaweÅ‚ Murias)++ | src/vm/jvm/runtime/org/perl6/nqp/truffle/nodes/expression/NQPSmartIntifyNode.java

[13:15] <Geth> Â¦ nqp/truffle: [truffle] Use @Specialization in NQPSmartIntify

[13:15] <Geth> Â¦ nqp/truffle: review: https://github.com/perl6/nqp/commit/e300cac81e

[13:41] *** [Tux] joined
[13:48] *** ufobat_ left
[14:31] *** AlexDaniel joined
[14:31] *** AlexDaniel` joined
[14:33] *** ZofBot joined
[14:33] *** ChanServ sets mode: +v ZofBot

[14:35] *** AlexDaniel left
[14:36] *** AlexDaniel joined
[14:38] *** AlexDaniel left
[14:38] *** AlexDaniel joined
[14:51] *** fake_space_whale joined
[14:53] <Geth> Â¦ nqp/truffle: d25e35c901 | (PaweÅ‚ Murias)++ | 12 files

[14:53] <Geth> Â¦ nqp/truffle: [truffle] Use the double to string conversion from graal.js

[14:53] <Geth> Â¦ nqp/truffle: review: https://github.com/perl6/nqp/commit/d25e35c901

[15:14] <pmurias> .tell MasterDuke I replace our num->str conversion with a faster one from the truffle js implementation, it would be interesting how our performance now compares

[15:14] <yoleaux> pmurias: I'll pass your message to MasterDuke.

[15:24] *** robertle left
[15:34] *** skids joined
[15:53] *** ufobat_ joined
[15:53] *** robertle joined
[16:26] *** fake_space_whale left
[16:45] <[Tux]> Rakudo version 2018.06-247-ga71e370bb - MoarVM version 2018.06-318-gb8f9f85f2

[16:45] <[Tux]> csv-test-xs-20      0.449 -  0.523

[16:45] <[Tux]> test-t --race       0.974 -  1.080

[16:45] <[Tux]> csv-ip5xs           1.292 -  1.523

[16:45] <[Tux]> test-t              2.274 -  2.284

[16:45] <[Tux]> csv-ip5xs-20        8.649 -  9.453

[16:45] <[Tux]> test                9.949 - 10.215

[16:45] <[Tux]> test-t-20 --race   13.471 - 14.361

[16:45] <[Tux]> csv-parser         25.525 - 26.417

[16:45] <[Tux]> test-t-20          40.647 - 43.801

[16:46] <[Tux]> main reason to re-post is a reboot after some system updates

[16:51] <lizmat> [Tux]++

[17:50] *** Ven`` joined
[17:55] *** Ven`` left
[17:57] *** Ven`` joined
[18:14] *** Ven`` left
[18:18] *** Ven`` joined
[18:22] *** Ven`` left
[19:25] *** Ven`` joined
[19:35] *** Ven`` left
[20:11] *** MasterDuke joined
[20:22] <MasterDuke> jnthn, pmurias, timotimo: that code i was timing earlier with moar/jmv/truffle is now fastest (excluding startup) on truffle after pmurias++ recent commits

[20:22] <yoleaux> 15:14Z <pmurias> MasterDuke: I replace our num->str conversion with a faster one from the truffle js implementation, it would be interesting how our performance now compares

[20:23] <timotimo> nice

[20:27] <MasterDuke> it is more variable though (the fast runs are faster, but the slow runs are slower)

[20:28] <timotimo> oh, mhm

[20:28] <MasterDuke> oh, that was for untyped, let me re-run it with typed variables

[20:31] *** robertle left
[20:33] <MasterDuke> using typed variables makes moar faster (from 3.1s down to 1.9s), but doesn't change jmv or truffle

[20:35] <timotimo> probably still NYI on truffle?

[20:36] <timotimo> but it surprises me a bit that it doesn't make our jvm code faster

[20:36] <timotimo> i have got to go take a shower, the temperature & humidity is getting unbearable

[20:37] *** literal left
[20:39] *** literal joined
[20:42] <MasterDuke> his most recent commits did implement them for truffle

[20:44] <pmurias> timotimo: it's a bit suprising too for me

[20:45] <MasterDuke> pmurias: i guess it was the faster num stringification that made the difference

[20:45] <pmurias> timotimo: I'll have to brush up on assembly and see how the JVM optimizes it

[20:45] <pmurias> MasterDuke: the stringification was the slow part for sure

[20:48] <MasterDuke> same for moarvm. perf shows dtoa_grisu3 the most expensive routine at 30%, then MVM_coerce_smart_numify at 9.3%, and then MVM_coerce_n_s at 5%

[20:53] * MasterDuke wonders if that java profiling tool can actually give useful info for truffle/nqp code

[20:53] <Geth> Â¦ rakudo: 434ede491d | (Elizabeth Mattijsen)++ | src/core/Routine.pm6

[20:53] <Geth> Â¦ rakudo: Make sure that wrapped onlystar routines are not optimized away

[20:53] <Geth> Â¦ rakudo: 

[20:53] <Geth> Â¦ rakudo: If a proto with an onlystar is wrapped, it still kept the "onlystar"

[20:53] <Geth> Â¦ rakudo: flag, which means optimizers can optimize it away.  This commit always

[20:53] <Geth> Â¦ rakudo: resets the flag, regardless of whether it was set or not.

[20:53] <Geth> Â¦ rakudo: review: https://github.com/rakudo/rakudo/commit/434ede491d

[20:57] *** skids left
[20:57] <pmurias> MasterDuke: you can see how the code is optimized using the ideal graph visualizer: http://ssw.jku.at/General/Staff/TW/igv.html

[20:58] <pmurias> although my laptop screen is too small to read the graphs comfortably

[20:59] <pmurias> https://github.com/graalvm/simplelanguage/blob/master/sl#L62 too pass stuff to the igv

[20:59] <pmurias> MasterDuke: I skimmed through the assembly that's generated for our benchmark

[21:00] <MasterDuke> i'm trying to remember what the tool was i was experimenting with a little while ago (trying to profile the jvm rakudo build)

[21:00] <pmurias> and it seems the only call we have is to the coercion

[21:01] <MasterDuke> ah, visualvm i think...

[21:02] <pmurias> spending time on optimizing the num to str conversion at this point doesn't seem to be the best use of time :)

[21:02] <MasterDuke> pmurias: for sure

[21:03] <pmurias> I think it will be easier to beat moar on complex stuff rather then a simple loop where it passes stuff to a C routine :)

[21:22] <lizmat> .tell moritz https://en.wikipedia.org/wiki/Perl_6 points to https://leanpub.com/perl6regex/ which shows work in progress ??

[21:22] <yoleaux> lizmat: I'll pass your message to moritz.

[21:28] <moritz> lizmat: both should link to https://www.apress.com/us/book/9781484232279 instead

[21:28] <yoleaux> 21:22Z <lizmat> moritz: https://en.wikipedia.org/wiki/Perl_6 points to https://leanpub.com/perl6regex/ which shows work in progress ??

[21:28] <lizmat> ok, will fix

[21:30] <MasterDuke> pmurias: btw, i just repeated the commands to build a native image for substratevm and it does create a lowercase org.perl6.nqp.truffle.svm.truffle6

[21:32] <lizmat> moritz: fixed

[21:33] <moritz> lizmat: thanks

[21:34] <moritz> lizmat: I fixed the publication year (it was published yesteryear, by a slim margin :D)

[21:34] <lizmat> ah, ok  :-)

[21:35] <moritz> like, around Dec 22 or so

[21:36] <MasterDuke> pmurias: interesting, the image (for that bench code) has a longer total running time, but has virtually no startup time

[22:32] *** benjikun joined
[22:35] *** pmurias left
[23:20] *** ufobat_ left
