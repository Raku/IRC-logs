[00:20] <Geth> ¦ rakudo/post-release: 43b9c82945 | (Zoffix Znet)++ | 3 files

[00:20] <Geth> ¦ rakudo/post-release: Make `$ where Type1|Type2|Type…` typecheck ~8x faster

[00:20] <Geth> ¦ rakudo/post-release:

[00:20] <Geth> ¦ rakudo/post-release: Rake the `where` code block for single "any" Junction with

[00:20] <Geth> ¦ rakudo/post-release: type objects only and rewrite it into multiple nqp::istype's

[00:20] <Geth> ¦ rakudo/post-release: right in the ParamTypeCheck op.

[00:20] <Geth> ¦ rakudo/post-release: review: https://github.com/rakudo/rakudo/commit/43b9c82945

[00:22] <Geth> ¦ roast/post-release: 17b2e0bc54 | (Zoffix Znet)++ | S12-subset/subtypes.t

[00:22] <Geth> ¦ roast/post-release: Cover `$ where Type1|Type2|Type…` typecheck

[00:22] <Geth> ¦ roast/post-release:

[00:22] <Geth> ¦ roast/post-release: Covers https://github.com/rakudo/rakudo/commit/43b9c82945

[00:22] <Geth> ¦ roast/post-release: review: https://github.com/perl6/roast/commit/17b2e0bc54

[00:23] <Geth> ¦ rakudo/post-release: 9 commits pushed by (Elizabeth Mattijsen)++, (Itsuki Toyota)++, (Zoffix Znet)++

[00:23] <Geth> ¦ rakudo/post-release: ddbf07e8c8 | Make infix:<does> and X::Does::TypeObject also take nameds

[00:23] <Geth> ¦ rakudo/post-release: 577808ecbd | Don't need to initialized native ints to 0

[00:23] <Geth> ¦ rakudo/post-release: 7537f89983 | Delete an iteration of $<version> from statement_control:sym<need>

[00:23] <Geth> ¦ rakudo/post-release: 0cdd82a21b | Make "need" enable to throw an exception when it detects version token

[00:23] <Geth> ¦ rakudo/post-release: 0a73f19a3e | Recommend "use" instead of "need"

[00:23] <Geth> ¦ rakudo/post-release: 4d5e097af1 | Add tests for "need 6.0" and "need v6.0"

[00:23] <Geth> ¦ rakudo/post-release: fd44f70244 | Merge pull request #1402 from titsuki/fix-need

[00:23] <Geth> ¦ rakudo/post-release: d0be53a1ec | Rework &dd low-level object fixups

[00:23] <Geth> ¦ rakudo/post-release: f8c2b55ec1 | Merge branch 'master' into post-release

[00:23] <Geth> ¦ rakudo/post-release: review: https://github.com/rakudo/rakudo/compare/43b9c82945...f8c2b55ec1

[00:41] <travis-ci> Rakudo build passed. Elizabeth Mattijsen 'Micro-optimize exit_handler, part #4

[00:41] <travis-ci> https://travis-ci.org/rakudo/rakudo/builds/328445329 https://github.com/rakudo/rakudo/compare/e9c9dc469549...21bc5916c0de

[00:46] <timotimo> seeing the old "larry wall speaks at google" video; what used to be "suppose points" in the grammar are now worries?

[08:17] <Geth> ¦ nqp: d93f6ed700 | (Zoffix Znet)++ | tools/build/MOAR_REVISION

[08:17] <Geth> ¦ nqp: [MoarVM Bump] Brings 4 commits

[08:17] <Geth> ¦ nqp:

[08:17] <Geth> ¦ nqp: MoarVM bump brought: https://github.com/MoarVM/MoarVM/compare/2017.12.1-30-ged7c1234...2017.12.1-34-g4a0a912

[08:17] <Geth> ¦ nqp: 4a0a912 New spesh-bisect.pl tool

[08:17] <Geth> ¦ nqp: 7ea0802 Fix off-by-one error in uninline

[08:17] <Geth> ¦ nqp: 56c03d9 Merge pull request #780 from Kaiepi/compilers

[08:17] <Geth> ¦ nqp: 28eaf97 Try to use egcc when compiling on OpenBSD

[08:17] <Geth> ¦ nqp: review: https://github.com/perl6/nqp/commit/d93f6ed700

[08:17] <Geth> ¦ nqp: version bump brought these changes: https://github.com/MoarVM/MoarVM/compare/2017.12.1-30-ged7c1234...2017.12.1-34-g4a0a912

[08:17] <Geth> ¦ rakudo: bdbfdff257 | (Zoffix Znet)++ | tools/build/NQP_REVISION

[08:17] <Geth> ¦ rakudo: [NQP Bump] Brings 8 commits

[08:17] <Geth> ¦ rakudo:

[08:17] <Geth> ¦ rakudo: NQP bump brought: https://github.com/perl6/nqp/compare/2017.12-55-ga620559a7...2017.12-63-gd93f6ed

[08:17] <Geth> ¦ rakudo: d93f6ed [MoarVM Bump] Brings 4 commits

[08:17] <Geth> ¦ rakudo: 4e647a7 Implement QAST::Node.annotate_self

[08:17] <Geth> ¦ rakudo: 88fbd34 Remove trailing whitespace

[08:17] <Geth> ¦ rakudo: d20574d Document if/unless return condition when no else

[08:17] <Geth> ¦ rakudo: <…commit message has 10 more lines…>

[08:17] <Geth> ¦ rakudo: review: https://github.com/rakudo/rakudo/commit/bdbfdff257

[08:17] <Geth> ¦ rakudo: version bump brought these changes: https://github.com/perl6/nqp/compare/2017.12-55-ga620559a7...2017.12-63-gd93f6ed

[08:25] <[Tux]> Rakudo version 2017.12-241-g2ac1ceaa1 - MoarVM version 2017.12.1-32-g56c03d99c

[08:25] <[Tux]> csv-test-xs-20      0.447 -  0.477

[08:25] <[Tux]> csv-ip5xs           1.120 -  1.141

[08:25] <[Tux]> test-t --race       1.163 -  1.180

[08:25] <[Tux]> test-t              2.789 -  2.922

[08:25] <[Tux]> test               11.376 - 12.049

[08:25] <[Tux]> csv-parser         12.621 - 12.852

[08:25] <[Tux]> csv-ip5xs-20       13.331 - 13.566

[08:26] <[Tux]> test-t-20 --race   18.832 - 20.065

[08:26] <[Tux]> test-t-20          50.953 - 52.105

[08:26] <lizmat> Files=1232, Tests=76024, 327 wallclock secs (14.78 usr  5.31 sys + 2260.39 cusr 229.89 csys = 2510.37 CPU)

[08:29] <Geth> ¦ rakudo: 64803b0af8 | (Zoffix Znet)++ | src/Perl6/World.nqp

[08:29] <Geth> ¦ rakudo: Alternate fix for colonpair longname warnings

[08:29] <Geth> ¦ rakudo:

[08:29] <Geth> ¦ rakudo: Original fix[^1] causes breakage on JVM[^2]. Since I don't fully

[08:29] <Geth> ¦ rakudo: know whether not installing a block is safe, I reverted that and

[08:29] <Geth> ¦ rakudo: instead simply mark the inserted chunk as wanted, to avoid the

[08:29] <Geth> ¦ rakudo: warning.

[08:29] <Geth> ¦ rakudo:

[08:29] <Geth> ¦ rakudo: [1] https://github.com/rakudo/rakudo/commit/c6b7012a9c61133

[08:29] <Geth> ¦ rakudo: [2] https://rt.perl.org/Ticket/Display.html?id=131305#txn-1523921

[08:29] <Geth> ¦ rakudo: review: https://github.com/rakudo/rakudo/commit/64803b0af8

[08:33] <TimToady> timotimo: STD had a "suppose" hypothetical construct, but hypotheticals are largely limited to <before> and backtracking in rakudo

[08:34] <TimToady> "suppose" was "try parsing with this assumption, but throw everything away when you're done"

[09:09] <Geth> ¦ rakudo: cf15435575 | (Elizabeth Mattijsen)++ | 4 files

[09:09] <Geth> ¦ rakudo: Remove src/core/UInt64.pm

[09:09] <Geth> ¦ rakudo:

[09:09] <Geth> ¦ rakudo: This appears to be a leftover from at about 7 years ago.  It created a

[09:09] <Geth> ¦ rakudo: subset that was not being used anywhere and a constant that was needed

[09:09] <Geth> ¦ rakudo: for Rat/FatRat.  UInt64 (not to be confused with uint64) is not documented

[09:09] <Geth> ¦ rakudo: anywhere and not tested.  Moved the constant to src/core/Rat and changed

[09:09] <Geth> ¦ rakudo: it into a real constant.

[09:09] <Geth> ¦ rakudo:

[09:09] <Geth> ¦ rakudo: Kudos to Andrew Shitov for spotting this:

[09:09] <Geth> ¦ rakudo:   https://perl6.online/2018/01/15/26-native-integers-and-uint-in-perl-6/

[09:09] <Geth> ¦ rakudo: review: https://github.com/rakudo/rakudo/commit/cf15435575

[11:18] <Zoffix> .tell AlexDaniel I reverted that questionable commit I mentioned earlier. Also did a toaster run: https://toast.perl6.party/

[11:18] <yoleaux> Zoffix: I'll pass your message to AlexDaniel.

[11:18] <AlexDaniel> .

[11:18] <yoleaux> 11:18Z <Zoffix> AlexDaniel: I reverted that questionable commit I mentioned earlier. Also did a toaster run: https://toast.perl6.party/

[11:18] <AlexDaniel> oh, thanks!

[11:19] <AlexDaniel> drive-by development :)

[11:24] * AlexDaniel looks at the results

[11:28] <AlexDaniel> wow, X11::Xlib::Raw tests pass but it fails to *install*.

[11:30] <moritz> that's why clever people put a "zef install ." into their travis config

[11:35] <AlexDaniel> that wouldn't help at all, last commit Mar 27, 2017 :)

[11:35] <AlexDaniel> in this case I mean

[11:40] <AlexDaniel> bisect: old=2017.12 use lib ‘data/all-modules/github/p6-css/CSS-Grammar-p6/lib’; use CSS::Grammar::Actions;

[11:40] <bisectable6> AlexDaniel, Bisecting by exit code (old=2017.12 new=cf15435). Old exit code: 0

[11:40] <bisectable6> AlexDaniel, bisect log: https://gist.github.com/e8c4533a349a0f442a81017d11211de4

[11:40] <bisectable6> AlexDaniel, (2018-01-15) https://github.com/rakudo/rakudo/commit/eeb3cc726adac4735c613f7dbbb85075528ac61d

[11:42] <AlexDaniel> c: eeb3cc726ada^,eeb3cc726ada use lib ‘data/all-modules/github/p6-css/CSS-Grammar-p6/lib’; use CSS::Grammar::Actions;

[11:42] <committable6> AlexDaniel, ¦eeb3cc726ada^: «» ¦eeb3cc7: «===SORRY!===␤P6opaque: no such attribute '$!storage' on type CSSValue in a Hash when trying to bind a value␤ «exit code = 1»»

[11:45] <jnthn> Any way to get the --ll-exception output?

[11:45] <jnthn> That error makes no sense, looking at the code in that commit

[11:47] <AlexDaniel> jnthn: https://gist.github.com/AlexDaniel/da5ec5b8fad3869785abf4659270c786

[11:48] <jnthn> Odd..I wonder if the module redefines the names Map and or Hash in a lexical scope, though

[11:48] <AlexDaniel> I'll move on with the list of failed modules for now, so here's a ticket: https://github.com/rakudo/rakudo/issues/1407

[11:48] <jnthn> Will toss :setting-only on those find_symbol lookups; they should probably have had them in the first place.

[11:50] <AlexDaniel> Zoffix++ for running toaster, I usually do it 2 days before the release which is arguably too late :)

[11:55] <pmurias> is an 'Int' constraint in setting code a performance penalty or a benefit?

[11:55] <pmurias> we have erroneusly added int constraints in Date and I'm not sure if should remove them or turn them into Int?

[11:56] <timotimo> no impact, we already check for Any everywhere anyway

[11:58] <pmurias> so I should use an Int constraint?

[11:58] <timotimo> if you want an Int, then yes :)

[12:07] <AlexDaniel> bisect: old=2017.12 https://gist.githubusercontent.com/AlexDaniel/fc1815c5b628e9921c6d58dae89e4862/raw/5094a59144baf67ac755f8bc108e89fb04d5086b/06-cmd.t

[12:07] <bisectable6> AlexDaniel, Successfully fetched the code from the provided URL.

[12:07] <bisectable6> AlexDaniel, Bisecting by exit code (old=2017.12 new=cf15435). Old exit code: 0

[12:08] <bisectable6> AlexDaniel, bisect log: https://gist.github.com/da2b802b17459298f2362e5e5cf2bcbf

[12:08] <bisectable6> AlexDaniel, (2017-12-30) https://github.com/rakudo/rakudo/commit/ad684de383bb0c0ff051d7b0901583a9b5c2e398

[12:11] <AlexDaniel> hmm changing << $cmd >> to ($cmd,) makes it work

[12:13] <AlexDaniel> mch: my $cmd = ‘a’; multi sub getopt(@args) {}; getopt(« $cmd »)

[12:13] <committable6> AlexDaniel, ¦2015.12: «» ¦HEAD(cf15435): «Cannot resolve caller getopt(Str); none of these signatures match:␤    (@args)␤  in block <unit> at /tmp/Z3lZxJOKGn line 1␤␤ «exit code = 1»»

[12:14] <AlexDaniel> c: ad684de383bb^,ad684de383bb my $cmd = ‘a’; multi sub getopt(@args) {}; getopt(« $cmd »)

[12:14] <committable6> AlexDaniel, ¦ad684de383bb^: «» ¦ad684de: «Cannot resolve caller getopt(Str); none of these signatures match:␤    (@args)␤  in block <unit> at /tmp/t2ngYdxMno line 1␤␤ «exit code = 1»»

[12:15] <Geth> ¦ rakudo: tbrowder++ created pull request #1408: Remove file src/Perl6/DebugPod.nqp

[12:15] <Geth> ¦ rakudo: review: https://github.com/rakudo/rakudo/pull/1408

[12:23] <AlexDaniel> would be nice to have some comments on https://github.com/rakudo/rakudo/issues/1409

[13:39] <AlexDaniel> jnthn: fwiw there's another ticket that you may be interested in, but there's not much info about it at this point: https://github.com/rakudo/rakudo/issues/1410

[13:41] <jnthn> I'll wait a bit to see if there's a golf

[13:42] <jnthn> Will patch the earlier on this afternoon

[14:07] <Geth> ¦ rakudo: efdbfecad0 | (Zoffix Znet)++ | src/Perl6/World.nqp

[14:07] <Geth> ¦ rakudo: Only look in the setting when we want core symbols

[14:07] <Geth> ¦ rakudo:

[14:07] <Geth> ¦ rakudo: Phixes https://github.com/rakudo/rakudo/issues/1407

[14:07] <Geth> ¦ rakudo: review: https://github.com/rakudo/rakudo/commit/efdbfecad0

[14:07] <Geth> ¦ roast: 960e9060ec | (Zoffix Znet)++ | MISC/bug-coverage.t

[14:07] <Geth> ¦ roast: Test enums with core symbol names don't explode unexpectedly

[14:07] <Geth> ¦ roast:

[14:07] <Geth> ¦ roast: Closes https://github.com/rakudo/rakudo/issues/1407

[14:07] <Geth> ¦ roast: review: https://github.com/perl6/roast/commit/960e9060ec

[14:07] <AlexDaniel> oh, now I understad why it's “phixes” :D

[14:07] <AlexDaniel> so that github doesn't auto-close the issue :D

[14:08] <jnthn> ah, Zoffix++ beat me to the fix :)

[14:22] <Geth> ¦ rakudo: 354a384847 | (Zoffix Znet)++ | src/Perl6/World.nqp

[14:22] <Geth> ¦ rakudo: Do not crash on parametarization of DefiniteHOWs

[14:22] <Geth> ¦ rakudo:

[14:22] <Geth> ¦ rakudo: Phixes https://github.com/rakudo/rakudo/issues/1411

[14:22] <Geth> ¦ rakudo:

[14:22] <Geth> ¦ rakudo: Before DefiniteHOW coercers, parametarization of DefiniteHOWs

[14:22] <Geth> ¦ rakudo: was silently ignored. Revert to that behaviour until it can

[14:23] <Geth> ¦ rakudo: be properly implemented. See

[14:23] <Geth> ¦ rakudo: https://github.com/rakudo/rakudo/issues/1412

[14:23] <Geth> ¦ rakudo: review: https://github.com/rakudo/rakudo/commit/354a384847

[14:24] <Geth> ¦ roast: 5394ea5a9e | (Zoffix Znet)++ | MISC/bug-coverage.t

[14:24] <Geth> ¦ roast: Test Parametarization of DefiniteHOWs does not cry about coercers

[14:24] <Geth> ¦ roast:

[14:24] <Geth> ¦ roast: Closes https://github.com/rakudo/rakudo/issues/1411

[14:24] <Geth> ¦ roast: review: https://github.com/perl6/roast/commit/5394ea5a9e

[14:32] <Geth> ¦ roast: db9872d665 | (Zoffix Znet)++ (committed using GitHub Web editor) | MISC/bug-coverage.t

[14:32] <Geth> ¦ roast: Lists cannot be parametarized

[14:32] <Geth> ¦ roast: review: https://github.com/perl6/roast/commit/db9872d665

[14:35] <AlexDaniel> I'll be away for the rest of the day. I drafted some rakudo tickets for all the issues from toaster

[14:36] <AlexDaniel> releasable6: next

[14:36] <releasable6> AlexDaniel, Next release in 4 days and ≈4 hours. No blockers. Unknown changelog format

[14:40] <AlexDaniel> releasable6: next

[14:40] <releasable6> AlexDaniel, Next release in 4 days and ≈4 hours. Blockers: https://github.com/rakudo/rakudo/issues?q=is:issue+is:open+label:%22%E2%9A%A0+blocker+%E2%9A%A0%22. Unknown changelog format

[15:21] <Geth> ¦ rakudo: 1b21292e2e | (Tom Browder)++ | 3 files

[15:21] <Geth> ¦ rakudo: Remove file src/Perl6/DebugPod.nqp

[15:21] <Geth> ¦ rakudo:

[15:21] <Geth> ¦ rakudo: The file is considered unneeded at the moment.

[15:21] <Geth> ¦ rakudo: review: https://github.com/rakudo/rakudo/commit/1b21292e2e

[15:21] <Geth> ¦ rakudo: 20354470f5 | (Elizabeth Mattijsen)++ (committed using GitHub Web editor) | 3 files

[15:21] <Geth> ¦ rakudo: Merge pull request #1408 from tbrowder/delete-debugpod.nqp

[15:21] <Geth> ¦ rakudo:

[15:21] <Geth> ¦ rakudo: Remove file src/Perl6/DebugPod.nqp

[15:21] <Geth> ¦ rakudo: review: https://github.com/rakudo/rakudo/commit/20354470f5

[15:36] <Geth> ¦ rakudo: 6977680bd9 | (Elizabeth Mattijsen)++ | src/core/Rat.pm

[15:36] <Geth> ¦ rakudo: Fixed comment, ashitov++

[15:36] <Geth> ¦ rakudo: review: https://github.com/rakudo/rakudo/commit/6977680bd9

[15:37] <moritz> ^w

[17:03] <Geth> ¦ roast: d186368c0e | (Elizabeth Mattijsen)++ (committed using GitHub Web editor) | S32-io/IO-Socket-Async-UDP.t

[17:03] <Geth> ¦ roast: Fix typo in message

[17:03] <Geth> ¦ roast: review: https://github.com/perl6/roast/commit/d186368c0e

[17:30] <[Coke]> star: use IO::String;

[17:30] <camelia> star-m 2017.07: OUTPUT: «===SORRY!===␤P6M Merging GLOBAL symbols failed: duplicate definition of symbol Handle␤»

[17:30] <[Coke]> O_o;

[17:31] <[Coke]> I've asked this before, but should this generate a warning on stderr:

[17:31] <[Coke]> (well, something like this)

[17:31] <[Coke]> use IO::String; my $*ERR = IO::String.new; my $a; my $a;

[17:32] <[Coke]> you get a potential difficulty without the $*ERR shenanigans, but the compiler doesn't know about $*ERR, only stderr, so the warning still happens.

[17:33] <[Coke]> (that part of the compiler, anyway)

[17:35] <[Coke]> (this one is tricky because I think the difficulties are emitted at the end of the compile, but that is still before runtime $*ERR changes; the more reasonable one is when that's in an EVAL, which happened after the runtime $*ERR change.

[18:12] <Zoffix> m: use nqp; my $*ERR := open :w, $*SPEC.devnull; my $e := nqp::newexception(); nqp::setmessage($e, "meow"); warn "meow"; nqp::throw($e)

[18:12] <camelia> rakudo-moar 6977680bd: OUTPUT: «open is disallowed in restricted setting␤  in sub restricted at src/RESTRICTED.setting line 1␤  in sub open at src/RESTRICTED.setting line 9␤  in block <unit> at <tmp> line 1␤␤»

[18:12] <Zoffix> c: HEAD use nqp; my $*ERR := open :w, $*SPEC.devnull; my $e := nqp::newexception(); nqp::setmessage($e, "meow"); warn "meow"; nqp::throw($e)

[18:12] <committable6> Zoffix, ¦HEAD(6977680): «meow␤  in block <unit> at /tmp/C688ChiN9Q line 1␤␤ «exit code = 1»»

[18:13] <Zoffix> [Coke]: briefly reading the code, looks like "Potential difficulties" throwage happens in the machinery that doesn't care about $*ERR; like ^ nqp::throw above

[18:15] <Zoffix> m: BEGIN $*LANG.set_pragma("no-worries", 1); my $a; my $a

[18:15] <camelia> rakudo-moar 6977680bd: ( no output )

[18:15] <Zoffix> :P

[18:15] <Zoffix> (will be just `no worries;` after release)

[18:18] <Zoffix> m: BEGIN $*LANG.refine_slang: "MAIN", role { method typed_worry (*@args) { dd [@args, %_] } }; my $a; my $a

[18:18] <camelia> rakudo-moar 6977680bd: OUTPUT: «[["X::Redeclaration"], {:symbol("\$a")}]␤»

[18:18] <Zoffix> [Coke]: ^ that might be even more suitable for your purpose than trying to capture and then parse STDERR

[18:56] <[Coke]> zoffix, thanks.

[20:29] <Geth> ¦ roast: ba8db9ab75 | usev6++ | 2 files

[20:29] <Geth> ¦ roast: [jvm] Unskip some recently fudged tests

[20:29] <Geth> ¦ roast:

[20:29] <Geth> ¦ roast: Zoffix++ modified the fix for RT #131305 with

[20:29] <Geth> ¦ roast: https://github.com/rakudo/rakudo/commit/64803b0af8

[20:29] <Geth> ¦ roast: and the tests are passing again.

[20:29] <Geth> ¦ roast: review: https://github.com/perl6/roast/commit/ba8db9ab75

[20:29] <synopsebot> RT#131305 [open]: https://rt.perl.org/Ticket/Display.html?id=131305 Useless Useless Use Warning when invoking colonpaired routines

[20:40] <Geth> ¦ roast: d0df3dc8ef | usev6++ | S17-supply/syntax.t

[20:40] <Geth> ¦ roast: [jvm] Help fudger to get number of tests right

[20:40] <Geth> ¦ roast: review: https://github.com/perl6/roast/commit/d0df3dc8ef
