[00:39] *** ggoebel left
[01:13] *** avar joined
[01:13] *** avar left
[01:13] *** avar joined
[01:13] *** p6bannerbot sets mode: +v avar

[01:14] *** p6bannerbot sets mode: +v avar

[01:17] *** lizmat left
[01:33] *** avar left
[01:34] *** ZzZombo left
[01:39] *** huggable left
[01:39] *** hoelzro left
[01:39] *** ilmari left
[01:39] *** AlexDaniel left
[01:39] *** Kaiepi left
[01:39] *** Sigyn left
[01:39] *** greppable6 left
[01:39] *** quotable6 left
[01:39] *** emerson left
[01:39] *** p6lert_ left
[01:39] *** synopsebot left
[01:39] *** Geth left
[01:39] *** dalek left
[01:39] *** tbrowder__ left
[01:39] *** chansen__ left
[01:39] *** leedo left
[01:39] *** AlexDaniel` left
[01:39] *** moritz left
[01:39] *** harrow` left
[01:39] *** ZofBot left
[01:39] *** SmokeMachine left
[01:39] *** masak left
[01:39] *** nebuchadnezzar left
[01:39] *** buggable left
[01:39] *** undersightable6 left
[01:39] *** committable6 left
[01:39] *** eater left
[01:39] *** japhb left
[01:39] *** wictory[m] left
[01:39] *** mtj_ left
[01:39] *** jnthn left
[01:39] *** BinGOs left
[01:39] *** jpf1 left
[01:39] *** robertle left
[01:39] *** reportable6 left
[01:39] *** evalable6 left
[01:39] *** releasable6 left
[01:39] *** shareable6 left
[01:39] *** bisectable6 left
[01:39] *** benchable6 left
[01:39] *** nativecallable6 left
[01:39] *** statisfiable6 left
[01:39] *** squashable6 left
[01:39] *** bloatable6 left
[01:39] *** nine left
[01:39] *** Redfoxmoon left
[01:39] *** timotimo left
[01:39] *** scovit left
[01:39] *** bartolin left
[01:39] *** nwc10 left
[01:39] *** TimToady left
[01:39] *** camelia left
[01:39] *** dogbert17 left
[01:39] *** ankitkk left
[01:39] *** Voldenet left
[01:39] *** samcv left
[01:39] *** [Coke] left
[01:39] *** ChanServ left
[01:44] *** krunen joined
[01:44] *** p6bannerbot joined
[01:44] *** geekosaur joined
[01:44] *** ZofBot joined
[01:44] *** niven.freenode.net sets mode: +vovv krunen p6bannerbot geekosaur ZofBot

[01:44] *** harrow` joined
[01:44] *** moritz joined
[01:44] *** dalek joined
[01:44] *** japhb joined
[01:44] *** niven.freenode.net sets mode: +vvvv harrow` moritz dalek japhb

[01:44] *** eater joined
[01:44] *** notable6 joined
[01:44] *** unicodable6 joined
[01:44] *** committable6 joined
[01:44] *** niven.freenode.net sets mode: +vvvv eater notable6 unicodable6 committable6

[01:44] *** undersightable6 joined
[01:44] *** buggable joined
[01:44] *** Sigyn joined
[01:44] *** AlexDaniel` joined
[01:44] *** niven.freenode.net sets mode: +vvvv undersightable6 buggable Sigyn AlexDaniel`

[01:44] *** leedo joined
[01:44] *** [Coke] joined
[01:44] *** samcv joined
[01:44] *** Voldenet joined
[01:44] *** niven.freenode.net sets mode: +vvvv leedo [Coke] samcv Voldenet

[01:44] *** ankitkk joined
[01:44] *** dogbert17 joined
[01:44] *** camelia joined
[01:44] *** TimToady joined
[01:44] *** niven.freenode.net sets mode: +vvvv ankitkk dogbert17 camelia TimToady

[01:44] *** nwc10 joined
[01:44] *** tadzik1 joined
[01:44] *** avar joined
[01:44] *** ilmari joined
[01:44] *** hoelzro joined
[01:44] *** huggable joined
[01:44] *** niven.freenode.net sets mode: +vvvv nwc10 ilmari hoelzro huggable

[01:44] *** bartolin joined
[01:44] *** diakopter joined
[01:44] *** mst joined
[01:44] *** niven.freenode.net sets mode: +vvov bartolin diakopter mst mst

[01:44] *** scovit joined
[01:44] *** timotimo joined
[01:44] *** klapperl_ joined
[01:44] *** sivoais_ joined
[01:44] *** niven.freenode.net sets mode: +vvvv scovit timotimo klapperl_ sivoais_

[01:44] *** Redfoxmoon joined
[01:44] *** emerson joined
[01:44] *** niven.freenode.net sets mode: +v Redfoxmoon

[01:44] *** chansen___ joined
[01:44] *** tbrowder___ joined
[01:44] *** SmokeMachine joined
[01:44] *** masak joined
[01:44] *** niven.freenode.net sets mode: +vv SmokeMachine masak

[01:44] *** p6bannerbot left
[01:44] *** greppable6 joined
[01:44] *** quotable6 joined
[01:44] *** niven.freenode.net sets mode: +vv greppable6 quotable6

[01:44] *** AlexDaniel joined
[01:44] *** Kaiepi joined
[01:44] *** btyler_ joined
[01:44] *** niven.freenode.net sets mode: +vvv AlexDaniel Kaiepi btyler_

[01:44] *** wictory[m] joined
[01:44] *** mtj_ joined
[01:44] *** jnthn joined
[01:44] *** BinGOs joined
[01:44] *** niven.freenode.net sets mode: +vvvv wictory[m] mtj_ jnthn BinGOs

[01:44] *** jpf1 joined
[01:44] *** niven.freenode.net sets mode: +v jpf1

[01:45] *** nebuchadnezzar joined
[01:45] *** niven.freenode.net sets mode: +v nebuchadnezzar

[01:45] *** reportable6 joined
[01:45] *** evalable6 joined
[01:45] *** releasable6 joined
[01:45] *** shareable6 joined
[01:45] *** niven.freenode.net sets mode: +vvvv reportable6 evalable6 releasable6 shareable6

[01:45] *** bisectable6 joined
[01:45] *** benchable6 joined
[01:45] *** nativecallable6 joined
[01:45] *** statisfiable6 joined
[01:45] *** niven.freenode.net sets mode: +vvvv bisectable6 benchable6 nativecallable6 statisfiable6

[01:45] *** squashable6 joined
[01:45] *** bloatable6 joined
[01:45] *** nine joined
[01:45] *** niven.freenode.net sets mode: +vvv squashable6 bloatable6 nine

[01:46] *** Kaypie joined
[01:46] *** Kaiepi left
[01:46] *** p6bannerbot joined
[01:47] *** ChanServ joined
[01:47] *** niven.freenode.net sets mode: +o ChanServ

[01:48] *** emerson left
[01:48] *** p6bannerbot left
[01:48] *** p6bannerbot joined
[01:48] *** ChanServ sets mode: +o p6bannerbot

[01:49] *** emerson joined
[01:49] *** p6bannerbot sets mode: +v emerson

[01:49] *** robertle joined
[01:50] *** p6bannerbot sets mode: +v robertle

[01:51] *** tbrowder___ left
[01:51] *** tbrowder___ joined
[01:51] *** chansen___ left
[01:51] *** chansen___ joined
[01:51] *** p6bannerbot sets mode: +v tbrowder___

[01:51] *** p6bannerbot sets mode: +v chansen___

[02:24] *** ZzZombo joined
[02:24] *** p6bannerbot sets mode: +v ZzZombo

[02:25] *** fake_space_whale joined
[02:26] *** p6bannerbot sets mode: +v fake_space_whale

[02:34] *** coverable6 joined
[02:34] *** p6bannerbot sets mode: +v coverable6

[03:34] *** yoleaux joined
[03:35] *** p6bannerbot sets mode: +v yoleaux

[05:00] *** ZzZombo_ joined
[05:00] *** p6bannerbot sets mode: +v ZzZombo_

[05:04] *** ZzZombo left
[05:04] *** ZzZombo_ is now known as ZzZombo

[05:53] *** domidumont joined
[05:54] *** p6bannerbot sets mode: +v domidumont

[06:02] *** domidumont left
[06:15] *** domidumont joined
[06:16] *** p6bannerbot sets mode: +v domidumont

[06:17] *** fake_space_whale left
[06:34] *** brrt joined
[06:35] *** p6bannerbot sets mode: +v brrt

[06:35] <brrt> \o

[06:35] <yoleaux> 9 Oct 2018 21:48Z <[Coke]> brrt: my TPF address is tpf-grants-secretary at perl-foundation.org.

[06:35] <brrt> thank you

[06:36] <nwc10> o/

[06:37] <brrt> ohai nwc10

[06:39] * brrt is debugging jnthn's issue

[06:49] *** patrickb joined
[06:49] *** p6bannerbot sets mode: +v patrickb

[06:52] <brrt> p6invokeunder is compiled and it really shouldn't be

[06:54] <brrt> it twiddles the interp_cur_op

[06:59] <timotimo> that sounds like an easy fix for the explosions: remove the jitting of that op :)

[07:09] *** p6bannerbot left
[07:09] *** huggable left
[07:09] *** brrt left
[07:09] *** ilmari left
[07:10] *** ilmari joined
[07:10] *** ilmari left
[07:10] *** ilmari joined
[07:24] *** brrt joined
[07:28] *** brrt left
[07:36] *** hoelzro left
[07:36] *** hoelzro joined
[07:36] *** lizmat joined
[08:03] <masak> hi, was gonna re-voice everyone, but it turns out I don't have op on the channel ;)

[08:03] <masak> thank you for your continued patience

[08:04] <timotimo> until then, #perl6-dev is a fine place to talk about moarvm stuff as well, i reckon

[08:05] <nwc10> poor starving, er silent ilmari

[08:05] <masak> ilmari: you can try miming what you want to say

[08:06] <nwc10> masak: I fear that it's still the wee small hours of the morning in MST

[08:09] <masak> nwc10: that's, like, the worst time to not have a voice

[08:09] <timotimo> in +m, nobody can hear you scream

[08:09] <timotimo> (except for ops)

[08:17] *** brrt joined
[08:34] *** ChanServ sets mode: +o jnthn

[08:34] *** jnthn sets mode: -m
 
[08:34] <jnthn> good -moarning :)

[08:34] <brrt> ohai jnthn

[08:34] <lizmat> hehe... we haz a voice!

[08:34] <brrt> you know what was the problem with reprname

[08:34] <brrt> .oO( Power to the People! )

[08:35] <nwc10> jnthn++ # UGT for all

[08:35] <jnthn> .oO( Democracy. That was the problem with reprname. )

[08:35] *** jnthn sets mode: -o jnthn

[08:35] <jnthn> brrt: So what was it? :)

[08:36] <brrt> nothing.

[08:36] <brrt> It wasn't compiled under the legacy JIT though

[08:36] <brrt> so if the merge_bbs step wouldn't happen, the expr jit would consume it

[08:36] <brrt> and it would continue onto compiling p6invokeunder

[08:36] <jnthn> oh!

[08:36] <brrt> which, as it happens, modifies tc->cur_frame->return_address to *tc->interp_cur_op + 6

[08:37] <brrt> as you may or may not know, and for you sanity I hope you don't, but the special JIT invocation bytecode is only 4 bytes wide

[08:37] * lizmat is building and testing

[08:37] <jnthn> I didn't :)

[08:38] <brrt> so that will return into a goto NEXT which will read from the bytecode stream and jump into nonsense

[08:38] <jnthn> haha

[08:38] <jnthn> Wow :)

[08:38] <jnthn> brrt++ for finding that

[08:38] <brrt> which actually explains a great many things, like how we ended up in the strings section of the ELF at some point

[08:39] <jnthn> lol

[08:48] *** samebchase joined
[09:23] *** Kaypie left
[09:34] *** brrt left
[09:41] *** tadzik1 is now known as tadzik

[10:01] *** ZzZombo left
[10:01] *** domidumont left
[10:01] *** avar left
[10:02] *** avar joined
[10:02] *** avar left
[10:02] *** avar joined
[10:37] *** p6bannerbot joined
[10:37] *** ChanServ sets mode: +o p6bannerbot

[10:37] *** huggable joined
[10:37] *** ZofBot left
[10:37] *** ZofBot joined
[10:37] *** p6bannerbot sets mode: +v ZofBot

[10:38] *** SourceBaby joined
[10:38] *** p6bannerbot sets mode: +v huggable

[10:38] *** Geth joined
[10:38] *** synopsebot joined
[10:38] *** p6bannerbot sets mode: +v SourceBaby

[10:39] *** p6bannerbot sets mode: +v Geth

[10:39] *** p6lert joined
[10:39] *** p6bannerbot sets mode: +v synopsebot

[10:40] *** Zoffix_ joined
[10:40] *** p6bannerbot sets mode: +v Zoffix_

[10:40] *** p6bannerbot sets mode: +v p6lert

[10:40] *** ChanServ sets mode: +o Zoffix_

[10:40] *** Zoffix_ sets mode: +v avar

[10:41] *** Zoffix_ sets mode: +vvvv hoelzro ilmari lizmat samebchase

[10:41] *** Zoffix_ sets mode: +v tadzik

[10:41] *** Zoffix_ left
[11:00] *** brrt joined
[11:00] *** p6bannerbot sets mode: +v brrt

[11:26] <brrt> ohai

[11:26] <brrt> I hit a snag with the invoke-jit thing

[11:28] <lizmat> yuck

[11:28] <lizmat> :q

[11:28] <lizmat> oops :-)

[11:29] <brrt> the expression compiler will spill to the locals of the frame, because it assumes that its stack frame may be destroyed

[11:30] <brrt> the nativecall-jit-in-non-jitted-code variant on the other hand, will not be able to do that, because the locals array can't be extended

[11:30] <brrt> since that would entail modifying the stack space. I... can probably hack arround that by having a spill policy flag or something

[11:31] *** ZzZombo joined
[11:31] *** p6bannerbot sets mode: +v ZzZombo

[11:41] *** ZzZombo_ joined
[11:41] *** p6bannerbot sets mode: +v ZzZombo_

[11:43] *** ZzZombo left
[11:44] *** ZzZombo_ is now known as ZzZombo

[11:49] <brrt> or, I can spill-to-stack explicitly, and load-from-stack explicitly, hmmm

[11:49] <brrt> that is essentially the same thing, isn't it

[11:54] * lizmat rubberducks

[11:57] *** brrt left
[11:57] *** domidumont joined
[11:57] *** p6bannerbot sets mode: +v domidumont

[12:03] *** Kaypie joined
[12:03] *** p6bannerbot sets mode: +v Kaypie

[12:52] *** avar left
[12:55] *** avar joined
[12:55] *** avar left
[12:55] *** avar joined
[12:55] *** p6bannerbot sets mode: +v avar

[12:55] *** p6bannerbot sets mode: +v avar

[12:57] *** brrt joined
[12:58] *** p6bannerbot sets mode: +v brrt

[13:27] *** ggoebel joined
[13:27] *** p6bannerbot sets mode: +v ggoebel

[14:14] <brrt> [Coke]++ posted my grant request, please comment: http://news.perlfoundation.org/2018/10/grant-proposal-moarvm-jit-comp.html

[14:28] *** domidumont left
[14:42] *** lizmat left
[14:54] *** brrt left
[15:10] *** patrickb left
[15:22] *** robertle left
[15:37] *** fake_space_whale joined
[15:38] *** p6bannerbot sets mode: +v fake_space_whale

[15:54] *** domidumont joined
[15:55] *** p6bannerbot sets mode: +v domidumont

[16:06] <timotimo> comment sent

[16:07] *** robertle joined
[16:08] *** p6bannerbot sets mode: +v robertle

[16:15] <timotimo> m: say 0.384 / 0.0027

[16:15] <camelia> rakudo-moar 9d4c8ddd9: OUTPUT: «142.222222␤»

[16:16] <timotimo> m: say 1.9 / 0.0027

[16:16] <camelia> rakudo-moar 9d4c8ddd9: OUTPUT: «703.703704␤»

[16:19] <timotimo> who wants to know what that is? :P

[16:20] <jnthn> Hopefully a speedup? :)

[16:21] <timotimo> yeah, but an extreme cheat

[16:21] <jnthn> Looks like :P

[16:21] <timotimo> my num @a = 1e0..500_000e0; my num @b = 500_000e0...1e0; my num $c = 5e0; my num @out; my $time = now; @out = @a Z+ (@b X* $c); say now - $time; say @out[99]

[16:21] <timotimo> that's the slowest one

[16:21] <timotimo> my num @a = 1e0..500_000e0; my num @b = 500_000e0...1e0; my num $c = 5e0; my num @out; my $time = now; for ^500_000 { @out[$_] = @a[$_] + @b[$_] * $c; }; say now - $time; say @out[99]

[16:21] <evalable6> timotimo, rakudo-moar 9d4c8ddd9: OUTPUT: «1.835722␤2499605␤»

[16:21] <timotimo> this one's in the middle

[16:21] <evalable6> timotimo, rakudo-moar 9d4c8ddd9: OUTPUT: «0.3862004␤2499605␤»

[16:21] <timotimo> use nqp; my num @a = 1e0..500_000e0; my num @b = 500_000e0...1e0; my num @c = 5e0; my num @out; my $time = now; nqp::vectorapply(@b, @c, @b, 95, 1, 64); nqp::vectorapply(@a, @b, @out, 93, 0, 64); say now - $time; say @out[99]

[16:21] <timotimo> this one is very fast :)

[16:24] <jnthn> SIMD?

[16:25] <timotimo> yep

[16:25] <timotimo> but no actually spelled-out intrinsics

[16:25] <timotimo> just the C compiler doing it for me

[16:26] <timotimo> literally a function with a bunch of tight loops that do only one operation either zip or cross

[16:26] <timotimo> with checks for sizes and slot types and such

[16:29] <timotimo> it'd even be faster without simd, i'm sure

[16:29] <timotimo> i'm not entirely sure if spesh is currently capable of optimizing multiple occurences of metaops, like having a Z* and a Z+ somewhere

[16:29] <timotimo> but i haven't actually checked

[16:30] <timotimo> also, i got a very absurd result where having $c be @c instead, as a 500_000 slot num array with just 5e0 over and over and using @c[$_] in the loop, too

[16:30] <timotimo> because it was faster

[16:33] <timotimo> not in total, only the measured part

[16:34] <timotimo> perhaps there's boxing/unboxing in one of the cases, but not in the other

[16:42] <timotimo> i have no clue if this has a future at all :)

[16:45] *** lizmat joined
[16:45] *** p6bannerbot sets mode: +v lizmat

[17:05] *** domidumont left
[17:36] *** avar left
[17:36] *** avar joined
[17:36] *** avar left
[17:36] *** avar joined
[17:36] *** p6bannerbot sets mode: +v avar

[17:37] *** p6bannerbot sets mode: +v avar

[17:50] *** fake_space_whale left
[18:02] *** dogbert17 left
[18:51] *** dogbert17 joined
[18:52] *** p6bannerbot sets mode: +v dogbert17

[19:06] *** AlexDaniel left
[19:07] *** AlexDaniel joined
[19:07] *** p6bannerbot sets mode: +v AlexDaniel

[19:19] <nine> Turns out, when you don't have to pack argument information into flags to pass it on to some C code, the code can become quite a bit simpler. I wonder what that will do for performance

[19:23] *** robertle left
[19:23] <lizmat> :-)  sounds cool

[19:45] *** bartolin left
[20:19] *** MasterDuke joined
[20:19] *** p6bannerbot sets mode: +v MasterDuke

[20:20] *** MasterDuke left
[20:20] *** MasterDuke joined
[20:20] *** herbert.freenode.net sets mode: +v MasterDuke

[20:20] *** p6bannerbot sets mode: +v MasterDuke

[20:53] *** Kaypie left
[20:56] *** Kaiepi joined
[20:56] *** p6bannerbot sets mode: +v Kaiepi

[23:13] *** ZzZombo_ joined
[23:13] *** p6bannerbot sets mode: +v ZzZombo_

[23:16] *** ZzZombo left
[23:16] *** ZzZombo_ is now known as ZzZombo

[23:19] *** ZzZombo_ joined
[23:19] *** p6bannerbot sets mode: +v ZzZombo_

[23:19] *** ZzZombo__ joined
[23:19] *** p6bannerbot sets mode: +v ZzZombo__

[23:20] *** ZzZombo__ left
[23:21] *** ZzZombo__ joined
[23:21] *** p6bannerbot sets mode: +v ZzZombo__

[23:21] *** ZzZombo left
[23:21] *** ZzZombo__ is now known as ZzZombo

[23:23] *** ZzZombo_ left
[23:25] *** ZzZombo_ joined
[23:25] *** p6bannerbot sets mode: +v ZzZombo_

[23:28] *** ZzZombo left
[23:28] *** ZzZombo_ is now known as ZzZombo

[23:48] *** lizmat left
