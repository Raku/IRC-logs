[00:58] <japhb> Anyone know offhand what hash algorithm we're using to hash keys in MoarVM's map/hash implementations?

[00:59] <japhb> Currently deep diving some info about relatively recent hash algorithms, so curious which (if any) we're using.

[01:05] <ugexe> rapidhash https://github.com/MoarVM/MoarVM/commit/627650543f948a9605860924e184ab192812b7c8

[02:25] *** sourceable6 left
[02:25] *** notable6 left
[02:25] *** shareable6 left
[02:25] *** notable6 joined
[02:25] *** quotable6 left
[02:25] *** unicodable6 left
[02:25] *** committable6 left
[02:25] *** greppable6 left
[02:27] *** committable6 joined
[02:27] *** bloatable6 left
[02:27] *** linkable6 left
[02:28] *** shareable6 joined
[02:28] *** sourceable6 joined
[02:28] *** greppable6 joined
[02:28] *** unicodable6 joined
[02:28] *** quotable6 joined
[02:29] *** bloatable6 joined
[02:29] *** linkable6 joined
[02:52] <japhb> thx

[10:37] <Voldenet> huh, rapidhash benchmarks suggest that xxh3 is faster on most common PCs

[10:39] <Voldenet> and gxhash is a lot faster

[10:45] <Voldenet> in fact xxh3 is so standard that it's packaged into .net8

[11:41] *** librasteve_ joined
[11:55] <Geth> ¦ MoarVM: MasterDuke17++ created pull request #1959: Bump rapidhash to v3

[11:55] <Geth> ¦ MoarVM: review: https://github.com/MoarVM/MoarVM/pull/1959

[13:58] *** librasteve_ left
[16:22] <japhb> It's frustrating how benchmarks age, such that comparisons are only a snapshot in time, with the most active implementations switching leadership positions on the regular.

[16:23] <japhb> This could of course be solved by someone benchmarking All The Things at a consistent interval, but most of the people who do that sort of thing don't do an all-inclusive suite, or have an axe to grind about certain algorithms and rather than just marking them in the results, don't test them at all ....

[16:25] <japhb> Witness the number of benchmarks that don't include anything (like gxhash) that's dependent on particular CPU features, or don't include any hash that doesn't have seeds of a certain size, or what have you.

[16:29] <japhb> FWIW Voldenet I *suspect* xxh3 is getting special treatment not just because it's a good performant hash (which AFAICT it is), but also because it was written by the same guy who created LZ4, zstd, and I suspect OpenZL (I know he's a contributor, but I don't know if he wrote the core)

[16:29] <Geth> ¦ MoarVM/main: 204a73098b | MasterDuke17++ (committed using GitHub Web editor) | 2 files

[16:29] <Geth> ¦ MoarVM/main: Bump rapidhash to v3

[16:29] <Geth> ¦ MoarVM/main: review: https://github.com/MoarVM/MoarVM/commit/204a73098b

[16:35] <Voldenet> I would bet that the lib gets special treatment, it just feels funny to me that rapidhash presented benchmarks that show it as slower

[16:36] <[Coke]> GAH

[16:36] <Voldenet> while smhasher benchmarks show rapidhash as slightly faster

[16:36] <[Coke]> Folks, are we really pushing a change to moarvm with a week to go AFTER I've started the blin run?

[16:36] <Voldenet> and on amd ryzen cpus no less

[16:37] <[Coke]> .seen masterduke

[16:37] <tellable6> [Coke], I saw masterduke 2025-09-18T21:16:20Z in #raku-dev: <MasterDuke> dinner &

[16:37] * [Coke] kills the blin run

[16:38] * [Coke] shuts down the VM so he's not paying for it. :|

[16:39] <Voldenet> otoh on intel CPUs rapidhash has half the throughput than xxh3 for some reason

[16:42] <Geth> ¦ MoarVM/revert-1959-update_rapidhash_to_v3: 9d79b310f2 | (Elizabeth Mattijsen)++ (committed using GitHub Web editor) | 2 files

[16:42] <Geth> ¦ MoarVM/revert-1959-update_rapidhash_to_v3: Revert "Bump rapidhash to v3"

[16:42] <Geth> ¦ MoarVM/revert-1959-update_rapidhash_to_v3: 

[16:42] <Geth> ¦ MoarVM/revert-1959-update_rapidhash_to_v3: This reverts commit 204a73098bc5d3e34db467c85cb2d6b3ac7991de.

[16:42] <Geth> ¦ MoarVM/revert-1959-update_rapidhash_to_v3: review: https://github.com/MoarVM/MoarVM/commit/9d79b310f2

[16:42] <Geth> ¦ MoarVM: lizmat++ created pull request #1960: Revert "Bump rapidhash to v3"

[16:42] <Geth> ¦ MoarVM: review: https://github.com/MoarVM/MoarVM/pull/1960

[16:42] <Geth> ¦ MoarVM/main: 70225c6b5e | (Elizabeth Mattijsen)++ (committed using GitHub Web editor) | 2 files

[16:42] <Geth> ¦ MoarVM/main: Revert "Bump rapidhash to v3" (#1960)

[16:42] <Geth> ¦ MoarVM/main: 

[16:42] <Geth> ¦ MoarVM/main: This reverts commit 204a73098bc5d3e34db467c85cb2d6b3ac7991de.

[16:42] <Geth> ¦ MoarVM/main: review: https://github.com/MoarVM/MoarVM/commit/70225c6b5e

[16:43] <lizmat> [Coke]: sorry, was a little over eager doing something  :-(

[16:43] <Geth> ¦ MoarVM/revert-1960-revert-1959-update_rapidhash_to_v3: a61094c65c | (Elizabeth Mattijsen)++ (committed using GitHub Web editor) | 2 files

[16:43] <Geth> ¦ MoarVM/revert-1960-revert-1959-update_rapidhash_to_v3: Revert "Revert "Bump rapidhash to v3" (#1960)"

[16:43] <Geth> ¦ MoarVM/revert-1960-revert-1959-update_rapidhash_to_v3: 

[16:43] <Geth> ¦ MoarVM/revert-1960-revert-1959-update_rapidhash_to_v3: This reverts commit 70225c6b5efd10aa2c930982f2cfebf4e7073ba7.

[16:43] <Geth> ¦ MoarVM/revert-1960-revert-1959-update_rapidhash_to_v3: review: https://github.com/MoarVM/MoarVM/commit/a61094c65c

[16:44] <Geth> ¦ MoarVM: lizmat++ created pull request #1961: Bump rapidhash to v3

[16:44] <Geth> ¦ MoarVM: review: https://github.com/MoarVM/MoarVM/pull/1961

[16:44] <lizmat> [Coke]: sorry for the noise  :-(

[16:48] <[Coke]> no worries!

[17:56] <Geth> ¦ MoarVM: MasterDuke17++ created pull request #1962: Bump libtommath to 1.3.0

[17:56] <Geth> ¦ MoarVM: review: https://github.com/MoarVM/MoarVM/pull/1962

[21:26] <japhb> [Coke]: Apologies for starting something; I was just studying and pontificating ....

[21:56] <[Coke]> heee. no worries, everything is fine.

