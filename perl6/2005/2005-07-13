[00:00] <svnbot6> r5529, nothingmuch++ | Move around metamodel business for stevan

[00:00] <nothingmuch> done

[00:01] <nothingmuch> sorry again

[00:01] <nothingmuch> nothingmuch--

[00:01] * nothingmuch goes to bed

[00:01] <stevan> nite nothingmuch++

[00:04] <wolverian> is there a syntax to specify that a method inherited from a superclass should instead be handled by a role that our child class does? some sort of delegation, that is, but using a superclass's method to handle it instead of our own.

[00:08] <stevan> wolverian: that is how Roles work

[00:08] <stevan> the role method do not override the locally defined methods, but they do override those defined in the superclass(es)

[00:09] <wolverian> stevan, the role's method doesn't have the same name as the superclass's

[00:09] <wolverian> stevan, the role also shouldn't know that this particular subclass wants to use that role to override its superclass's method

[00:09] <wolverian> s/shouldn't/doesn't/

[00:11] <stevan> wolverian: I am not sure what you mean then

[00:11] <stevan> you want a role's method to override a superclass's method of a different name?

[00:12] <stevan> and you want the local class to decide this?

[00:12] <stevan> if that is so, then you cannot do this automagically

[00:12] <stevan> make the local class's method override the superclass's and delegate to the role instead

[00:14] <wolverian> stevan, right, that's what I want to do, but I'm not sure how to delegate it. I thought I could use 'handles' somehow. I can of course write the body of the method myself, but I was just wondering if there is a way to do it with something else perl6 provides.

[00:15] <stevan> handles is not implemented in pugs IIRC

[00:15] <stevan> but handles only works on attributes

[00:15] <stevan> has $.foo handles 'bar';

[00:15] <wolverian> stevan, that doesn't matter, right now, this prototype is fully perl6 as in AES

[00:15] <stevan> something like that

[00:15] <stevan> ok

[00:15] <wolverian> stevan, has &.foo, right? okay. just wondering if I could just do 'method foo handles <bar>;'

[00:15] <stevan> can you not do a role? can you do a proper delegation relationship

[00:15] <wolverian> but I guess I can't without writing the body.

[00:16] <stevan> wolverian: not that I know

[00:16] <wolverian> stevan, can you rephrase that bit? I mean, proper delegation relationship?

[00:16] <stevan> a has-a relationship

[00:17] <stevan> so instead of using a role and superclass

[00:17] <stevan> you local class will just have an instance of the superclass

[00:17] <stevan> but I am not sure if that is appropriate

[00:17] <wolverian> no, that's not appropriate here, I'm afraid. an isa relationship is appropriate.

[00:18] <stevan> ok

[00:18] <stevan> :)

[00:18] <wolverian> hmm. if a superclass provides method foo, and I have has &.foo handles <bar>; in the child class... what happens when I do ChildClass.new.[foo|bar]?

[00:18] <stevan> no idea

[00:19] <wolverian> I'll just punt this particular class then, and move to the next. :) thanks a lot for your help.

[00:19] <wolverian> oh. another question, actually.

[00:19] <wolverian> can you .wrap methods?

[00:19] <stevan> sure

[00:19] <stevan> I assume so, but I am not really sure

[00:19] <wolverian> a child class wants to do some extra checking before calling an inherited method.

[00:19] <stevan> I would probably just use SUPER:: there

[00:20] <stevan> rather than try to wrap it

[00:20] <wolverian> that feels dirty, for some reason. I'm not sure why..

[00:20] <stevan> its standard OO practice

[00:20] <stevan> its just not very "functional"

[00:20] <wolverian> right

[00:20] <stevan> being a functional fan, I understand what you mean

[00:20] <stevan> but the OO in me says,.. use SUPER::

[00:21] <wolverian> oh well. I'll do that later too, then :)

[00:21] <stevan> :)

[00:21] <wolverian> the nice thing about this is that this doesn't need to run, so I can just modify it to whatever perl6 looks like this week.

[00:22] <wolverian> that didn't make much sense, I think. I need to sleep.

[00:23] <stevan> well if you make it run in pugs too

[00:23] <stevan> then you can also have to change it based on what is working right in pugs and what is not :)

[00:23] <wolverian> yeah. I'd like this to run this year, at least.

[00:24] <wolverian> I haven't looked a lot at other people's perl6 code. do others name their roles so that the 'does' lines make sense in english?

[00:24] <svnbot6> r5531, Stevan++ | Perl6::MetaModel - renaming the container tests (nothingmuch++); and making the rest of the test suite run again (no container types though);

[00:25] <stevan> wolverian: I think that is a good way to name roles

[00:25] <stevan> however, it does not always work

[00:25] <wolverian> I have a role called Explode here. :)

[00:25] <stevan> Explodeable would be my choice

[00:25] <wolverian> yeah, it seems to be I've just hit a case where it doesn't _quite_ work.

[00:26] <wolverian> stevan, 'does Explodeable' doesn't work at all

[00:26] <stevan> but thats because I look at roles as just using methods

[00:26] <stevan> wolverian: its american english, all bets are off :)

[00:26] <wolverian> I was taught british english, so. :)

[00:26] <stevan> :P

[00:27] <stevan> I be a 'merican, and I ain't talk very good

[00:27] <wolverian> I also have a role called Belong, which is a bit more awkward

[00:27] <wolverian> but it still works. :)

[00:27] <stevan> but seriously, I tend to look at Roles as being a collection of behaviors which works well with the *able names

[00:28] <wolverian> yes, I do that too, coming from Ruby

[00:28] <wolverian> but

[00:28] <wolverian> look at it from a theatre perspective

[00:29] <wolverian> "Your role is to Sing Funny songs" class Me does Sing[Funny] { ... } 

[00:29] <wolverian> or so.

[00:29] <Odin-> Whaddya mean, "does Explode" works just fine.

[00:29] <Odin-> It just implies the wrong thing. ;)

[00:30] <wolverian> Odin-, wrong, how? :)

[00:31] <Khisanth> is Explosive?

[00:32] <Odin-> wolverian: Oh, the code *does* blow up in your face when you try to use it? :p

[00:33] <wolverian> Khisanth, ech. no. this kind of a thing is exactly what roles are for.

[00:33] <wolverian> Odin-, no, the object does. :)

[00:34] <Odin-> wolverian: I ... see.

[00:34] <wolverian> this is getting obnoxious. I have twelve classes in one file

[00:34] * wolverian refactors

[00:45] <wolverian> perl6's OO system makes ruby seem pitiful. so much for poignancy!!! (re: why's poignant guide to ruby)

[00:53] <wolverian> okay. traits are magic spells.

[01:02] <putter> nothingmuch: ping?

[01:14] <dudley_> putter:  any luck on the exploding build?

[01:17] <putter> Not on fixing it.  So I snarfed r5509, and am svn merge'ing, but as work continued on moved files, that's turning out to be a pain.

[01:20] <mugwump> Install paths are an issue that need to be resolved, really.  There is also the issue that we need to have modules installed with the same short name but different long names

[01:25] <putter> The simplest approach would be to revert head to r5509, and disable make install.  Folks can svn merge the last day of changes out of the repository and back in.   And install fixed at lesure.

[01:27] <putter> Where folks is mostly nothingmuch and stevan.

[01:28] <putter> stevan: ping?

[01:36] <mugwump> there are two pure_site_install rules in the generated Makefile

[01:38] <mugwump> the first one shouldn't be there

[01:43] <autrijus> greetings. I woke up at Ovid's journal.

[01:43] <wolverian> you were sleeping in Ovid's journal? :)

[01:43] <autrijus> no, I was sleeping in use.perl homepage.

[01:43] <brentdax> Unexpected Win #1: ~gather { ... } simplifies writing functions that generate [HT|X]ML.

[01:44] <autrijus> greetings brentdax the summer coder.

[01:44] <mugwump> hi autrijus.  I'm just picking through the inc/Module/Install/* to try to find out why this rule is ending up being inserted twice...

[01:44] <brentdax> Greetings Autrijus the genius language implementor.

[01:44] <autrijus> brentdax: I used to use [~]gather{}

[01:44] <autrijus> brentdax: ~ gives you extra whitespace you may or may not care

[01:45] <brentdax> Mmm, good point.

[01:45] <autrijus> url complained during my yapcna speech that ~= is made harder to type

[01:45] <autrijus> and he uses .= all over his program

[01:45] <autrijus> er, I mean uri.

[01:45] <autrijus> so I suggested [~]gather{...}, but I'm not sure he agreed

[01:46] <mugwump> [~]gather{ ... } will be faster by design

[01:46] <brentdax> I love how it's not necessary to declare a variable and use that name all over the place--gather/take makes it all implicit in a very handy way.

[01:46] <autrijus> indeed

[01:47] <brentdax> It's almost like working directly with print or say statements, but you get a string instead.

[01:47] <autrijus> mugwump: so you think you can fix this in the next few hours? I was about to give up and rely on moving lib/* into runtimes/perl5/*

[01:47] <mugwump> using lots of ~= gives you O(N^2) performance, assuming that appending to a string is O($string.length)

[01:47] <putter> mugwump: while you're at it, keep an eye out for why blib6/lib isn't being created....

[01:48] <autrijus> and then adding them as explicit LIB

[01:48] <mugwump> heh.  well, I'll give it a crack - but you know the history with this makefile stuff ;)

[01:48] <mugwump> most people end up running away screaming

[01:48] <autrijus> indeed I do. so let me try this very very simple fix. sec

[01:48] <putter> I tried that.  Forgot to open the door.  Sitting back down subsequently seemed indicated.

[01:50] <putter> :-) :o) :x)

[01:52] <mugwump> ok, so in Module::Install::Makefile::fix_up_makefile, the postamble specified in Makefile.PL (where the more correct-looking pure_site_install rule lives) is appended, duplicating the section

[01:53] <mugwump> nothing seems to be written to remove the duplication

[01:53] <putter> Courtesy of my "I really should delete those sometime" pile of old pugs, I note the duplicate pure_site_install entries date back to at least June 7.

[01:55] <autrijus> I think I've fixed it.

[01:55] <autrijus> testing.

[01:56] <putter> which one, install, blib6, or both?

[01:56] <autrijus> all

[01:56] <autrijus> a sec

[01:56] * putter gathers little flags at hand to wave in celebration.

[02:21] <brentdax> Interesting...

[02:21] <brentdax> Is qq{ foo { bar } baz } specced to ignore the inner closure?

[02:22] <jp-autark> I think it is supposed to be interpolated. currently a bit buggy.

[02:22] <brentdax> M'kay, just making sure.

[02:23] <brentdax> I'm working around it by just using a different delimiter.

[02:30] <autrijus> please grep for a test and if not there, write a :todo<bug> test :)

[02:44] <autrijus> svk++ # local branch makes this possible

[02:44] <svnbot6> r5532, autrijus++ |  r23238@not:  autrijus | 2005-07-13 10:32:25 +0800

[02:44] <svnbot6> r5532, autrijus++ |  r23239@not:  autrijus | 2005-07-13 10:36:17 +0800

[02:44] <svnbot6> r5532, autrijus++ |  * revert #1

[02:44] <svnbot6> r5532, autrijus++ |  r23240@not:  autrijus | 2005-07-13 10:37:31 +0800

[02:44] <svnbot6> r5532, autrijus++ |  * move Perl6-Config back

[02:44] <svnbot6> r5532, autrijus++ |  r23241@not:  autrijus | 2005-07-13 10:38:37 +0800

[02:44] <svnbot6> r5532, autrijus++ |  * revert #3 - makemaker

[02:44] <svnbot6> r5532, autrijus++ |  r23242@not:  autrijus | 2005-07-13 10:40:01 +0800

[02:44] <svnbot6> r5532, autrijus++ |  * #4 - move things to perl5/

[02:44] <svnbot6> r5532, autrijus++ |  r23243@not:  autrijus | 2005-07-13 10:40:21 +0800

[02:44] <svnbot6> r5532, autrijus++ |  * remove lib/Inline-Pugs

[02:47] <putter> ooo, rX@not!

[02:49] <jp-autark> *miff* make stopped working

[02:49] <autrijus> did you rerun perl Makefile.PL?

[02:50] <putter> Actually, configure stopped working.

[02:50] <putter> Could not open 'lib/Perl6-Pugs/lib/Perl6/Pugs.pm': No such file or directory at /usr/lib/perl5/5.8.5/ExtUtils/MM_Unix.pm line 3079.

[02:50] <autrijus> oh. right.

[02:50] <autrijus> fixed

[02:50] <wolverian> autrijus, heh, r20k? that's nice :)

[02:53] <putter> clean build of 5533.  same error.

[02:54] <putter> or not quote,

[02:54] <putter> Could not open 'lib/Perl6/Pugs.pm': No such file or directory at /usr/lib/perl5/5.8.5/ExtUtils/MM_Unix.pm line 3079.

[02:54] <putter> s/quote/quite/

[02:55] <dudley_> yep. Except mine looks for 'lib/Perl6-Pugs/lib/Perl6/Pugs.pm'

[02:55] <svnbot6> r5533, autrijus++ | * more path realignment

[02:55] <svnbot6> r5534, autrijus++ | * rename P5::PIL::Run to PIL::Run

[02:55] <autrijus> r5535.

[02:56] <jp-autark> *wee*

[03:00] <Darren_Duncan> I got the same error, but an update plus tossing a few dirs plus an update fixed it

[03:01] <svnbot6> r5535, autrijus++ | * add back missing files; finish reverting

[03:01] <svnbot6> r5536, autrijus++ | * add perl5/ to layout document.

[03:01] <autrijus> ok, that was drastic, but hopefully sane

[03:01] <Darren_Duncan> currently making 5535

[03:01] <autrijus> 5536 is just docs

[03:02] <Darren_Duncan> so is it preflight time now, or are there still known issues?

[03:02] <autrijus> I don't know, I'm just starting to run smoke

[03:02] <autrijus> I need to fix quicksort.p6

[03:03] <autrijus> and look at module failures

[03:03] <autrijus> that's all

[03:03] <Darren_Duncan> I'm going to do the whole "make test" thing in the background while I do other work

[03:06] <svnbot6> r5537, brentdax++ | Test for a (currently present) closure-interpolation bug.

[03:07] <autrijus> rafl: hey. sorry for effectively reverting all your hard work

[03:08] <autrijus> rafl: but it does not look like it can be resolved for 6.2.8

[03:09] <putter> r5535 resolves make test and make install problems.

[03:09] * putter wearily waves flag of celebration.

[03:10] <autrijus> :)

[03:10] <mugwump> a white flag?

[03:10] <putter> lol

[03:10] <putter>     ... for a long time.

[03:12] <putter> note to self: an you wanted _another_ reason to switch to svk?  here you go - - -

[03:12] <svnbot6> r5538, autrijus++ | * brent forgot to update the plan

[03:14] <putter> brentdax: autrijus fixed it.

[03:15] <autrijus> heh

[03:17] <putter> and make pirtest is sane.

[03:17] <mugwump> Schroedinger's bugs: that's when you don't know whether or not the bug is fixed until you commit it to svn

[03:17] <mugwump> s/commit it/commit the test for it/

[03:17] <Odin-LAP> Schr√∂dinbug.

[03:20] <putter> So, while building optimized, I note

[03:20] <putter> t/builtins/arrays/isa..............................Name '&ok' not found

[03:21] <putter> under pirtest.

[03:21] <autrijus> putter: exports may not be visible inside closures? not sure

[03:35] <svnbot6> r5539, autark++ | * Fix for (it seems) qq{ ... { ... } ... }

[03:35] <svnbot6> r5539, autark++ | * un-bug relevant tests

[03:40] <putter> Did .namespace start working at some point?  Replacing ok(isa( with &main::ok(isa( moves the error from &ok nf to &isa nf.

[03:40] <putter> But there is a seemingly appropriate .namespace["main"] in -CPIR.

[03:41] <putter> Once upon a time (ie, a few weeks ago), .namespace was unhelpful.  Did that change at some point?

[03:41] <autrijus> there's always .namespace["main"] after each .namespace["other"]

[03:42] <autrijus> I don't think the unhelpfulness changed in general

[03:43] <putter> so "we switched to using namespaces pugs-side, and parrot still cant deal, so we loose"?.

[03:43] <autrijus> yup.

[03:43] <putter> ok.

[03:46] <putter> I note one thing which seemed odd in the generated code.  it seemed like it sets Test::foo, then sets main::foo from it, then it sets main::foo from itself.  or something like that.  the last step left me puzzled.

[03:47] <putter> nopaste

[03:47] <putter> pastebot nopaste

[03:47] <putter> channel title++

[03:49] <pasteling> "putter" at 66.30.119.55 pasted "odd code" (25 lines, 655B) at http://sial.org/pbot/11728

[03:50] <putter> random observation.

[03:52] <putter> oh. I didn't follow the control flow.  so the oddity is the inits look like dead code.

[03:57] <stevan> putter: pong (from a while ago)

[04:00] <putter> ?  oh.  I was wondering if you would mind a 12 hour rollback, and merging your work back in, since I was having trouble svn merge'ing automagically.  but autrijus invoked svk magic and fixed the build.

[04:01] <putter> is -B/-C Parrot still real?

[04:01] <stevan> putter: its in a VCS, so rolling back and forth is easy :)

[04:01] <stevan> time travel :)

[04:07] <putter> back and fourth, yes.  but svn merge wasnt too happy with merging changes from files which had moved in trunk but not in the local copy.

[04:07] <autrijus> putter: no, it's alias for PIR

[04:07] <Alias_> seen autrijus?

[04:07] <autrijus> Alias_: yes?

[04:07] <Alias_> oh good, the autrijus bot is in here

[04:07] <Alias_> :)

[04:07] <autrijus> I need to run for lunch and some errand rsn

[04:08] <Alias_> me too

[04:08] <gaal_> mornin'.

[04:08] <autrijus> so speak quick

[04:08] <Alias_> meeting, just a quickie

[04:08] <Alias_> Is it possible to get the pugs svn converted to cvs

[04:08] <putter> alias?  ./pugs -BParrot -Iblib6/lib t/builtins/arrays/isa.t  yields

[04:08] <Alias_> if not ongoing, then just a one-off

[04:08] <svnbot6> r5540, putter++ | enum.t - increased number of tests expected to match number run.

[04:08] <autrijus> Alias_: yes, svn2cvs.tigris.org/

[04:08] <Alias_> ok, goodo

[04:08] <putter> Null PMC access in get_string()

[04:08] <putter> current instr.: 'EVAL_1' pc 10 (EVAL_1:7)

[04:08] <Alias_> I'll have a cvsmonitor of pugs up shortly  :)

[04:09] <autrijus> cool.

[04:09] <Alias_> Looking for things to talk about in my cvsmon oscon talk

[04:09] <Alias_> Mono, Enlightenment, Pugs

[04:09] <Alias_> Things with strong public interest that nobody ever really sees the inside of

[04:09] <Alias_> anyways, gotta dash

[04:10] <putter> oh, so does -BPir.  something else is wrong.  never mind.

[04:16] <putter> re svn merge, or perhaps it worked fine, and I just became confused.  perhaps.

[04:24] <svnbot6> r5541, putter++ | p5/method.t - untodoed working a working test; wrapped eval around a dieing test.

[04:25] *** brentdax_ is now known as brentdax

[04:34] <putter> end of day.  good night all.

[04:34] <putter> rafl_: sorry the installation improvement didnt work out.  we can try again post-release.

[04:34] <putter> &

[04:35] <svnbot6> r5542, putter++ | 10-dash-uppercase-m.t - :todo<bug> one test

[04:48] <pasteling> "putter" at 66.30.119.55 pasted "r5538 make test output. fyi." (591 lines, 26.9K) at http://sial.org/pbot/11729

[04:50] <masak> i can't get the url in docs/notes/plan to work

[04:50] <masak> http://rt.openfoundry.org/Foundry/Project/Source/index.html/pugs/checkout/docs/notes/plan?rev=5465

[04:51] <masak> is that temporary?

[04:56] <sanxiyn> masak: works for me

[04:56] <masak> now for me too :/

[04:57] <masak> must have been temporary then :)

[05:24] <Darren_Duncan> those preludes must be doing something good ... the tests do seem perceptibly faster

[05:24] <Darren_Duncan> ... than a couple weeks ago

[05:25] <Khisanth> maybe someone secretly upgraded your system! :)

[06:04] <Darren_Duncan> Fyi, my 'make test' of 5542 shows: Failed 6/357 test scripts, 98.32% okay. 5/6373 subtests failed, 99.92% okay.

[06:05] <Darren_Duncan> Actually its 5/356; the extra one is a file I had sitting in there that does nothing

[06:07] <Darren_Duncan> putting that aside, there appears to be a bug in the test harness ... it says 5 subtests failed, but the count of failed tests is 8 when counting the individual files

[06:16] <brentdax> How do you push a pair onto an array?  I think they're being interpreted as options.

[06:20] <Khisanth> wow, that is much faster startup

[07:01] <svnbot6> r5543, autrijus++ | * correct plan number of 10-dash-uppercase-m.t

[07:01] <svnbot6> r5544, autrijus++ | * make ext/DateTime/t/Date/last-day.t runnable from basepath.

[07:02] <autrijus> brentdax: this is a S29 problem; 

[07:02] <autrijus>  multi sub Array::push (@array is rw : *@values) returns Int {

[07:03] <autrijus> *@values defaults to Item, i.e. does not accept either junctions nor pairs

[07:03] <autrijus> so you can't push pair or junctions into an array

[07:03] <autrijus> this is of course weird. can you please bring this to p6l?

[07:03] <autrijus> (and worse, there's currently no way to work it around.)

[07:04] <autrijus> I blame a certain larry to rule that pairs are junctivated :)

[07:04] <theorbtw1> We couldn't say (@array is rw : Any *@values) ?

[07:04] *** theorbtw1 is now known as theorbtwo

[07:04] <autrijus> sure, then it would also allow you to push junctions into @array

[07:04] <autrijus> sure we could, the problem is which builtins get that treatment

[07:04] <autrijus> it's not only push.

[07:04] <autrijus> so S29 needs updating anyway

[07:05] <theorbtwo> OK.

[07:05] <autrijus> fwiw, I'm not entirely happy with this surprising treatment of pairs in function calls, but at least it's consistent and easy to explain

[07:06] <Aankhen``> Morning.

[07:07] <autrijus> brb

[07:07] <Aankhen``> Nooo, don't run away! :-P

[07:07] <Alias_> autrijus: BTW, so I can study up to OSCON, is there "WTF?" page somewhere that lists what all the various bits and pieces of the Pugs/Perl6 stuff is, what all the cronyms are and mean, and how they all fit toghter?

[07:09] <coral> yti, bidkwia.

[07:09] <Khisanth> hmm why is 1=>2 not the same as the 1=>2 in 1=>2,3=>4?

[07:15] <Aankhen``> What are "characters classes in globs"?

[07:16] <Aankhen``> # http://groups-beta.google.com/group/perl.perl6.internals/browse_frm/thread/5e4230c5bcd0fc94/0bdb158c243fa88c#0bdb158c243fa88c

[07:16] <coral> *.[gb]z

[07:16] <coral> ?

[07:16] <Aankhen``> Uhh... how does that apply to PGE?

[07:17] <coral> hmm, misinterpreted globs

[07:21] <theorbtwo> Aankhen``, I think PGE supports both glob-regexes and perl6-regexes.

[07:22] <theorbtwo> (The former is really just an alternate syntax for a subset of the latter.)

[07:23] <Aankhen``> Ah.

[07:23] <Aankhen``> Kewl.

[07:32] <rafl> autrijus, putter: OK.

[07:32] <rafl> autrijus, putter: Soory I didn't had time yesterday to fix that.

[07:34] <Alias_> http://search.cpan.org/~davidnico/?D=D

[07:34] <Alias_> erk

[07:34] <Alias_> (ignore that)

[07:35] <autrijus> smokers, please start a new round.

[07:35] <autrijus> I think as of r5546 the main test suite is all pass.

[07:35] <autrijus> I'll now move to modules.

[07:37] <lightstep> wheree does this test belong?

[07:37] <lightstep> for ("a\n", "b\n") -> {my $x = chomp $_; say $x}

[07:37] <rafl> autrijus: Module::Install looks into lib for its stuff to install per default, right? Where's the code for that? I can't find it.. :-/

[07:37] <autrijus> rafl: it's just EU::MM code.

[07:37] <autrijus> EU::MM does that by default, not us

[07:37] <autrijus> M::I is just preprocessor for M::I

[07:38] <rafl> The last sentence seems a bit weird to me.

[07:38] <Aankhen``> For EU::MM, maybe?

[07:39] <rafl> Yes, M::I for EU:MM or the other way round? I assume the former..

[07:39] <svnbot6> r5545, autrijus++ | * eliminate the quicksort bug:  An explicit empty signature should

[07:39] <svnbot6> r5545, autrijus++ |   not be taken as an implicit *@_.  This is a regression that happened

[07:39] <svnbot6> r5545, autrijus++ |   after 6.2.7, probably during hackathon.

[07:39] <svnbot6> r5545, autrijus++ |     sub foo () { ... }      # should mean ()

[07:39] <svnbot6> r5545, autrijus++ |     sub foo { ... }         # should mean (*@_)

[07:39] <svnbot6> r5546, autrijus++ | * TODOify inheritance.t tests.  `make test` should all pass now.

[07:39] <autrijus> lightstep: t/subroutines

[07:39] <autrijus> er, for EUMM.

[07:39] <autrijus> lightstep: I'll fix rightaway

[07:40] <lightstep> how can i test what domething prints?

[07:40] <Alias_> hijcak STDOUT

[07:40] <Alias_> jack

[07:40] <autrijus> lightstep: you can just push it to sometihng 

[07:40] <lightstep> ok

[07:41] <autrijus> btw. I think that is bogus

[07:41] <autrijus>  for ("a\n", "b\n") -> {my $x = chomp $_; say $x}

[07:41] <autrijus> this should not bind $_ anyway

[07:41] <autrijus> because -> has no implicit signature

[07:41] <autrijus> it means  for ("a\n", "b\n") -> () {my $x = chomp $_; say $x}

[07:41] <autrijus> which discards the arguments

[07:42] <wolverian> I hope that'll warn :)

[07:42] <lightstep> lots of code depends on it working

[07:42] <wolverian> lightstep, just s/ -> // and it'll work again :)

[07:42] <autrijus> wolverian: it's Eval.hs line 376

[07:42] <autrijus> feel free to throw in a warning there.

[07:42] <wolverian> hmm. 

[07:42] * wolverian pulls

[07:43] <lightstep> btw, for ("a\n", "b\n") -> {print $_; my $x = chomp $_; say $x}

[07:43] <lightstep> does bind $_

[07:43] <autrijus> lightstep: and _that_ is a bug.

[07:45] <autrijus> I'll fix it now.

[07:45] <lightstep> line 376 makes for ... -> {} work like for ... {}, doesn't it?

[07:45] <lightstep> i figured i have no idea how to test this stuff

[07:45] <autrijus> no, it discards $_

[07:45] <autrijus> er

[07:46] <autrijus> it discards the iterator

[07:46] <autrijus> there will be no topic

[07:50] <lightstep> how do i test if a string is a substring of another?

[07:51] <QtPlatypus>  $string ~~ /substring/

[07:51] <lightstep> if the second is in a variable?

[07:52] <Khisanth> "PackFile_unpack: Bytecode not valid for this interpreter:" < do I need to get a newer revision of pug|parrot or is there something else going on?

[07:52] <QtPlatypus>  $string ~~ /$substring/

[07:52] <autrijus> lightstep: the fix is in

[07:52] <QtPlatypus> I think.

[07:52] <autrijus> Khisanth: what are you doing?

[07:52] <autrijus> lightstep: index()

[07:52] <Khisanth> well I was just trying s:3x:3rd/a/b/

[07:54] <Khisanth> that wasn't the full error though

[07:54] <autrijus> the x and rd modifiers won't work

[07:54] <autrijus> and you need parrot 0.2.2

[07:56] <Khisanth> ah, need older parrot :)

[07:56] <svnbot6> r5547, autrijus++ | * Implicit variables -- $^a $^b etc -- now _only_ works in bare blocks,

[07:56] <svnbot6> r5547, autrijus++ |   in accordance with S06.  Existing code may or may not break.

[07:59] <autrijus> anyone running smoke for r5549?

[08:05] <svnbot6> r5548, autrijus++ | * unbreak fp's `map` and `grep`

[08:05] <svnbot6> r5549, autrijus++ | * move modules that has no chance of pass test suite to modules/.

[08:06] <gaal|work> i just started a smoke, autrijus, but am busy at work so i won't be able to be very active in the release process

[08:06] <autrijus> that's fine

[08:06] <autrijus> I'll deal :)

[08:07] <gaal|work> kinda suspected that :)

[08:07] <autrijus> (and if you're busy, then ^C the smokE)

[08:07] <autrijus> since it's known to be bogus -- r5550 fixed it

[08:07] <gaal|work> ah

[08:07] <autrijus> I'll start a smoke myself then

[08:07] <autrijus> it only takes 15 minutes now.

[08:07] <autrijus> :)

[08:08] <autrijus> much better than ~40

[08:08] <gaal|work> heh.

[08:12] <svnbot6> r5550, autrijus++ | * oops, extraction was disabled for blocks too. reactivated

[08:18] <autrijus> Still burning: DateTime, Net-IRC, Perl-Compiler, Set, Span, Test-Builder, Test

[08:18] <gaal|work> NameGen here too

[08:18] <autrijus> namegen is part of P-C

[08:19] <gaal|work> walla.

[08:19] <autrijus> all of them looks curable anyway. I'll start from Test and work backwards.

[08:19] <autrijus> I wonder what's wrong with Net::IRC's export failure

[08:20] * autrijus is multitasking between pugs and $work -- bbiab

[08:32] <Aankhen``> No subs are being exported.

[08:32] <svnbot6> r5551, autrijus++ | * fix Test's 3-output.t by disabled TEST_ALWAYS_CALLER

[08:32] <svnbot6> r5551, autrijus++ |   for the subprocess.

[08:32] <gaal|work> still t\pugsrun\10-dash-uppercase-m.t: *** No compatible subroutine found: "&load_test"

[08:32] <svnbot6> r5552, autrijus++ | * fix Span.pm's failures.

[08:33] <Aankhen``> (from Net::IRC)

[08:33] <Aankhen``> Lunch, BBIAF. &

[08:34] <gaal|work> statements/for.t crashes

[08:35] <autrijus> gaal|work: fixed

[08:35] <autrijus> will commit shortly

[08:35] <gaal|work> dollar_underscore fails one

[08:36] <gaal|work> implicit_params has an unexpected pass

[08:36] <gaal|work> subroutine\subroutine fails 2

[08:36] <gaal|work> smoke up in a jiffy

[08:38] <autrijus> down to 6 failures in modules

[08:38] <svnbot6> r5553, autrijus++ | * more test cleanups

[08:38] <gaal|work> http://perlcabal.org/~gaal/smoke_xp.html

[08:38] <autrijus> danke

[08:38] <gaal|work> eh, i don't know why it says 5549 in the build info

[08:38] <gaal|work> it's 5550

[08:52] <brentdax> ...I didn't notice that before...

[08:54] <brentdax> ./pugs -e 'my $x=1; $x.foo().bar()' complains about the lack of bar() first; only if I remove bar() does it complain about foo().  This might help explain the weird method-chaining bugs I've been seeing.

[08:54] <svnbot6> r5554, Aankhen++ | * ext/libwww-perl/t/api.t: use `use_ok` instead of hand-rolled variant. :-)

[09:09] <gaal|work> methods/instance has a yellow.

[09:09] <svnbot6> r5555, autrijus++ | * relax implicit $_'s existence in subroutines without formal parameters.

[09:11] * Aankhen`` paints gaal|work pink.

[09:11] <gaal|work> examples.t and general/basic fail..... smoke in a bit.

[09:12] * gaal|work is multicolored

[09:12] <gaal|work> like a parrot?

[09:15] <Aankhen``> Nah, you're just pink.

[09:17] <brentdax> Can the Time::Local oject localtime returns actually do anything?

[09:17] <brentdax> *object

[09:19] <Aankhen``> brentdax >> It can look pretty... :-D

[09:20] <brentdax> Oh, it's in Prelude...

[09:21] <brentdax> Hmm, seems the method bug is really a bug when attaching a method to any subroutine--localtime.sec isn't happy, but $localtime_obj.sec is.

[09:21] <autrijus> yeah, known issue

[09:24] <brentdax> Oh, alright.  I'll keep working around it, then.

[09:25] <brentdax> That one fix will probably cut about a quarter of the line count off...

[10:20] <svnbot6> r5556, autrijus++ | * eliminate cruft: $*PACKAGE, envStash

[10:20] <svnbot6> r5557, autrijus++ | * nested `use` no longer cripple the middle module's environment.

[10:20] <svnbot6> r5558, autrijus++ | * It's "generating" prelude, not "installing" prelude

[10:45] <gaal|work> http://perlcabal.org/~gaal/smoke_xp.html # r5558 # 7591 ok, 389 failed, 1014 todo, 107 skipped and 0 unexpectedly succeeded

[10:50] <autrijus> gaal|work: msys?

[10:51] <gaal|work> native win32

[10:51] <autrijus> can you look into the failure of 01-string-with-spaces

[10:51] <autrijus> and see if we should just excise that test?

[10:51] <gaal|work> sure

[10:51] <autrijus> 323 out of 389 is that single tet.

[10:53] <gaal|work> it's a fs permission issue

[10:53] <gaal|work> i say we junk it for now :)

[10:53] <gaal|work> it's also a very slow test, it creates a process that many times

[10:54] <autrijus> mv into t_disabled or rm away, either is fine with me, please excise

[10:55] <Elly> is there a version of perl6 that I can play with right now?

[10:56] <autrijus> Elly: yes, we are about to release 6.2.8

[10:56] <autrijus> but you can download the previous version -- see http://pugscode.org/ and Perl6::Pugs on CPAN

[10:58] <Elly> How's Perl6 on Parrot going?

[10:58] <gaal|work> autrijus, done as r5559

[10:58] <gaal|work> meeting &

[10:58] <autrijus> Elly: we can run the test suite with parrot as of 6.2.8; only 3% or so of tests pass currently.

[10:59] <Elly> coolness

[10:59] <Elly> I'm waiting on Perl6 ;D

[10:59] <autrijus> but basic subroutine calls and flow control, arithmetic, string manipulation etc all works

[10:59] <autrijus> Elly: but Perl6 on Perl5 may be even more fun to you

[11:00] <autrijus> please see http://svn.openfoundry.org/pugs/docs/notes/plan .

[11:01] <Elly> do you guys think parrot is likely to be the sort of thing that will be installed on a large proportion of computers? (like Java)

[11:01] <svnbot6> r5559, gaal++ | move away problematic test until its fs permission problems are resolved

[11:02] <autrijus> Elly: I have no idea. it may or may not.

[11:02] <autrijus> also do you think firefox to be on a large proportion of computers?

[11:02] <Elly> well...allegedly around 10%

[11:02] <autrijus> yeah

[11:03] <autrijus> so maybe one day firefox will bundle parrot.

[11:03] <Elly> that would be cool

[11:03] <autrijus> for me that would be good enough :)

[11:04] <autrijus> but for now... I'm more focused on getting Perl6 on a large proportion of computers, instead of parrot

[11:04] <autrijus> that may also have something to do with this being #perl6 not #parrot :) (#parrot is on irc.perl.org)

[11:05] <Elly> well, a computer with perl6 is a computer with parrot isn't it?

[11:05] <autrijus> not neccessarily; for example, currently you can install GHC instead of Parrot to run Perl6.

[11:05] <autrijus> my hope is that eventually you can install perl5 instead of Parrot to run Perl6.

[11:05] <autrijus> or even javascript.

[11:05] <autrijus> I mean, run perl6 in a browser's javascript engine

[11:06] <Elly> Now that would be awesome.

[11:06] <ToniEisner> that could change a lot of things...

[11:06] <Elly> I shudder to think of how hairy that would be though

[11:06] <autrijus> :)

[11:06] <Elly> how would that work, you'd have a javascript wrapper with Perl6 code inside it?

[11:07] <autrijus> no, it works by compiling perl6 into javascript, much like how C is compiled to assembly

[11:07] <Elly> oh

[11:07] <Elly> hey, that's cool ;D

[11:10] <Elly> except

[11:10] <Elly> wouldn't that still be really hairy? =\

[11:10] <autrijus> yes it would, except it will be invisible to the user, I think

[11:12] <Elly> well

[11:12] <Elly> yeah, I guess

[11:12] <Elly> You'd do perl6 --compile-to="javascript" myfile.pl > myfile.js?

[11:13] <Elly> or something?

[11:13] <autrijus> currently it's 

[11:13] <autrijus> pugs -C Parrot myfile.pl > myfile.pir

[11:13] <autrijus> pugs -C Haskell myfile.pl > myfile.hs

[11:13] <autrijus> etc

[11:13] <Elly> right

[11:13] <autrijus> we don't yet have a javascript backend written

[11:13] <autrijus> but iff we do, then yes, that's how it will look like.

[11:14] <Elly> so will eval() work?

[11:14] <ToniEisner> and that curently work on windows and linux the same way?

[11:14] <autrijus> ToniEisner: yes

[11:14] <ToniEisner> thkx

[11:14] <Elly> I suppose not?

[11:14] <autrijus> Elly: eval() will work once the compiler itself is ported from Haskell to Perl6.

[11:14] <autrijus> (which is part of the plan)

[11:14] <Elly> I meant in JavaScript

[11:14] <autrijus> if that happens, then the compiler itself can be compiled to javascript to make eval() work.

[11:15] <Elly> I wouldn't think it'd be possible to do a lot of the cooler perl stuff in JavaScript

[11:15] <autrijus> because you will then have the entire compiler running on js.

[11:15] <autrijus> not saying it will be fast :)

[11:15] <autrijus> but should be possible.

[11:15] <Elly> like threads and sockets and `` and qx()

[11:15] <Elly> Wait, we are talking about the same language right?

[11:15] <Elly> JavaScript?

[11:15] <Elly> but there's whole masses of Perl6 that won't work on JS and can't be emulated

[11:15] <autrijus> yes... javascript. if it's running inside a browser, then you won't have `` primitives

[11:15] <autrijus> but if you're running inside SeaMonkey in priviledged mode

[11:16] <autrijus> then you can do pretty much everything.

[11:16] <autrijus> (remember much of the firefox extensions is written in javascript)

[11:16] <Elly> ah, yeah

[11:16] <autrijus> see for example JSSh, a shell server written in javascript.

[11:16] <Elly> I thought you meant webpages would want to execute perl client-side via JS

[11:17] <autrijus> they will, but then qx() will be forbidden

[11:17] <autrijus> just like java applets in sandbox

[11:18] <Elly> qx() and threads and sockets and open() and all the stuff that makes perl hacking worth doing ;(

[11:18] <autrijus> well, look at it this way... you are writing AJAX

[11:18] <Elly> but I see what you mean with the priveleged thing

[11:18] <Elly> AJAX?

[11:18] <autrijus> instead of using two languages, one for server side and one for client side

[11:19] <autrijus> wouldn't it be fun to use a single lang for both

[11:19] <autrijus> http://en.wikipedia.org/wiki/AJAX

[11:19] <broquaint> pugs -c HTML leetcode.pl > leetcode.html

[11:19] <autrijus> maps.google.com type hackery

[11:20] <theorbtwo> (maps.google.com hacking)++

[11:20] * theorbtwo gets an idea.

[11:21] <Elly> heh, wow

[11:22] <Elly> so perl6 will compile into a lot of different languages?

[11:22] <Elly> some of which are themselves interpreted?

[11:22] <autrijus> that is the current plan.

[11:22] <broquaint> Perl6 doesn't really exist it's purely an Aristotelean concept.

[11:22] <autrijus> I will at least see that it targets three: Parrot, Perl5, GHC

[11:23] <Elly> will Perl6 compile into Perl6? :D

[11:23] <autrijus> that is a good question :)

[11:23] <autrijus> I'm interested in seeing it ultimately do

[11:23] <autrijus> but that depends on other people who want to work toward that as well.

[11:25] <theorbtwo> Hm, JSRef's parser isn't yacc-based.

[11:25] <autrijus> (we need emitter not parser)

[11:25] <Elly> I meant that as a joke ;\

[11:25] <Elly> can you make it compile to a standalone binary?

[11:25] <autrijus> Elly: pugscc foo.pl

[11:25] <autrijus> already does that

[11:25] <autrijus> and the resulting exe has no external deps.

[11:25] <theorbtwo> Yeah, I know.  I need a parser, though, to make sense of maps.11.js.

[11:26] <autrijus> oh :)

[11:26] <Elly> sweet

[11:26] <Elly> so Perl6 currently exists in a form in which I can code?

[11:26] <autrijus> Elly: sure!

[11:26] <theorbtwo> Yes is the short answer.

[11:26] <autrijus> see the presentation slides in the left top corner of pugscode.org

[11:26] <Elly> so perl6 is really going to kind of do everything

[11:26] <theorbtwo> The slightly longer answer is svn co http://svn.openfoundry.org/pugs/

[11:26] <Elly> compile to binaries, be a client-side language for web browsers, and be an all-around awesome language for everyone

[11:26] <theorbtwo> Make easy things easy, and hard things possible, yes.

[11:27] <autrijus> and also make the impossible just happen!

[11:27] <Odin-> The longer answer is "depends on what you want to do"...

[11:27] <autrijus> run infinite loop 10x faster!

[11:27] <broquaint> Just stick the impossible in a junction and let the multiverse do the rest.

[11:28] <autrijus> Elly: par.perl.org, my other project, let you pack perl5 into exe as well.

[11:28] <autrijus> but enough advertisement... dinner, bbiab &

[11:29] <Elly> I've seen par

[11:29] <Elly> it's cool

[11:29] <theorbtwo> (pugscc and par take quite different ways to do it, though.)

[11:31] <JaffaCake> Can anyone tell me how to find out the exact pugs command that is being run by the test harness for a particular test?

[12:11] <svnbot6> r5560, iblech++ | * Usual svn properties (including svn:ignore for the module dirs).

[12:11] <svnbot6> r5560, iblech++ | * Added some more info to pugs::hack, section about the svn props.

[12:14] <Elly> why does svnbot6 append '++' to all nicks?

[12:15] <dudley> karma iblech

[12:16] <Elly> oh, perlbot keeps track of karma?

[12:16] <dudley> jabbot did, I thought

[12:17] <dudley> perlbot, karma dudley

[12:17] <perlbot> dudley doesn't have any karma

[12:18] <dudley> well, there you go

[12:19] <Elly> perlbot, karma iblech

[12:20] <perlbot> iblech doesn't have any karma

[12:25] <nothingmuch> perlbot: highest karma

[12:25] <perlbot> The top 5 karma entries: tybalt89: 3, $|: 2, Yaakov: 2, hobbs: 2, ': 1

[12:25] <nothingmuch> i think it was reset

[12:26] <nothingmuch> autrijus had around 800 a month ago

[12:36] <svnbot6> r5561, iblech++ | * Moved ext/POE to modules/POE, as it's 1. far too small for a ext/ and 2.

[12:36] <svnbot6> r5561, iblech++ |   doesn't work.

[12:36] <svnbot6> r5561, iblech++ | * Noted that change in pugs::hack.

[12:52] <svnbot6> r5562, autrijus++ | * For methods, an extra *%_ is appended to the signature

[12:52] <svnbot6> r5562, autrijus++ |   at compilation time instead of binding time.

[12:52] <svnbot6> r5562, autrijus++ | * Also, methods does not implicitly extract $_ anymore.

[12:53] <autrijus> preflight: please start another round of smoke

[12:53] <autrijus> I'm working on ChangeLog

[12:53] <autrijus> will push a new tarball

[12:54] <nothingmuch> seen stevan 

[12:55] <nothingmuch> perlbot: seen stevan?

[12:56] <nothingmuch> okay, screw that

[12:56] <castaway_> .oO( lastlog stevan)

[12:56] <nothingmuch> i need a volunteer to make a decision for me

[12:56] <gaal|work> the answer's no!

[12:56] <castaway_> last seem 06:01 CEST

[12:56] <theorbtwo> Try a coin, nothingmuch.

[12:56] <nothingmuch> it's not yes/no

[12:56] <castaway_> s/seem/seen/

[12:56] <theorbtwo> 23?

[12:56] <gaal|work> the answer's mu!

[12:57] <nothingmuch> Test::TAP::Model::Consolidated isa Test::TAP::Model 

[12:57] <nothingmuch> both need to have Test::TAP::Model::Colorful mixed in

[12:57] <nothingmuch> optionally

[12:57] <nothingmuch> how would I make it not very ugly?

[12:57] *** brentdax_ is now known as brentdax

[12:57] <gaal|work> why optionally?

[12:58] <nothingmuch> because ::Colorful is in another package

[12:58] <nothingmuch> I'm thinking ::Colorful just adds methods to Test::TAP::Model

[12:59] <nothingmuch> but another way is to start using the wierd perl5 hacks like spiffy, mixin, or Class::Traits

[12:59] <gaal|work> datetime has fails. is that okay?

[12:59] <gaal|work> latest r

[12:59] <nothingmuch> gaal|work: that's the dispatch problem

[12:59] <autrijus> er, sorry, I didn't check in my round of test fixes

[12:59] <autrijus> so the smoke will be bogus

[13:00] <autrijus> r5563

[13:00] <gaal|work> resmoke?

[13:00] <gaal|work> -p?

[13:00] <autrijus> resmoke on r5563

[13:00] <autrijus> yeah

[13:00] <gaal|work> ack

[13:00] <autrijus> should be all pass

[13:01] * nothingmuch is also starting a smoke

[13:01] <nothingmuch> so what do you guys think WRT ::Colorful?

[13:02] <gaal|work> how often are colorful methods called? is calling can impractical?

[13:02] <gaal|work> how right is the coupling conceptualy? maybe offer a dummy plugin for when you don't have colorful?

[13:03] <svnbot6> r5563, autrijus++ | * huge set of test cleanup

[13:03] <nothingmuch> gaal|work: they are called from the template

[13:03] <nothingmuch> ->css_class

[13:03] <castaway_> if TTMConsolidated isa TTModel then load it in TTModel, on demand?

[13:03] <nothingmuch> or the percentage color thing

[13:03] <nothingmuch> castaway_: i'm inclined to do that, but I'm worried about pollution

[13:03] <gaal|work> so mix in a dummy when you don't have color?

[13:03] <nothingmuch> a dummy?

[13:03] <gaal|work> noop plugin

[13:04] <castaway_> polution of methodnames in space?

[13:04] <gaal|work> which has the same methods as colorful

[13:04] <gaal|work> but doesn't do anything

[13:04] <castaway_> the question is a bit vague, IMO.. we've no idea how these things are normally used, or now colorful changes them

[13:06] <castaway_> s/now/how/

[13:06] <theorbtwo> There's no reason not to have the colorful bit always in there.

[13:06] <theorbtwo> What colors they show up as should be in the CSS anyway, not set on each element.

[13:06] <theorbtwo> So really it's just a matter of getting the class name, which isn't a specific enough operation that it needs to be segregated.

[13:06] <gaal|work> ext\Test-Builder\t\010_Test_Builder.t : pugs: ../../pugs.exe: runProcess: does not exist (No such file or directory)

[13:07] <gaal|work> ext\Test\t\3-output.t : '.' is not recognized as an internal or external command, operable program or batch file. # Looks like you failed 1 tests of 1

[13:07] <gaal|work> the first one is a platform oversight, need {_exe} i gues

[13:08] <gaal|work> ext\WTemplate\t\basic.t fails 2, too

[13:09] <autrijus> gaal|work: it's a slash / backslash problem

[13:09] <autrijus> please fix away

[13:09] <autrijus> WTemplate worksforme

[13:09] <autrijus> what's the failure?

[13:11] <gaal|work> oh: no parrot in path

[13:11] <autrijus> !

[13:11] <autrijus> oh, please apply the same skip_rest fix as t/rules

[13:11] <autrijus> then

[13:11] <autrijus> and/or t_disabled/rules

[13:11] * autrijus is still changelogging

[13:12] <pasteling> "gaal" at 212.179.43.225 pasted "wemplate" (15 lines, 632B) at http://sial.org/pbot/11733

[13:12] <gaal|work> but wait no, different shells

[13:13] <gaal|work> huh, no. same error in w32 shell.

[13:14] <gaal|work> autrijus, which fix?

[13:14] <autrijus> if(eval('!("a" ~~ /a/)')) { skip_rest "skipped tests - rules support appears to be missing";

[13:14] <autrijus> }

[13:14] <autrijus> oh and exit too

[13:15] <gaal|work> fix alek

[13:15] <gaal|work> ok

[13:18] <nothingmuch> http://www.lscheffer.com/bf2malbolge.html

[13:19] <gaal|work> no way

[13:19] * gaal|work is reminded of the worlds hardest programming challenge

[13:20] <autrijus> mm?

[13:20] <integral> is it ok to commit a fix for `make profiled` to Makefile.PL at this stage? (to make it work with the precomp prelude)

[13:20] <gaal|work> http://www.livejournal.com/users/gaal/2003/09/10/

[13:20] <autrijus> integral: sure!

[13:20] * autrijus stresses again there is no freeze in pugs development

[13:20] <integral> is a release close?

[13:21] <autrijus> very

[13:21] <autrijus> a preflight tarball will be up as soon as I'm done with changelogging and gaal done with the two fixes

[13:21] <autrijus> (trivial skip_rest)

[13:22] <gaal|work> autrijus, does 010_test_builder workforyou? i have the path ..\..\pugs.exe but it stll fails.

[13:23] <autrijus> gaal|work: it worksforme but it skips that

[13:23] <autrijus> I'm tempted to just skip that test.

[13:23] <gaal|work> oh! hmmm.

[13:23] <autrijus> skip_rest it?

[13:23] <autrijus> for now

[13:23] <gaal|work> k, sec

[13:24] <gaal|work> but line 58 isn't skipped on your version

[13:24] <gaal|work> my $res = system ....

[13:25] <autrijus> just skip_rest and exit in line 57.

[13:25] <autrijus> I think.

[13:25] <svnbot6> r5564, bsmith++ | Fixed `make profiled` to also build the precompiled prelude.

[13:26] <gaal|work> done as r5565.

[13:26] <gaal|work> starting new smoke?

[13:26] <gaal|work> or waiting for tarball?

[13:27] <autrijus> wait for tarball :)

[13:27] * gaal|work considers a ZT interpreter

[13:28] <nothingmuch> oof!

[13:28] <autrijus> wow, this release took a full month

[13:28] <nothingmuch> inheritence scheme is more complicated, i forgot

[13:28] <autrijus> last one was june 13rd

[13:28] <autrijus> er, 13th.

[13:29] <nothingmuch> june tenthird

[13:29] <dudley> autrijus: slowing down in your old age? :-)

[13:30] <nothingmuch> if anyone is willing to help me discuss this problem, please /msg

[13:30] <nothingmuch> i hate inheritence

[13:30] <svnbot6> r5565, gaal++ | skip problem tests

[13:31] <nothingmuch> i think delegation support is the thing I'm most happy about in p6

[13:31] <gaal|work> "delegation support"?

[13:31] <nothingmuch> has $.attr handles <method>>

[13:31] <Limbic_Region> no preflight announcement in the topic???

[13:31] <nothingmuch> etc etc

[13:32] <Limbic_Region> salutations all btw

[13:32] <autrijus> dudley: no, mostly because huge architecure changes :)

[13:33] <nothingmuch> pugs has more inertia than any project I've ever seen

[13:36] <gaal|work> i have to go to another meeting soon - i'll try to get another smoke going if the tarball lands by then - does anyone volunteer to test 'make install' for safety?

[13:36] <autrijus> nothingmuch: dead project has infinite inertia

[13:36] <gaal|work> inert, ja.

[13:36] <dudley> I can try out 'make install'

[13:37] <gaal|work> cool, thanks. dudley++

[13:37] <nothingmuch> autrijus: i don't understand that claim

[13:38] <_Jonathan_> nothingmuch: Inertia is a measure of how hard it is to get something to move...and dead projects don't move. :)

[13:39] <integral> or a measure of how hard it is to slow down...

[13:39] <QtPlatypus> _Jonathan_: Inertia is a mesure of how hard it is to change an obects velosity.

[13:39] <_Jonathan_> OK, this is why I only just scraped through physics. :)

[13:40] *** iwlx is now known as wilx

[13:40] <nothingmuch> _Jonathan_: ah, ok

[13:41] <gaal|work> meeting &

[13:41] <autrijus> nothingmuch: you can't move a dead project, hence it has the most intertia

[13:42] <QtPlatypus> pugs has alot of momentem.

[13:44] <autrijus> uploading

[13:45] <Limbic_Region> some may say that Pugs has reached critical mass

[13:45] <Limbic_Region> which IMO it has

[13:45] <autrijus> I'd rather that it had reached critical energy

[13:45] <autrijus> but wait, they are interchangeable

[13:45] <Limbic_Region> heh

[13:46] <autrijus> eta 1min for upload

[13:46] <Limbic_Region> well - I wasn't talking about the connatation for nuclear reactions or halting the expanding universe

[13:46] * _Jonathan_ wishes he could convert some of his mass into energy...

[13:46] <autrijus> that's what exercise is for

[13:46] <svnbot6> r5566, autrijus++ | * Preflight #1!

[13:47] <_Jonathan_> Hey, I'm trying. Gym, walking holiday...

[13:47] <_Jonathan_> Seems my smokes are broken due to me having an out of date copy of some module...

[13:48] <autrijus> http://perlcabal.org/~autrijus/Perl6-Pugs-6.2.8-pre1.tar.gz

[13:48] <autrijus> 1308325 sha1(9b13ea64b60ed1a5e4de14356e77c3f573c4315e)

[13:48] <autrijus> somebody /topic it

[13:48] <clkao> autrijus: did you see my error yesterday?

[13:48] <autrijus> clkao: p5 error?

[13:48] <clkao> can't run any test, it says can't find test.pm

[13:48] <clkao> no, pure pugs

[13:49] <autrijus> oh. if it's during my sleep

[13:49] <autrijus> then it's likely due to rafl's changes

[13:49] <autrijus> it should be fine now

[13:49] <clkao> k

[13:50] *** Limbic_Region changes topic to: We are in Preflight #1http://perlcabal.org/~autrijus/Perl6-Pugs-6.2.8-pre1.tar.gz | Chip needs help!!! http://www.geeksunite.net | http://pugscode.org/ <Overview Journal Logs> | http://pugs.kwiki.org | paste: http://sial.org/pbot/perl6

[13:53] <kolibrie> help? my 'svk up' says: Syncing //mirror/pugs(/mirror/pugs) in /var/projects/pugs to 5138.

[13:53] <kolibrie> what does that mean?

[13:53] <kolibrie> but it does nothing

[13:54] <Limbic_Region> depending on your version of svk - you may have to sync and then up

[13:54] * Limbic_Region found this out the hard way

[13:54] <autrijus> kolibrie: you may want "svk pull".

[13:54] <autrijus> actually, you certainly want that :)

[13:54] <autrijus> "svk up" is an offline operation.

[13:54] <kolibrie> aha

[13:54] <kolibrie> doing something now

[13:54] <autrijus> because the repository is at your local hard drive

[13:55] <kolibrie> autrijus: thanks

[13:55] <autrijus> np :)

[13:55] <Limbic_Region> heh - so svk pull does a svk sync and a svk up in 1 operation?

[13:55] *** autrijus changes topic to: Preflight #1: http://perlcabal.org/~autrijus/Perl6-Pugs-6.2.8-pre1.tar.gz  | http://pugscode.org | http://pugs.kwiki.org | Paste: http://sial.org/pbot/perl6 | http://www.geeksunite.net

[13:55] <Limbic_Region> hmmm - I guess I should update my update script then

[13:56] <autrijus> Limbic_Region: yes, and if you are working with local branch, then it also does a merge.

[13:56] <dudley> how do you commit w/svk, svk push?

[13:56] <autrijus> (from vendor trunk to local branch)

[13:56] <autrijus> dudley: for mirror path, "svk ci" will commit back

[13:56] <autrijus> if you have local branch, then svk ci will ci to hard disk

[13:56] <autrijus> then svk push will push it back.

[13:56] <Limbic_Region> svk ci -m "your message"

[13:57] <dudley> cool.

[13:57] <autrijus> # http://perlcabal.org/~autrijus/svk-overview.png

[13:58] * dudley eagerly anticipates the exploding hard drive from 'make install'

[13:59] <autrijus> clkao: set perlcabal.org to svk.elixus.org whitelist?

[13:59] <autrijus> greetings iblech

[14:00] <iblech> Hi :)

[14:00] <iblech> autrijus: http://linide.sourceforge.net/pugs-svngraph-6.2.8.png

[14:01] <dudley> 'make install' works just fine

[14:01] <autrijus> cool!

[14:01] <autrijus> I checked in some minor ChangeLog fix

[14:02] <autrijus> people with english-fu please proofread

[14:02] <autrijus> (r5567)

[14:02] <autrijus> iblech: cool, still nicely linear

[14:03] <castaway_> english-fu, at last, one I can actually claim :9

[14:03] <svnbot6> r5567, autrijus++ | * META.yml and ChangeLog cleanup

[14:04] <nothingmuch> given a few smoke reports

[14:04] <nothingmuch> and the conslidated view

[14:04] <nothingmuch> you typically want to distinguish between them

[14:04] <nothingmuch> along axes like revision, platform, build options, etc

[14:05] <nothingmuch> does anybody think they can take in N yaml reoprts, and programmatically create a distinguishing string

[14:07] <nothingmuch> it's simple for simple cases:

[14:07] <nothingmuch> take N reports, generate a list of attrs, for revision, platform, etc

[14:08] <nothingmuch> and take away all the fields that are the same for them all

[14:09] <jp-autark> smoke for pre1-tarball: http://home.ifi.uio.no/~davidra/smoke.html

[14:09] <svnbot6> r5568, iblech++ | ChangeLog -- Fixed one grammatico.

[14:10] * QtPlatypus triggers a new error "No entries on IntReg_Stack!"

[14:11] <theorbtwo> Whee, fun.

[14:11] <theorbtwo> Parrot, I take it?

[14:11] <QtPlatypus> pugs has gained  a majour speed boost.

[14:12] <Limbic_Region> runtime anyway

[14:12] * Limbic_Region is still waiting for the compile to finish

[14:12] * QtPlatypus nods to theorbtwo "I think so, most likely in PGE"

[14:12] <nothingmuch> also reload my smoke test occasionally

[14:13] <nothingmuch> does anybody think they could do the YAML thing?

[14:14] * Limbic_Region starts nmake test on preflight #1 (Win32 with no bells and whistles i.e. p5, haskell, parrot)

[14:14] <Limbic_Region> nothingmuch - what is it you want again

[14:14] * Limbic_Region is up for a p5 task if that's what is on the table

[14:14] <nothingmuch> it is

[14:14] <nothingmuch> the yaml_harness produces a big structure

[14:15] <nothingmuch> given N such structures, i'd like a small snippet of code that goes through them

[14:15] <nothingmuch> and creates a distinguishing string for each

[14:15] <nothingmuch> it does this by comparing platform, revision, arch, settings, etc

[14:15] <nothingmuch> and then strips off everything that's the same

[14:15] <Limbic_Region> ok

[14:16] <nothingmuch> ideally you have a 10 char string that is humanly distinct per report

[14:16] <Limbic_Region> where everything the same means everything across all N structures?

[14:16] <nothingmuch> yes

[14:16] <nothingmuch> if you have an idea on add more DWIMmery, that's good

[14:17] <Limbic_Region> let me explain what I think you are after in my own words

[14:17] <Limbic_Region> have you confirm/deny

[14:17] <Limbic_Region> and then ask a question or two

[14:18] <nothingmuch> sire

[14:18] <nothingmuch> sure

[14:18] <Limbic_Region> you have a base set of qualities that are going to be the same across all N structures

[14:18] <Limbic_Region> you want a 10 char string that can be generated that says how any given structure differes from those base qualities

[14:18] <nothingmuch> so far so good

[14:19] <nothingmuch> (WRT to other structures in the same set)

[14:19] <Limbic_Region> is the base set of qualities ever expected to change?

[14:19] <kolibrie> autrijus: ChangeLog looks good to me (english-foo-wise)

[14:19] <autrijus> cool

[14:20] <autrijus> jp-autark: can you sync up and rerun t/unspecced/p5/array.t t/unspecced/p5/method.t by hand?

[14:20] * nothingmuch is amazed by his cat

[14:20] <nothingmuch> a week ago I gave him a bath

[14:20] <nothingmuch> ofcourse, he didn't really like it

[14:20] <nothingmuch> but started having some fleas

[14:21] <nothingmuch> appearantly more than we thought, becuase all the past week, despite the trauma, he has been so happy and calm

[14:21] <Aankhen``> " Implicit variables like `$^a` now only work in bare blocks"

[14:21] <svnbot6> r5569, autrijus++ | * TODOify failing perl 5 tests, courtesy jp-autark

[14:21] <Aankhen``> Shouldn't that be "placeholder variables"?

[14:21] <nothingmuch> why is that?

[14:21] <jp-autark> autrijus: how do you run that by hand?

[14:21] <nothingmuch> sub { $^a + $^b }; # why is this bad?

[14:22] <autrijus> jp-autark: ./pugs t/...

[14:22] <iblech> jp-autark: ./pugs t/.../

[14:22] <autrijus> nothingmuch: it's against the spec.

[14:22] <Limbic_Region> jp-autark - if you haven't done make install then you will need to copy Test.pm to the same location as pugs executable

[14:22] <Aankhen``> That aside, aren't they "placeholder" variables?

[14:22] <nothingmuch> i mean, why does the spec forbid it?

[14:22] <jp-autark> ah...

[14:22] <gaal|work> rehi

[14:22] <Limbic_Region> nothingmuch - any response to my YAML question project?

[14:22] <autrijus> nothingmuch: because implicit vars are meant only for places where there cannot be formal params.

[14:22] <autrijus> nothingmuch: it's one or the other

[14:22] <gaal|work> preflight status?

[14:22] <nothingmuch> Limbic_Region: the base set of qualities is pugs dependant

[14:22] <autrijus> gaal|work: see topic

[14:23] <nothingmuch> sorry, i missed it

[14:23] <nothingmuch> autrijus: fair enough

[14:23] <gaal|work> worth starting that one?

[14:23] <autrijus> nothingmuch: if you want to pushback to p6l, please go ahead. I'm fine either way

[14:23] <nothingmuch> nonono

[14:23] <autrijus> gaal|work: sure, known 5 failures with p5embed

[14:23] <nothingmuch> enough pointless discussions

[14:23] <Limbic_Region> nothingmuch - if the qualities in common is expected to change I don't see how it is possible to describe the differences in a 10 char string

[14:23] <gaal|work> right. d/ling

[14:23] <autrijus> I thought p6l stands for point-6-less

[14:23] <jp-autark> autrijus: array: 2/11 TODO, method: 1/13 TODO

[14:23] <autrijus> jp-autark: good, that's as expected

[14:24] <autrijus> so it's otherwise clean for you

[14:24] * autrijus waits for Limbic_Region and gaal|work's report to trickle in

[14:24] * Limbic_Region is on builtins/strings/length ATM 

[14:25] <Limbic_Region> but it is moving right along now

[14:25] <Limbic_Region> nothingmuch - you get my point?

[14:25] <Limbic_Region> if I change the YAML structures to automobiles

[14:25] <nothingmuch> Limbic_Region: one second, mom calling from england

[14:25] <Limbic_Region> and say they all have this type of engine, this model, etc

[14:25] <Limbic_Region> k

[14:25] <Limbic_Region> will continue to type confusion though

[14:25] <Aankhen``> If anyone's editing the ChangeLog, please sync up and merge...

[14:25] <gaal|work> compilation started. will GHC get -j 3 sometime?

[14:26] <Limbic_Region> so I build a string that says what "extras" each individual car has and encode that in a 10 char string

[14:26] <svnbot6> r5570, Aankhen++ | * ChangeLog: two small edits.

[14:26] <svnbot6> r5571, iblech++ | util/livecd/mklivecd.pl -- Adjusted default initrd size again, as pugs gains size :)

[14:26] <iblech> autrijus: http://linide.sf.net/pugs-livecd-6.2.8.iso

[14:26] <autrijus> thanks!

[14:27] <Limbic_Region> my program breaks if I start handling cars with a new add on I previously didn't know about

[14:29] <Limbic_Region> now in oo/methods btw

[14:29] *** brentdax_ is now known as brentdax

[14:31] <dudley> Limbic_Region: optimized build?

[14:32] <Limbic_Region> yes

[14:32] <Limbic_Region> unfortunately, as a $work machine - Pugs has to compete for resources with - well $work stuff

[14:33] <nothingmuch> bac

[14:34] <nothingmuch> Limbic_Region: i think the best solution is to have an algorithm, and a list of fields

[14:34] <nothingmuch> the list of fields can be maintained

[14:35] <nothingmuch> and the algorithm compares the fields in N yaml reports, and returns a hash of (string => structure)

[14:35] <gaal|work> first pass build completed - about 9 minutes.

[14:35] <gaal|work> i think "generating precomiled prelude" can be further golfed to "precompiling prelude", no? :)

[14:36] <Limbic_Region> nothingmuch - I don't have any issues with the project if "what is in common" is static because then I only have to worry about describing the differences - which will have a decoder

[14:36] <autrijus> gaal|work: no, just keep it that way :)

[14:36] <autrijus> there are two "generating" messages anyway

[14:36] <Limbic_Region> if the "what is in common" changes - not only does the encoded string change but so does the legend

[14:36] <Limbic_Region> I don't have a problem with that either (programmatically speaking)

[14:36] <nothingmuch> the string should be independant, and is throwaway

[14:36] <nothingmuch> let me show you an example

[14:37] <gaal|work> yay, second pass isn't too bad, just ~2 minutes

[14:37] <Limbic_Region> but I was under the impression that this was supposed to be human readable

[14:37] <nothingmuch> yes

[14:37] <nothingmuch> only humans read it, not machines

[14:37] <nothingmuch> http://nothingmuch.woobling.org/example.html

[14:37] <nothingmuch> under dummy.t you should have two strings

[14:37] <nothingmuch> the user provides them

[14:37] <nothingmuch> since our yaml_harness has more data than just the test results, we can create a string

[14:38] <nothingmuch> like have the first line be 'PUGS_EMBED=""' and the second have 'PUGS_EMBED="perl5"'

[14:38] <nothingmuch> if that was the only difference

[14:38] <Limbic_Region> I understand that just fine 

[14:38] <nothingmuch> so i don't see the problem

[14:39] <Limbic_Region> ok - let me try and explain my perspective

[14:39] <nothingmuch> okay

[14:39] <Limbic_Region> let's say each position in the 10 char string stands for a different attribute

[14:39] <Limbic_Region> i.e. what type of imbedding is enabled

[14:40] <Limbic_Region> 0 = none, 1 = haskell, 2 = parrot, 3 = p5, 4 = p5 + haskell (all the way up to 7 using the unix file permissions mode)

[14:40] <Limbic_Region> that would be a single position in the string

[14:40] <Limbic_Region> you have a decoder so you can go look up what that information represents

[14:40] <nothingmuch> 10 chars is not the absolute limit

[14:41] <Limbic_Region> right - not the issue I am concerned about

[14:41] <Limbic_Region> adding more types of embedding is easy - since the single position can be any readable ascii character

[14:41] <QtPlatypus> Limbic_Region: Wouldn't it be better to have 4=p5 and 3=haskall+parrot ?

[14:41] <nothingmuch> i think if it's too much info it should have '+p5, win' and if there's only one diff, like platform the string should be 'windows'

[14:41] <Limbic_Region> QtPlatypus - was just an example

[14:42] * QtPlatypus nods.

[14:42] <nothingmuch> i don't want the users to twiddle bits in their heads

[14:42] <nothingmuch> i want a simple readable, freeform bit of text that says how this report differs from the others

[14:43] <Limbic_Region> you mean how this individual report in side this larger individual report

[14:43] <Limbic_Region> not - this individual report from any other individual report inside any other larger report

[14:43] <nothingmuch> yes

[14:43] <nothingmuch> no, not the former

[14:43] <Limbic_Region> see - that's what I was confused about

[14:43] <nothingmuch> okay

[14:43] <nothingmuch> err, i created more confusion

[14:44] <Limbic_Region> if one overal report needs to stand against another and stuff can change inbetween I was at a loss 

[14:44] <nothingmuch> the string needs to be distinct only for the bunch of reports in this consolidated report

[14:44] <gaal|work> ext\Test\t\3-output.t: '.' is not recognized as an internal or external command,

[14:44] <Limbic_Region> k

[14:44] <gaal|work> didn't i fix that?

[14:44] <Limbic_Region> that seems doable nothingmuch

[14:44] <nothingmuch> if one overall report needs to stand against another the strings are regenerated

[14:44] <nothingmuch> the world-distinct data is already in the YAML

[14:44] <nothingmuch> we don't need to reformat it

[14:45] <Limbic_Region> so in theory - every single attribute needs to have a way of being described simply

[14:45] <Limbic_Region> even though in most cases there will be a large overlap

[14:46] <Limbic_Region> the algorithm needs to be able to handle unexpected changes

[14:46] <nothingmuch> what are unexpected changes?

[14:46] <Limbic_Region> make test almost complete btw

[14:46] <Limbic_Region> things like a brand new feature

[14:47] <Limbic_Region> ok - so where can I get my hands on the YAML

[14:47] <autrijus> gaal|work: I can't duplicate that -- please hunt it down or disable the test

[14:48] <nothingmuch> Limbic_Region: yaml_harness produces them

[14:48] <gaal|work> on it

[14:48] <Limbic_Region> autrijus - sifting through the results now

[14:48] <gaal|work> may be lineendings

[14:49] <Limbic_Region> All tests successful, 89 subtests skipped.

[14:49] <Limbic_Region> Files=354, Tests=6029, 1319 wallclock secs ( 0.00 cusr +  0.00 csys =  0.00 CPU)

[14:49] <Limbic_Region> the module test results didn't fair quite so well

[14:49] <nothingmuch> the modules tests are all passing except for WTemplate

[14:49] <nothingmuch> http://nothingmuch.woobling.org/pugs_test_status/ <-- 20 mins ago

[14:50] <nothingmuch> a new one should finish shortly

[14:50] <gaal|work> oh, no, the test is expected to pass unexpectedly, but it only TODOs.

[14:50] <gaal|work> heh.

[14:52] <gaal|work> ahhh, i think stderr isn't being captured.

[14:52] <pasteling> "Limbic_Region" at 129.33.119.12 pasted "make test results for preflight" (27 lines, 1.3K) at http://sial.org/pbot/11734

[14:52] <gaal|work> 2>&1 isn't portable.

[14:53] <gaal|work> btw, anyone else getting this (just a warning)? t\pugsrun\09-dash-uppercase-c.t  *** Useless use of a constant in void context:    VInt 1

[14:53] <gaal|work> autrijus, shall i skip the Test test? 

[14:57] <autrijus> gaal|work: do so, then

[14:59] <gaal|work> done as r5572. all other tests OK.

[14:59] <svnbot6> r5572, gaal++ | skipping unportable test

[15:00] <gaal|work> i see a minor issue: pugs -V gives all paths with the correct separator ( \ )

[15:01] <gaal|work> except for "sourcedir", which uses /

[15:01] <gaal|work> hey! interactive mode works!!!

[15:01] <gaal|work> someone++

[15:01] <putter> Should we say something about the

[15:01] <putter> /usr/lib64/perl5/5.8.5/x86_64-linux-thread-multi/CORE/pp.h:130:1: warning: "RETURN" redefined

[15:01] <putter> in INSTALL?

[15:01] <autrijus> putter: it's harmless no?

[15:02] <putter> yes

[15:02] <autrijus> well, if you feel like saying something in INSTALL, go ahead, but I doubt people will look at it

[15:02] <putter> ok

[15:02] <putter> I note the worrisome

[15:02] <putter> /tmp/ghc16620.hc: In function `PugsziAST_zdwcharInc_entry':

[15:02] <putter> /tmp/ghc16620.hc:39: warning: cast to pointer from integer of different size

[15:03] <putter> this with a recent 6.4.1 stable x86_64 snapshot.

[15:03] <autrijus> src/Pugs/AST.hs:charInc x   = chr $ 1 + ord x

[15:03] <autrijus> must be this.

[15:03] <autrijus> not very worrisome if you ask me

[15:03] <autrijus> but it does look like a GHC issue

[15:04] <gaal|work> are we stil waiting on smokes?

[15:05] <putter> any time ghc is getting 64 bit warnings I worry, as until recently 64 bit compatibility has been... a work in progress.

[15:05] <putter> Hmm, also

[15:05] <putter> /tmp/ghc16620.hc: In function `__stginit_PugsziRunziPerl5_':

[15:05] <putter> /tmp/ghc16620.hc:3117: warning: implicit declaration of function `getStablePtr'

[15:05] <autrijus> gaal|work: no, not anymore; #2 will be up in a bit

[15:06] <gaal|work> eeek, 1058 todos :)

[15:06] <autrijus> actually our todo rate is quite constant.

[15:06] <autrijus> (and improving gradually)

[15:06] <putter> Err, what is this

[15:06] <putter> /usr/bin/perl -Iinc util/version_h.pl src/Pugs/pugs_version.h

[15:06] <putter> Can't exec "svk": No such file or directory at util/version_h.pl line 26.

[15:06] <putter> Not writing src/Pugs/pugs_version.h because 0 == 0

[15:07] <putter> in make test

[15:07] <autrijus> eek.

[15:09] <JaffaCake> putter: I think the gcc warning is harmless, but I'll look into it at some point

[15:09] * autrijus suddenly notices JaffaCake in #perl6

[15:09] <autrijus> er, hi :)

[15:10] * JaffaCake is wrestling with pugs today

[15:10] <JaffaCake> hiya ;)

[15:10] <JaffaCake> I'm trying to reproduce that GHC bug, and having no luck

[15:10] <autrijus> which one? EVACUATED or fromJust?

[15:11] <JaffaCake> EVACUATED.. I gave up on the fromJust one

[15:11] <JaffaCake> I get test failures for t/oo/destruction, but not the EVACUATED crash

[15:12] <autrijus> right because as I said we already ditched performGC

[15:12] <putter> JaffaCake: I may have unrecoverably lost it when I did a recent ghc install, but until then I had a tar file of a pugs build which repeatably did fromJust.

[15:12] <JaffaCake> I've checked out the exact revision from SVN as per the bug report

[15:12] <autrijus> oh. hrm

[15:12] <JaffaCake> r4916

[15:13] <JaffaCake> now trying with r4733, which is another report of a crash

[15:13] <putter> JaffaCake: and fyi, the ghc warnings were from 6.4.1.20050711 x86_64 binary stable snapshot.  (src didnt build)

[15:13] <JaffaCake> it's difficult because our x86 boxes are running RH9, which has a too old version of perl

[15:13] <JaffaCake> putter: thanks

[15:14] <autrijus> (preflight #2 is uploading)

[15:14] <putter> if you would ever like me to dustoff the fromJust generater and try something on it, just let me know.

[15:15] *** autrijus changes topic to: Preflight #2: http://perlcabal.org/~autrijus/Perl6-Pugs-6.2.8-pre2.tar.gz | http://pugscode.org | http://pugs.kwiki.org | Paste: http://sial.org/pbot/perl6 | http://www.geeksunite.net

[15:15] <autrijus> preflight #2: http://perlcabal.org/~autrijus/Perl6-Pugs-6.2.8-pre2.tar.gz

[15:16] <autrijus> 1308436 sha1(c84083d43fac3ac8f92114b8606669b30b90cdd6)

[15:16] <putter> on #1 I have a dubious on t/unspecced/p5/method.t

[15:16] <autrijus> putter: yes, that's cured

[15:16] <Khisanth> so I guess the "make install" issue has been fixed?

[15:16] <autrijus> I intend to push #2 out as the release

[15:16] <autrijus> Khisanth: yes

[15:16] <autrijus> but I'd still like a round of `make test install` to make sure it works as intended

[15:17] <autrijus> so please test away

[15:17] <gaal|work> (in)

[15:17] <putter> on #1 I have a dubious on t/unspecced/p5/array.t

[15:18] <autrijus> that's cured as well.

[15:19] <pasteling> "gaal" at 212.179.43.225 pasted "build warning, no doubt platform dependant" (6 lines, 380B) at http://sial.org/pbot/11736

[15:19] <autrijus> nod. just like putter's x8664 warning, not going to worry about it now

[15:20] <gaal|work> ack

[15:21] <putter> JaffaCake: oh, re ghc warnings, make (optimized).  looks like make unoptimized doesnt do it.

[15:22] <JaffaCake> putter: your snapshot probably has the x86_64 native code generator, which is used for unoptimised, hence no gcc warnings

[15:22] <nothingmuch> http://nothingmuch.woobling.org/example.html

[15:22] <JaffaCake> I merged the x86_64 NCG a couple of days ago

[15:24] <JaffaCake> autrijus: is it likely that using hsplugins will make any difference?  or PUGS_EMBED?

[15:25] <nothingmuch> btw, does anyone have any suggestions for improving the summary view?

[15:25] <nothingmuch> (reload the link)

[15:25] <nothingmuch> it's jjust not as pretty

[15:26] <autrijus> JaffaCake: both unlikely. weird

[15:26] <autrijus> JaffaCake: around that revision I could reliably reproduce the bug in freebsd 5 x86 

[15:26] <JaffaCake> no joy with r4733 either

[15:26] <autrijus> :(

[15:27] <autrijus> anyone else than gaal smoking?

[15:28] <nothingmuch> autrijus: always

[15:28] <nothingmuch> but not the tarball

[15:29] <jp-autark> yes, smoking.

[15:29] <dudley> I will be shortly

[15:29] <putter> we should nudge the syck folks to fix this:

[15:29] <putter> gram.c:1115: warning: implicit declaration of function `sycklex'

[15:30] <putter> src/syck/syck.c:492: warning: implicit declaration of function `syckparse'

[15:30] <autrijus> I wonder if you get that from compiling syck's src tarball too

[15:31] <putter> a previous rev had some actual errors from failing to declare things.  it looked like sloppiness.

[15:32] * nothingmuch starts working on the smokeserver catalyst app

[15:32] <nothingmuch> i will need lots of help

[15:32] <nothingmuch> mostly for the HTML

[15:32] * nothingmuch has to stop typing /quit when he means /leave

[15:34] <Limbic_Region> nothingmuch - sorry I have been trying to get yaml_harness running on my work machine

[15:35] <nothingmuch> Limbic_Region: it's not urgent

[15:38] <Limbic_Region> ok - now that I have YAML and Test::TAP::Model installed - how do I go about making yaml_harness.pl work?

[15:38] <svnbot6> r5573, autrijus++ | * move DateTime tests to t/* from t/Date/* to unbreak `make test`

[15:38] <svnbot6> r5574, autrijus++ | * do not run svk for version_h.pl in a release

[15:38] <svnbot6> r5575, autrijus++ | * remove the now-empty t/Date/ from ext/DateTime

[15:38] <nothingmuch> Limbic_Region: read make smoke

[15:38] <nothingmuch>  i mean util/run-smoke.pl

[15:38] <Limbic_Region> k

[15:38] <jp-autark> smoke for pre2: http://home.ifi.uio.no/~davidra/smoke.html

[15:39] <nothingmuch> it's basically like prove

[15:39] <Limbic_Region> well - I was a bit confused by

[15:39] <Limbic_Region> Can't exec /usr/bin/pugs at

[15:39] <Limbic_Region> since this is a Win32 box

[15:39] <nothingmuch> pugs? odd...

[15:39] <putter> for the future, it might be nice to add a "happy" first line to Makefile.PL output, so the first thing folks see isnt

[15:39] <putter> ghc-pkg: cannot find package plugins

[15:39] <nothingmuch> set HARNESS_PERL ?

[15:39] <putter> ;)

[15:40] <Limbic_Region> nothingmuch - learning curve - will overcome - I have never ran a smoke before is all

[15:42] <putter> It might also be worth mentioning the "test something, fail, *** message" idiom, to save first time users the "ok, something went wrong!  oh, hmm, the *** means it's (all?) ok, I think" experience.

[15:48] <putter> JaffaCake, btw, thanks for your work on x86_64 ghc.  it's appreciated.

[15:49] <JaffaCake> no problem, it's fun :)

[15:49] <JaffaCake> I have GHCi working now

[15:49] <gaal|work> all green!

[15:50] <autrijus> good. anyone else still smoking?

[15:50] <putter> ! :)  # ghci

[15:50] <Aankhen``> putter++ # "happy" first line ;-)

[15:50] <Alias_> ew

[15:51] <Alias_> oh, _that_ smoking

[15:51] * Alias_ hides head in shame and leaves channel

[15:51] <autrijus> JaffaCake: ooh, and TH too, then

[15:51] <JaffaCake> yup, though I haven't tried it yet

[15:52] <JaffaCake> there's some slight flakiness: I can't dynamically load an object with a data reference to a shared library

[15:53] <putter> What does

[15:53] <putter> Not writing src/Pugs/pugs_version.h because 0 == 0

[15:53] <putter> mean?

[15:54] <autrijus> it means something that should be squashed. a sec

[15:56] <Limbic_Region> autrijus - I had to rebuild to squash some more Config.pm errors - but as the entire main test suite passed last time I don't see any reason to suspect there would be new errors this time

[15:56] <svnbot6> r5576, autrijus++ | * add "happy" first line to Makefile.PL

[15:56] <svnbot6> r5576, autrijus++ | * version_h.pl should no longer print "0 == 0" message

[15:56] <svnbot6> r5576, autrijus++ |   (both reported by putter)

[15:56] <autrijus> okay then.

[15:57] <autrijus> let me do a round of sanity check before flying...

[15:59] <putter> i still have two make tests runniing, but one of them is unoptimized, so it wont be done for bit.

[16:00] <autrijus> ok. let me know as soon as the fast one is finished :)

[16:00] <putter> :)

[16:00] <putter> has anyone tried  make install  since yesterday's changes?

[16:00] <dudley> yep, it worked fine

[16:00] <putter> k

[16:00] <dudley> preflight 1, that is...

[16:01] <Limbic_Region> putter - that's the reason I had to rebuild from scratch (Pugs that is)

[16:01] <Limbic_Region> me applauds AS for providing a zip file that doesn't require installation

[16:01] <Limbic_Region> but they really should have done something more sane with the Config.pm and Config_heavy.pl

[16:02] <nothingmuch> kungfuftr: ping

[16:02] <kungfuftr> pong

[16:02] <putter> has anyone run with an external parrot? (that's my unoptimized test which isnt going to happen)

[16:02] <autrijus> I had.

[16:03] <putter> k

[16:03] <Limbic_Region> C:\TEMP\perl----------------------------please-run-the-install-script----------------------------------\bin is not very helpful to have all your config paths set to

[16:03] * Limbic_Region wanders off for food fully expecting pugs to be in flight soon

[16:04] <autrijus> I'm only waiting for putter now :)

[16:05] <autrijus> putter: where are you currently?

[16:05] <autrijus> (which test, i.e.)

[16:08] <putter> #1 vs #2 delta - make test on #1 only ran t/.  make test on #2 is now off running ext/ tests.

[16:08] <putter> #1 make test ended in

[16:08] <putter> make: *** [test_dynamic] Error 255

[16:08] <autrijus> #2 should fail in ext/Date/.

[16:09] <autrijus> if that is the case, then we're all gree.

[16:09] <autrijus> green.

[16:09] <autrijus> I mean, ext/DateTime

[16:09] <autrijus> (because I fixed and verified ext/DateTime/ as well as the other ext/*)

[16:09] <putter> All tests successful, 49 subtests skipped.

[16:09] <putter> Files=354, Tests=6029, 1689 wallclock secs (942.18 cusr + 16.86 csys = 959.04 CPU)

[16:09] <autrijus> oh, even better!

[16:09] <putter> that's just t/, ext/ is still running.

[16:09] <autrijus> after that, try "make install"?

[16:10] <autrijus> with sudo if needed

[16:10] <putter> yep,

[16:10] <putter> FAILED--no tests were run for some reason.

[16:10] <putter> make[1]: *** [test_dynamic] Error 9

[16:10] <putter> make[1]: Leaving directory `/home/net1/perl6/pugspl/ext/DateTime'

[16:10] <putter> make: *** [test] Error 2

[16:10] <autrijus> good.

[16:10] <autrijus> try make install?

[16:11] <putter> eep.

[16:11] <autrijus> it won't hose you I promise :)

[16:12] * autrijus waits patiently

[16:12] * dudley 'make install'ed just fine...

[16:13] <autrijus> that should be fine, then

[16:13] <putter> err, make -n install shows it installing into /usr/lib...  I'd really rather not... sorry... :(

[16:13] <autrijus> that's fine :)

[16:14] <autrijus> okay. fly!

[16:14] *** autrijus changes topic to: Pugs 6.2.8 released! | http://pugscode.org | http://pugs.kwiki.org | paste: http://sial.org/pbot/perl6 | http://www.geeksunite.net

[16:15] <autrijus>     http://pugscode.org/dist/Perl6-Pugs-6.2.8.tar.gz

[16:15] <autrijus>     SIZE = 1309147

[16:15] <autrijus>     SHA1 = efd32419dcddba596044a42564936888a28b3c69

[16:15] <autrijus> on PAUSE now.

[16:15] <autrijus> release notes published on p6l, p6a, use.perl.

[16:15] * autrijus cheers

[16:15] <Aankhen``> Yey!

[16:15] <Aankhen``> Pugs++

[16:15] <autrijus> #perl6++

[16:16] <dudley> woohoo!

[16:16] <Aankhen``> autrijus++

[16:16] <putter> whoot! whoot!

[16:16] <dudley> I'll second that, autrijus++

[16:16] <nothingmuch> so I'm thinking the smoke server is like this:

[16:16] <nothingmuch> there's an upload API for test.yml

[16:16] <Aankhen``> nothingmuch >> No, wrong, sorry. :-(

[16:16] <nothingmuch> there's a report browsing interface

[16:16] <nothingmuch> ?

[16:16] <kolibrie> my 'make install' worked correctly too

[16:16] <Aankhen``> :-P

[16:17] <nothingmuch> Aankhen``: context?

[16:17] <Aankhen``> [21:46:25] <nothingmuch> so I'm thinking the smoke server is like this:

[16:17] <autrijus> 00:18  * CPAN upload: Perl6-Pugs-6.2.8 by AUTRIJUS

[16:17] <Aankhen``> It was a joke, actually. :-)

[16:17] <Aankhen``> I do these things occasionally.

[16:17] <nothingmuch> ah, ok... i thought you were speaking about something else

[16:17] <autrijus> thanks everybody for getting this release out.

[16:17] <nothingmuch> okay, shut up now

[16:17] <autrijus> I really need to sleep now. :-)

[16:17] <Aankhen``> SIR YES SIR

[16:17] <nothingmuch> have a good one, autrijus!

[16:17] <Aankhen``> autrijus >> Sweet dreams!

[16:17] <kolibrie> good night!

[16:17] <autrijus> have fun!

[16:17] * autrijus waves &

[16:18] <nothingmuch> Aankhen``: what did I say?

[16:18] <putter> minor note, make install rebuilds the Prelude on a fully make;make test'ed build.

[16:18] <Aankhen``> nothingmuch >> Er... "okay, shut up now"?

[16:18] <nothingmuch> yes

[16:18] <Aankhen``> Good, we're both clear on that. :-D

[16:18] <nothingmuch> it seems to me you're not listening

[16:18] <nothingmuch> where's an op when you need one

[16:18] <acme> autrijus++

[16:18] <dudley> putter: mine didn't

[16:18] <Aankhen``> $Aankhen.lip.zip();

[16:18] <nothingmuch> #perl6 doesn' thave enough power struggles

[16:19] <nothingmuch> so anyway, there's this typical crud interface to reports

[16:19] <nothingmuch> you can search and so forth

[16:19] <nothingmuch> and here's the catch

[16:19] <nothingmuch> it's like a shopping cart

[16:19] <nothingmuch> you say 'add to list' or whatever

[16:19] <nothingmuch> and various reports accumilate in a list

[16:19] * putter putter runs tests on release...

[16:19] <nothingmuch> and from your little list you get a consolidated graph

[16:20] <putter> good night autrijus

[16:21] <Aankhen``> nothingmuch >> Sounds good.

[16:21] <Aankhen``> BBIAF, dinner

[16:21] <Aankhen``> .

[16:22] <nothingmuch> ciao Aankhen`` 

[16:24] <kungfuftr> nothingmuch: ullo?

[16:24] <nothingmuch> kungfuftr: you helped make htmlmatrix pretty

[16:24] <nothingmuch> now do it again: http://nothingmuch.woobling.org/example.html

[16:25] <kungfuftr> nothingmuch: how so?

[16:25] <nothingmuch> it's ugly

[16:25] <nothingmuch> make it pretty

[16:25] <nothingmuch> you have html+css fu

[16:26] <nothingmuch> also have a look at the detail view: http://nothingmuch.woobling.org/detail.html

[16:26] <kungfuftr> heh, i'm afraid my fiancee is visiting at the moment, so i'm quite busy at the minute

[16:26] <kungfuftr> drop me an e-mail and i'll put it in my action list

[16:26] <nothingmuch> damnit, is sex the only thing on your mind? what are you, some kind of animal?

[16:26] <nothingmuch> you geeks ought to give up your lives, you know

[16:26] <putter> Hmm, INSTALL doesnt actually say how to config the install to put it in place X.

[16:27] <kungfuftr> nothingmuch: nope... getting the wedding organised is what's currently on my mind... =0)

[16:28] <Limbic_Region> (wedding planning)--  # especially if you only have 6 weeks to do it in

[16:29] <kungfuftr> Limbic_Region: i'm not far off that

[16:29] <putter> Could someone with a windows box check http://jwcs.net/~jonathan/perl6/  http://jwcs.net/~jonathan/perl6/pugs-win32.zip  and just make sure that isnt a snapshot of a p5 smashing rev?

[16:29] <putter> It doesnt actually say when/what version it is. :(

[16:31] <dudley> putter: How do you configure the install prefix?

[16:33] <Aankhen``> dudley >> perl Makefile.PL PREFIX=/foo/

[16:33] <Limbic_Region> putter - I finally got pugs compiling on my off-limits work machine - not going to look back now

[16:33] <Limbic_Region> seriously - if no one has volunteered by the time this build finishes I will check it out

[16:34] * putter tries to find a version number in strings pugs.exe.  But the zip file dates are  07-13-05 15:59, so that looks ok.

[16:34] <dudley> Otherwise it defaults to your perl5 prefix?

[16:35] <Arathorn> congrats on the release, folks :)

[16:35] <putter> as long as fetching is happening too...

[16:36] <Aankhen``> dudley >> I dunno.

[16:36] <dudley> That's where it goes for me...

[16:41] <putter> ok, re ~jonathan/perl6/, you dont actually do an install, yes?  so even if it's outdated, its not a threat.  does that sound reasonable?

[16:43] <putter> Anyone know a way to ask a Makefile.PL where it plans on putting things by default?

[16:45] <Aankhen``> nmake -n install?

[16:45] <putter> Limbic_Region: does this sound reasonable? : re ~jonathan/perl6/, you dont actually do an install, yes?  so even if it's outdated, its not a threat?

[16:46] *** brentdax_ is now known as brentdax

[16:46] <kolibrie> putter: I just look in the Makefile itself, after that has been generated

[16:46] <putter> Aankhen``: :)  I can just see the INSTALL paragraph now, to install someplace other than the default, do perl Makefile.PL PREFIX=/foo/ .  To find out what the default is, read through make -n install.  lol :)

[16:47] <Aankhen``> Oh, for the user... :-P

[16:47] <putter> :)

[16:48] <Limbic_Region> putter - sorry, was AFK - you want to know if it is a dangerous version so you can warn ppl right?

[16:49] <rafl> Where to get the release from? It' not yet on CPAN..

[16:50] <putter> Limbic_Region: actually, I'm wondering if a prebuilt win32 thing is even capable of being dangerous.  if one doesnt run make install, then...  no?

[16:51] <putter> rafl: http://pugscode.org/dist/Perl6-Pugs-6.2.8.tar.gz

[16:52] <rafl> Thanks.

[16:54] <Limbic_Region> putter - duh

[16:55] <Limbic_Region> it is just a tar ball really that you unzip

[16:55] <putter> Oh, that's... unfortunate.  PREFIX=mumble only affects _some_ of the installed files.  not others.  :(

[16:55] <Limbic_Region> IIRC it doesn't have the test suite or a lot of of things that comes with a source checkout

[16:56] <Limbic_Region> putter - IOW - it is only as dangerous as the guy unzipping it

[16:56] <putter> Limbic_Region: ok.  thanks.

[16:56] <putter> :)

[16:58] <putter> The Heisenbug corollary to Murphy's Law, "if it wasn't tested, it doesn't work".   PREFIX wasnt tested, so...

[16:59] <putter> dudley: just to make sure you saw, PREFIX doesnt actually work.

[17:00] <dudley> putter: thanks.

[17:00] <dudley> I won't commit INSTALL claiming that it does, then :-)

[17:01] <putter> good call :)

[17:05] <putter> nothingmuch: re smoke, dont forget we'll likely have -BPerl5  rsn, and will need to smoke it.   Perhaps others too.

[17:06] <putter> so at least three smokes near term, "vanilla", -Bpir, and -Bp5.

[17:06] <putter> (something about calling haskell "vanilla" just seems very... odd)

[17:07] <Aankhen``> LOL.

[17:10] <putter> dudley: or maybe commit, but add a big visible XXXXXXXXXXXXXXX - PREFIX doesnt work yet note?

[17:10] <dudley> alright

[17:16] * putter needs to find a small ascii art picture of a pug for some future release celebration

[17:16] <nothingmuch> putter: since I'm partly responsible for -BPerl5 i doubt it'll be rsn, but ;-)

[17:16] <nothingmuch> this is Limbic_Region's responsibility now

[17:16] <putter> :)

[17:16] * nothingmuch loves delegation

[17:17] <Limbic_Region> nothingmuch - which responsibility is that?  The yaml_harness project?

[17:17] <sili> hmmm

[17:18] <sili> i reported a yaml bug and it was thoroughly ignored

[17:18] <putter> though actually, if parrot development ends up being a bottleneck on -Bpir, -Bp5 may get more attention.

[17:18] <nothingmuch> Limbic_Region: yep

[17:18] <nothingmuch> sili: YAML.pm? or YAML the standard?

[17:18] <sili> YAML.pm

[17:18] <Limbic_Region> ok - still trying to get it running 

[17:19] <putter> -Bpir to keep us honest, -Bp5 to be stable and visible

[17:19] <putter> actually, what _is_ the state of -Bperl5?

[17:20] <putter> (curious minds want to know(tm))

[17:20] <putter> btw, dudley++ # assorted stuff

[17:20] <putter> :)

[17:20] <dudley> :-)

[17:23] <dudley> Does 'make haddock' work?

[17:24] <Aankhen``> make haddock

[17:24] <Aankhen``> Apparently not...

[17:26] <Limbic_Region> is there any particular reason every single make results in pugs.run being compiled, linking, the precompiled prelude, then the pugs run being compiled again, and then final linking?

[17:26] <putter> nothingmuch: oh, btw, re having a one-line per rev "rXXXX - N tests, ....", to have a cumulative file on a server somewhere, so one could eyeball the state of tests across revisions.

[17:27] <nothingmuch> okayh

[17:27] <nothingmuch> should be trivial

[17:27] <putter> :)

[17:27] <nothingmuch> want to write it as a Test::TAP::Model excercise?

[17:27] * putter looks over his sholder; thinks "who is nm talking too..."

[17:27] <putter> ;)

[17:28] <Limbic_Region> putter - duck

[17:28] <putter> where!?!

[17:28] <Aankhen``> And we have a winner! *points at Limbic_Region*

[17:28] <putter> is it typed?

[17:30] * putter should really be doing a job search.  but "job search? projects?  job search? projects?  hmm.  maybe job search tomorrow."  :/

[17:31] <Aankhen``> pugs> ceil(1.5)

[17:31] <Aankhen``> *** Undeclared variable: "&do_ceil"

[17:31] <Aankhen``>     at src\perl6\Prelude.pm line 290, column 9 - line 291, column 5

[17:31] <Aankhen``> Whaa?

[17:31] <Aankhen``> do_ceil does exist...

[17:31] * dudley may need to do a job search soon if he doesn't quit playing with pugs during the day...

[17:32] <putter> make haddock  worked for me... at least until it realized I didnt have `haddock` installed.

[17:32] <Aankhen``> Hmm, `round` and `ceil` both don't work...

[17:32] <dudley> haddock doesn't build for me, so I can't test it

[17:33] <putter> ah.

[17:34] <putter> Aankhen``: they do unqualified sub calls inside of a class... which isnt the most stable thing at the moment.

[17:34] <svnbot6> r5577, dudley++ | Document PREFIX and more make targets in INSTALL, plus a little English-fu.

[17:34] <Aankhen``> Okay, I'll make them qualified calls.

[17:37] <Aankhen``> Bleh, not happening. >_>

[17:40] <putter> Here is a project for someone - a read-eval-print loop in p6.  the current one is a bit painful.

[17:42] <Aankhen``> Where is the current one?

[17:45] <putter> re ceil, sigh, my little tests all work.  trying Num...

[17:45] <putter> re repl, checking...

[17:46] <putter> ./src/Pugs/Shell.hs

[17:47] <Aankhen``> Ah, I have no Haskell-fu.

[17:48] <putter> We'll need a p6 version at some point... might as well start now... :) (modulo the usual "unless the current state of pugs is getting in the way")

[17:49] <Limbic_Region> nothingmuch - I think I have yaml_harness working now via make smoke

[17:49] <nothingmuch> goody

[17:49] <Limbic_Region> the yaml files will get outputted where?

[17:49] <Limbic_Region> or rather - instead of running through the whole smoke - is it safe to break out and verify it is working or does it not write out files until the end?

[17:50] <putter> wont be able to do pugs internal stuff, which makes it less useful, but could do nifty multi-line input, and persistant history, and ...

[17:53] <putter> googling for perl read eval print loop turns up some things, including an old p6c question...  I thought there was a p5 faq on it, but I dont immediately see it...

[17:54] <putter> could find and port a p5 one...

[17:57] * Aankhen`` starts hacking on examples/eval.p6

[17:59] <putter> Aankhen``: for ceiling to work, one needs to make $^n an explicit arg, and qualify both do_ceil and round_gen.

[17:59] <putter> or could leave them as a test of implicit args and unqualified calls working... :)

[18:00] <putter> re examples/eval.p6, :-)

[18:02] <kungfuftr> q

[18:03] <putter> q?

[18:06] <putter> autrijus: fyi, make pirtest is sane in an unoptimized external parrot, but of dubious sanity in an optimized embedded parrot.  Errors of:

[18:06] <putter> Null PMC access in get_string()

[18:06] <putter> current instr.: 'EVAL_1' pc 10 (EVAL_1:7)

[18:07] <Aankhen``> Er... how do I get fallthrough behaviour in a `given`?

[18:08] <putter> ?

[18:09] <Aankhen``> I want to group a bunch of `when` clauses...

[18:09] <Aankhen``> Ah, `continue`.

[18:09] <putter> nothingmuch: ping?

[18:10] <Aankhen``> Hmm... apparently I have to use &goto... how the heck?

[18:10] <Aankhen``> "You can explicitly break out of a when block (and its surrounding switch) early using the break verb. You can explicitly break out of a when block and go to the next statement by using continue. (Note that, unlike with C's idea of falling through, subsequent when conditions are evaluated. To jump into the next when block you must use a goto.)"

[18:10] <vcv> its all goto in the end anyway ;)

[18:10] <Aankhen``> Yes, but I want an example of how to use it... do I give a specific line number?

[18:10] <vcv> oh. hm.

[18:11] <putter> labels arent implemented yet, i believe

[18:12] <nothingmuch> putter: pongv

[18:12] <nothingmuch> i can implement break, i know how

[18:12] * nothingmuch spent all yesterday evening trying to fix next/redo/last

[18:16] <Aankhen``> What is the ord() value for ^Z?

[18:21] <putter> 26

[18:21] <putter> perl -e 'print ord("\cZ");'

[18:21] <Aankhen``> Thanks.

[18:22] <putter> np

[18:23] <putter> nothingmuch: so, what is the state of -Bp5?  what's done, what needs to be?

[18:27] <Aankhen``> pugs> chr(26)

[18:27] <Aankhen``> ?

[18:27] <Aankhen``> Erm, that is a "right arrow" there.

[18:27] <Aankhen``> It doesn't seem to recognise it as "^Z".

[18:28] <kolibrie> anyone seen this error building pugs with emb parrot and perl5?

[18:28] <kolibrie> /tmp/ghc9183.hc: In function `__stginit_PugsziRunziPerl5_':

[18:28] <kolibrie> /tmp/ghc9183.hc:3223: warning: implicit declaration of function `getStablePtr'

[18:28] <dudley> That looks familiar...

[18:28] <kolibrie> then a few lines later I get:

[18:28] <kolibrie> Linking ...

[18:28] <kolibrie> /usr/bin/ld: cannot find -lperl

[18:28] <kolibrie> collect2: ld returned 1 exit status

[18:28] <kolibrie> make: *** [pugs] Error 1

[18:29] <kolibrie> builds just fine with emb parrot alone

[18:29] <kolibrie> so I think it is a perl5 thing

[18:30] <dudley> hmmm, this last one built just fine.

[18:30] <Aankhen``> gaal, you around?

[18:31] <kolibrie> I'm on r5576

[18:31] <dudley> oh, wait, there it is.

[18:31] <dudley> no linking problems, though

[18:32] <kolibrie> so the linking problem is something else

[18:33] <nothingmuch> putter: p6 on p5 requires an implementation of the runtime

[18:33] <nothingmuch> that is, containers, the object model, etc

[18:33] <nothingmuch> (that has good progress)

[18:33] <nothingmuch> (but we still need a lot of things)

[18:33] <kolibrie> I also have this warning, which may or may not be related:

[18:33] <kolibrie> /usr/lib/perl/5.8/CORE/pp.h:134:1: warning: "RETURN" redefined

[18:34] <nothingmuch> and the PIL to p5 compiler, that just generates p5 code that uses the runtime, and does the actions described in the PIL

[18:34] <nothingmuch> this is stalling

[18:34] <dudley> kolibrie:  it looks that way. I'm on r5577 BTW

[18:34] <putter> perl -e 'print chr(26);'|less  shows ^Z

[18:34] <dudley> kolibrie: But 5577 only updated INSTALL

[18:34] <putter> ./pugs -e 'say chr(26);' |less  too

[18:35] <putter> kolibrie: the  /tmp/ghc9183.hc warning should be unrelated to the link failure.

[18:35] <kolibrie> I'm mostly just concerned about the link failure

[18:35] <Aankhen``> Hmm, it does here too...

[18:36] <Aankhen``> But the terminal itself only shows a right arrow.

[18:36] <putter> do you have a libperl around?  (some os/versions dont have one)

[18:36] <kolibrie> putter: where do I look for libperl?

[18:37] <kolibrie> /usr/lib/libperl.so.5.8

[18:37] <kolibrie> /usr/lib/libperl.so.5.8.7

[18:37] <nothingmuch> gaal et al, please try the darcs repo versions of TTH

[18:37] <nothingmuch> i want to make a release

[18:37] <putter> /usr/lib/perl5/5.?.?/mumble/CORE/libperl.so

[18:38] <putter> maybe?

[18:38] <nothingmuch> http://nothingmuch.woobling.org/Test-TAP-HTMLMatrix/ and http://nothingmuch.woobling.org/Test-TAP-Model/ contain head revisions

[18:39] <kolibrie> putter: don't have any under perl5, but do in plain /usr/lib

[18:39] <kolibrie> see above

[18:39] * Juerd just read two weeks of autrijus' journal

[18:39] <putter> hmm, do you need a link to  /usr/lib/libperl.so.5.8 from /usr/lib/libperl.so for it to be found (don't remember)

[18:39] <kolibrie> hmm, could try that

[18:39] <Juerd> The speed at which things go here is even more impressive if you're away for a while.

[18:40] <Aankhen``> Hi Juerd.

[18:40] <nothingmuch> hola Juerd 

[18:40] <dudley> Alright, enough pretending to work for me. Adios!

[18:40] <putter> no, it doesnt look like you do.

[18:40] <Juerd> Don't consider me back yet, by the way

[18:41] <Aankhen``> Hrm... I need to store a value in a variable and print out the `.perl` version of it, but since it's in a variable, I get a '\' in front of it; is there any way to avoid that?

[18:41] <putter> so the next step is to figure out what your load path looks like.

[18:41] * kolibrie listens

[18:42] <Juerd> #  multi foo { ... } is now a shorthand for multi sub foo { ... } 

[18:42] <Juerd> good! I was expecting that :)

[18:42] * nothingmuch patiently waits for 'sub foo is now a shorthand for multi sub foo'

[18:43] <Juerd> Well, I wouldn't mind full mmd

[18:43] * putter putter looks at make file trace to figure out who's doing what...

[18:43] <nothingmuch> my semantics proposal (docs/notes/mmd_match_order.txt) was sort of warnocked

[18:43] <nothingmuch> a thread followed

[18:44] <nothingmuch> but I think that still no one really knows what perl6's mmd will look like

[18:44] <nothingmuch> were you here at the time, Juerd?

[18:45] <Juerd> I don't know

[18:45] <Juerd> My memory is extremely bad

[18:45] <nothingmuch> in any case, i'd be grateful for some feedback

[18:45] <Juerd> Something is happening to me and all I know is that it's not good.

[18:47] <putter> kolibrie: take a look at the make output... there should be lines with both -lperl and various -L/someplace.  btw, what os?

[18:47] <kolibrie> putter: debian

[18:47] <putter> call - bbiab

[18:48] <kolibrie> perlbot nopaste

[18:48] <perlbot> Paste your code here and #<channel> will be able to view it: http://sial.org/pbot/<channel>

[18:51] <pasteling> "kolibrie" at 66.239.158.2 pasted "ghc ... -lperl ... -L... line" (1 line, 1.2K) at http://sial.org/pbot/11740

[18:53] <kolibrie> putter: do I need to put a link to my libperl in one of the -L paths?

[18:59] <kolibrie> putter: adding link to /usr/lib/perl/5.8/CORE did not help :(

[19:10] <gaal> Aankhen``, pong?

[19:25] <putter> kolibrie: ok, sorry, where were we...

[19:27] <kolibrie> putter: pasted the ghc line, trying to figure out where libperl needs to be

[19:27] <kolibrie> no luck yet

[19:27] <putter> ah, so it should be

[19:28] <putter> /usr/lib/perl/5.8/CORE/libperl.so  yes?

[19:28] <kolibrie> I put a link there

[19:28] <kolibrie> but still gives same linking error

[19:28] <kolibrie> well, I left the 5.8 on the end

[19:29] <putter> try without?

[19:29] <gaal> nothingmuch, ping

[19:30] * kolibrie tries without

[19:31] <kolibrie> no error yet... good sign

[19:32] * putter 's fingers are crossed...

[19:32] <putter> nothingmuch: how much is needed to just get as far as make test sanity?  in other words, as far as pir?

[19:33] <kolibrie> woo hoo!

[19:33] <kolibrie> putter: awesome!

[19:33] <nothingmuch> uh, i dunno

[19:33] <putter> :)

[19:33] <nothingmuch> PIL -> perl 5 needs to be done

[19:33] <nothingmuch> i think it's best done in haskell or perl5, but not in perl5

[19:33] <nothingmuch> i think it's best done in haskell or perl5, but not in perl6

[19:34] <putter> right.  is the plan... ah.  (preanswered questions:)

[19:34] <nothingmuch> i think I want to give haskell perl5 generation a try

[19:34] <nothingmuch> Code::Perl is not complete enough

[19:34] <nothingmuch> and I think not flexible enough

[19:35] <gaal> nothingmuch: i'm d/ling darcs for win now. what do you thing needs testing with THH?

[19:35] <nothingmuch> PIL is not well suited enough for the job

[19:35] <gaal> TTH

[19:35] <kolibrie> so, if libperl.so is not in any of the -L paths, can 'make' detect that and work around, or prompt user?

[19:35] <nothingmuch> err - try to run example.pl in TTH on stuff you care about

[19:35] <nothingmuch> by ripping out it's logic

[19:35] <nothingmuch> like two smoke results

[19:35] <putter> "PIL is not well suited enough for the job"? huh?  I thought that was the core of the plan...?

[19:35] <nothingmuch> try to go over the docs

[19:35] <nothingmuch> err

[19:35] <nothingmuch> PPI, not PIL

[19:36] <nothingmuch> PIL has nothing to do with perl5 code generation

[19:36] <nothingmuch> it just happens to be the thing being generated

[19:36] <nothingmuch> i think another plausible approach is to serialize PIL into perl5 object representing PIL

[19:36] <nothingmuch> and just walk that

[19:36] <nothingmuch> so there's no compilation and code emittion

[19:36] <putter> kolibrie: one would probably have to do a test compile, notice if it failed, and complain...

[19:37] <kolibrie> sort of like what I did?

[19:37] <putter> lol

[19:37] <gaal> one thing to put in the next release of TTH is the darcs repo url ;-)

[19:38] <kolibrie> putter++ # for being so patient and helping me embed perl5

[19:38] <putter> nothingmuch: my understanding is the plan is to create a PIL->p5 backend, supported by a native p5 runtime.  no?

[19:38] <putter> tnx.  de nada.

[19:39] <nothingmuch> putter: yes

[19:39] <nothingmuch> by any means possible

[19:43] <putter> it would be nice if there was an easily parsable pil dump format...

[19:44] <gaal> nothingmuch ping

[19:44] <gaal> many fails in latest TTH on win32

[19:44] <gaal> fs path errors i think, from glancing.

[19:48] <nothingmuch> pong

[19:48] <nothingmuch> use lib "t/lib" ?

[19:48] <gaal> perl Build test

[19:48] <gaal> shouldn't that do that?

[19:48] <nothingmuch> no, it's in the tests

[19:49] <gaal> 55/112 subtests failed, 50.89% okay.

[19:49] <nothingmuch> should i be saying use lib File::Spec->catdir("t", "lib")?

[19:49] <gaal> ahhh

[19:49] <gaal> prolly yes

[19:49] <nothingmuch> oh man

[19:49] <nothingmuch> wait, doesn't windows allow / in paths?

[19:49] <gaal> my brain is tired

[19:50] <gaal> oughta

[19:50] <gaal> but win32 sucks!

[19:50] <gaal> sucks! i tell you

[19:50] <nothingmuch> eep =(

[19:50] <nothingmuch> i'll try it out at work tomorrow

[19:51] <gaal> yeah, i should probably leave the computer myself at this point :)

[19:51] <gaal> in fact, that's exactly what i'll do

[19:51] <gaal> good night :)

[19:53] <nothingmuch> ciao

[19:54] <svnbot6> r5578, Aankhen++ | * added naive, basic, simple, whatever-you-call-it-just-don't-laugh read-eval-print under examples/eval.p6.

[19:54] <svnbot6> r5579, Aankhen++ | examples/eval.p6:

[19:54] <svnbot6> r5579, Aankhen++ | * added POD.

[19:54] <svnbot6> r5579, Aankhen++ | * added todo notes.

[19:54] <svnbot6> r5579, Aankhen++ | * minor refactoring (gasp).

[19:54] <svnbot6> r5580, Aankhen++ | * examples/eval.p6: more TODO.

[19:55] * putter tries to figure out where the -Cpir output comes from...

[19:55] <Limbic_Region> nothinmuch - tests.yml the file I want?

[19:55] <nothingmuch> yep

[19:55] <Limbic_Region> ok - gonna have to wait til tomorrow at this point

[19:56] <Chewie[]> Aankhen``: Ping.

[19:56] <Limbic_Region> (locked down work machine)--

[20:00] <putter> ah, src/Main.hs   http://nothingmuch.woobling.org/pugs_test_status/haddock/  ++

[20:00] <revdiablo> is 'pugs -BParrot ...' still the way to run pugs through parrot backend, or has this changed?

[20:01] <putter> -BParrot and -BPir are equivalent at this point.   oh, and yes.

[20:02] <kolibrie> using my new embedded perl5, I notice that using perl5 modules works in a script, but not in the pugs shell

[20:03] <putter> I was earlier trying to talk someone into beginning a p6-based shell... I think Aankhen`` is beginning an examples/eval.p6...

[20:04] <Aankhen``> Chewie[] >> Pong.

[20:04] <Aankhen``> putter >> I already began it. :-)

[20:04] <Chewie[]> Aankhen``: Where have you been?

[20:04] <putter> :) !

[20:04] <Aankhen``> Chewie[] >> When?

[20:04] <Aankhen``> putter >> Feel free to hack on it.

[20:04] <Chewie[]> Past few weeks?

[20:04] <Aankhen``> "XXX" marks the spot. ;-)

[20:04] <Aankhen``> Chewie[] >> Uhh... here?

[20:05] <Aankhen``> I was out of town from the 17th of June to the 3rd of July; been here ever since. :-)

[20:05] <Chewie[]> Heh.

[20:05] <Aankhen``> (and as `svn log` will show, been hacking away on libwww-perl :-)

[20:05] <Chewie[]> Aankhen``: I've got a very good base64_encode working in Parrot, but I haven't been working on the decode for a while.

[20:06] <Chewie[]> It's also very parrotish. It'll have to be munged into the new calling conventions.

[20:06] <Aankhen``> That's neat.

[20:06] <Aankhen``> Chewie[]++

[20:06] <Aankhen``> Or perhaps that should be: Chewie[] ª++

[20:06] <Chewie[]> Considering I've had well over a few months to do it.. :-D

[20:06] * Chewie[] has been working on various other things.

[20:06] <Aankhen``> Think you could up-port it to Perl 6? :-)

[20:07] <Chewie[]> Heh.. I don't even have Pugs building locally yet.

[20:07] <Chewie[]> If I did, I'd be doing a lot more with Perl 6.

[20:07] <Aankhen``> The time is now!

[20:08] <putter> :)

[20:08] <Aankhen``> perlbot karma ª

[20:08] <perlbot> Karma for ª: 1

[20:08] <Aankhen``> Bah.

[20:09] <Chewie[]> Hmm. Debian still hasn't upgraded from ghc6.2.

[20:09] <Aankhen``> Anyway.

[20:09] <integral> Chewie[]: 6.4's in unstable at least

[20:09] <Chewie[]> integral: Heh. I'm not going to switch to unstable just yet.

[20:10] <Aankhen``> G'night.

[20:10] <putter> G'night

[20:14] <putter> ok, there's a scary concept... with just a little bit of preprocessing, it looks like PIL, a haskell code dump, would parse as p6...

[20:22] <Limbic_Region> multi foo { ... } is now shorthand for multi sub foo { ... } so I have to still spell out multi method foo { ... } ? it takes more keystrokes to type method than it does sub - some might argue that sub is used more but p6 may change that

[20:22] <svnbot6> r5581, fglock++ | Span.pm - added internal module "Span::Code"

[20:26] <PerlJam> That's one short hand I don't think we should have "multi foo"  it should always be "multi sub foo"

[20:28] <Limbic_Region> I was reading from the 6.2.8 release notes

[20:28] <Limbic_Region> I agree - sub/method should always be explicit

[20:37] <putter> Is there a cannonical test for perl code to determine if it's running under p5 or p6?

[20:37] <svnbot6> r5582, fglock++ | set svn properties

[20:38] <PerlJam> putter: in the absense of "use v6;", "module" or "class" it's perl5  :)

[20:39] <Darren_Duncan> I downloaded and tested the pristine 6.2.8, and its a-ok

[20:39] <Darren_Duncan> now back to the Svn head

[20:41] <putter> Trying to do a runtime test.  even eval('class Foo{}; 'p6''') or 'p5' wont work, because there are p5 modules which emulate p6...

[20:41] <putter> I suppose one could duck type languages... eval it, and if it works, great... but it would be nice to have a predicate...

[20:42] <Darren_Duncan> shouldn't you be using 'perl5' now?

[20:42] <putter> ?

[20:42] <putter> huh?

[20:43] <Darren_Duncan> some parts of Perl 6 / Pugs used to have 'p5' to specify using Perl 5, but now that was removed in favor of 'perl5'

[20:43] <Darren_Duncan> or at least the syntax for using Perl 5 modules in Perl 6 is that way

[20:44] <putter> Ah, right.  No, I'm after something different...

[20:44] <putter> Sometimes one wants to write code which runs under either p5 or p6.

[20:44] <Darren_Duncan> good luck with that

[20:45] <putter> One could imagine a  use PBoth;  module which in p6, made things more p5 like, and in p5, sucked some of the "make p5 like p6" modules.

[20:45] <putter> But even without that, a lot can be done in the overlap.

[20:46] <putter> After all, as long as one limits oneself to function calls and a few data types, one can write code which works in both perl and ruby.

[20:47] <putter> Now normally, you can write a predicate sub is_this_p6() which just eval's some p6 code, and if it works, you know where you are.

[20:48] <putter> But it looks like p5 is getting a lot of "make me look like p6" modules, which confuses things.

[20:48] <putter> So I was wondering if there is a "flag" yet, to determine where one really is.

[20:49] <PerlJam> putter:  use v5; ... use v6; ... use v5; ... (ad nauseum)

[20:49] <PerlJam> putter: there isn't (and won't) be something automated I don't think

[21:25] <putter> &

[22:17] <svnbot6> r5583, fglock++ | Span::Code works !!!

[23:13] *** brentdax_ is now known as brentdax

[23:19] *** brentdax_ is now known as brentdax

[23:24] <Alias_> What's the CVS commit count up to now

[23:28] <wolverian> CVS? :)

[23:29] <brentdax> Is that a trick question?

[23:29] <Alias_> err, sorry.

[23:29] <Alias_> mistype

[23:29] <Alias_> The VCS count

[23:29] <Alias_> :)

[23:30] * Alias_ is looking at a svn2cvs run

[23:30] <wolverian> 5583, says svk pull

[23:31] <Alias_> wonder how hard that will effect the server

[23:32] <Alias_> unfortunately, it looks like it doesn't handle multiple users

[23:33] <Alias_> So I lose most of the best information

