[00:15] <pasteling> "Obra" at 209.6.22.26 pasted "Why does thsi code not parse?" (5 lines, 86B) at http://sial.org/pbot/11116

[00:16] <kelan> obra: i don't think you can use a pointy block as an argument to while

[00:16] <obra> kelan: see S04

[00:17] <obra> It is possible to write

[00:17] <obra>            while =$*IN -> $line {...}

[00:17] <obra>        But it won't do what you expect, because unary "=" does a slurp in scalar context, so

[00:17] <obra>        $line will contain the entire file.

[00:17] <obra> Note that Patrick mailed a change to that "But" caveat today that I wanted to test in pugs.

[00:17] <obra> Er, that Note was poorly phrased

[00:19] <kelan> well you didnt write that. you missed the `=` in front of the $*IN

[00:19] <kelan> maybe thats the problem?

[00:19] <obra> Thank you

[00:19] <obra> PEBCAK

[00:19] <kelan> seems like it should work anyway

[00:19] <kelan> and pass the filehandle to $line

[00:19] <obra> Though actually, it fails too

[00:19] <obra>    unexpected ">" or "w"

[00:19] <obra>     expecting ";", statements or end of input

[00:19] <obra>     reserved word

[00:19] <obra>     at /tmp/foo line 4, column 1

[00:19] <kelan> maybe pugs just doesnt parse it yet?

[00:25] <arcady> pugs doesn't parse while with pointies

[00:26] <arcady> pugs also doesn't like map @list -> { stuff }

[00:26] <arcady> you need a comma between the @list and the ->

[01:29] <cognominal> what is the best kwid formatter?

[01:30] <cognominal> is that Ingy Kwid on cpan?

[01:40] <mugwump> hey cognominal, I was talking to ingy earlier and at the moment there is no prototype other than stevan's Perl 6 one available

[01:40] <cognominal> how do I use stevan's one?

[01:41] <cognominal> http://autrijus.org/tmp/perlkwid.kwid speaks of a pugsdoc but I can;t see any

[01:42] <cognominal> oh, Sam, you are in New-Zealand?

[01:42] <mugwump> I am

[01:42] <cognominal> I met you in yapc at Paris, I think

[01:43] <mugwump> that would have been 2003 ... who are you in RL?  /msg if you like :)

[01:43] <cognominal> Stephane Payrard

[01:44] <cognominal> a tall French guy

[01:44] <mugwump> Yes I remember having a long conversation with you in the back of that bar

[01:45] <cognominal> yea, right

[01:45] <mugwump> "that" bar being http://utsl.gen.nz/milk.jpg

[01:46] <cognominal> no, probably another one :)

[01:51] <_meppl_> gute nacht  -  good night

[03:26] <formalin14> I have installed perl6(pugs). Where is the parrot compiler for perl6?

[03:27] <mugwump> CPAN

[03:27] <mugwump> http://search.cpan.org/dist/parrot/

[03:28] <mugwump> you'll need 0.2.1 for recent pugs builds

[03:29] <formalin14> thanks

[03:30] <formalin14> does the download from www.parrotcode.org include compiler for perl6?

[03:33] <mugwump> no, pugs is the prototype perl 6 compiler

[03:34] <formalin14> what C compiler and make program you use on Windows?

[03:35] <mugwump> on windows you probably want http://pixigreg.com/?pxperl

[03:35] <formalin14> ok, I have saw pxperl, it looks very good.

[03:43] <putter> Hi mugwump.

[03:50] <svnbot6> r4706, putter++ | To Emit/Prim.hs, added NUM registers, + - * /, and the rest of ops/math.ops.

[03:52] <sdtr443w> Is there any examples of continuations in Perl 6 yet?

[03:53] <putter> I think I mostly did Emit/PIR instead.  Got math.ops in.  In the process of figuring out parrot, wrote a whole lot of haskell which didnt end up in the final version.  Eh, good practice.

[03:53] <putter> Looks like svnbot is down.

[03:55] <sdtr443w> Was there a split?

[03:55] <wolverian> yes

[03:56] <sdtr443w> I got on the channel at a strange time then

[03:58] <wolverian> yes. :)

[04:00] *** _jql is now known as jql

[04:01] <sdtr443w> I'll hold my breath and wait to ask all my irritating questions then.  I wouldn't want to leave anybody out.

[04:04] <wolverian> no, the split should be over now

[04:05] <sdtr443w> Oh darn I was hoping I just wasn't going to get an answer haha

[04:05] <sdtr443w> Wait that didn't come out right . . .

[04:08] <wolverian> sdtr443w: pugs's continuation support is slightly flaky at the moment.

[04:09] <wolverian> sdtr443w: search perl6-language for continuations if you want to see discussion

[04:13] <sdtr443w> hmm ok.  I was interested in how there were implementing continuations in a mostly procedural language.

[04:14] <wolverian> parrot.

[04:14] <sdtr443w> I'm trying to present the current syntax at work, and it's going to be a bear since continuations will be new to them, and also because they're being used outside their normal context.

[04:14] <sdtr443w> in my opinion

[04:14] <sdtr443w> to be honest though, I haven't used them much myself.

[04:15] <wolverian> right. 

[04:20] <sdtr443w> Am I correct that when using a reference type I get the first reference for free?  It's the impression I got from some examples.

[04:20] <sdtr443w> Or rather, the first [de]reference

[04:22] <wolverian> er, what do you mean exactly?

[04:22] <wolverian> code example would be nice :)

[04:23] <sdtr443w> Well I don't know where I got it but . . . 

[04:23] <sdtr443w> An array reference in perl 5 would be done with $foo->[$n] 

[04:23] <formalin14> What is the language used to develop parrot runtime?

[04:23] <sdtr443w> In Perl6, the claim is: $foo[$n]

[04:24] <sdtr443w> Are they not talking about a reference type there?

[04:24] <wolverian> that's a dereference. yes, perl6 references pretend they're not references most of the time, so you can just do $foo[$bar]

[04:24] <wolverian> formalin14: C.

[04:24] <formalin14> 3x

[04:24] <formalin14> thanks

[04:25] <sdtr443w> If I have a reference to a reference, do I start stacking on the dollar signs?

[04:25] <wolverian> I'm not sure.

[04:26] <wolverian> there was a very recent discussion on perl6 about the depth of autodereferencing, I think

[04:26] <sdtr443w> ok then...

[04:27] <sdtr443w> I have one last question I think is better suited to the newsgroup/mailing list, but I guess I can try it here.

[04:27] <sdtr443w> I don 't really grok a line in Exegesis 4: "when 'previous' { return %var{""} // fail NoData }"

[04:27] <sdtr443w> They make it sound like if previous is undefined, fail out.  What I don't like about that is there is a when statement right underneath.  

[04:28] <wolverian> I don't think that is legal nowadays. I _think_ when is a statement, not an expression

[04:28] <sdtr443w> It was part of a larger "given" block

[04:28] <wolverian> (exegeses are not updated. only synopses are.)

[04:28] <sdtr443w> oh gosh

[04:29] <wolverian> yes, when is a statement.

[04:29] <wolverian> so you can't use it in an expression like that without wrapping it in a do { }

[04:29] <wolverian> which leads me to assume the whole thing is bogus :)

[04:29] <sdtr443w> I don't know -- the synopsis seems to jibe

[04:31] <sdtr443w> You saying it's illegal in the context of it being wrapped in a given { } block?

[04:32] <sdtr443w> Oh I'm starting to see what that line was doing.

[04:39] <wolverian> sdtr443w: I am saying that using a 'while { }' in an expression is illegal

[04:43] <putter> Anyone looking for tasks could create Emit/PIR.hs versions of Prim.hs ops.

[04:43] <putter> Or figure out how parrot's namespace and lookup stuff works.

[04:44] <putter> Once we can do parrot namespaces, specifically Perl6::Internals, then Prim.hs ops can be pushed into Perl6::Internals, and wrapped by p6 modules.

[04:45] <putter> Good night. &

[05:36] <Darren_Duncan> I found what appears to be a Pugs bug

[05:36] <Darren_Duncan> simply querying a value from a hash creates a corresponding key in the hash

[05:41] <svnbot6> r4707, andras++ | vmethods: and more math again: is_divisible_by

[05:56] <Darren_Duncan> ?eval my %foo = {1=>2,3=>4}; "{%foo}";

[05:56] <evalbot6> '1	2 3	4 ' 

[05:57] <Darren_Duncan> ?eval my %foo = {1=>2,3=>4}; "{%foo.pairs.join(','}";

[05:57] <evalbot6> Error:  unexpected "j" expecting term postfix, operator, postfix conditional, postfix loop, postfix iteration, ";" or "}" 

[05:57] <Darren_Duncan> ?eval my %foo = {1=>2,3=>4}; "{%foo.pairs.join(',')}";

[05:57] <evalbot6> '1 2,3 4' 

[05:58] <Darren_Duncan> eval my %foo = {1=>2,3=>4,5=>6}; "{%foo.pairs.join(',')}";

[05:58] <Darren_Duncan> foo

[05:59] <Darren_Duncan> ?eval my %foo = {1=>2,3=>4,5=>6}; "{%foo.pairs.join(',')}";

[05:59] <evalbot6> '1 2,3 4,5 6' 

[05:59] <Darren_Duncan> ?eval my %foo = {1=>2}; "{%foo.pairs.join(',')}";

[05:59] <evalbot6> '1,2' 

[05:59] <Darren_Duncan> looks like a bug to me

[05:59] <Darren_Duncan> the last pairs() should return a single pair, but it returned a 2 element list instead

[06:06] <wolverian> Darren_Duncan: yes. is there a test for it?

[06:06] <Darren_Duncan> I don't know ... I found this out through trial and error while trying to get Locale-KeyedText to work

[06:07] <Darren_Duncan> if not, one should be created ... if necessary, I'll do it

[06:07] <Darren_Duncan> I'm still trying to isolate the other bug where simply reading a hash will add a key to it

[06:07] <Darren_Duncan> but at least the single-pair hash bug is easy to reproduce

[06:07] <lumi_> Hi nothingmuch

[06:08] <nothingmuch> hola

[06:08] <Aankhen``> Mawning.

[06:13] <Darren_Duncan> another apparent bug is that calling .does(Pair) on a Pair::HashSlice returns false

[06:13] <wolverian> is that a bug?

[06:14] <Darren_Duncan> well, a Pair::HashSlice has a .key and a .value that can be read from, as a Pair does

[06:14] <Darren_Duncan> it is the output of a normal %hash.pairs()

[06:14] <Darren_Duncan> each element of said output

[06:15] <wolverian> that's weird. 

[06:16] <QtPlatypus> Does making a pair supposed to stringafy the key?  I thought the hash was supposed to be based on the .id of the hash?

[06:16] <Darren_Duncan> the thing that gets to me the most, though (and it might be to the spec) is how hashrefs and arrayrefs like to turn into lists at every opportunity ... I have to keep assigning function args to a scalar, or return value of a function to a scalar, so they can be used properly

[06:17] <Darren_Duncan> a Pair stringifies to its key and value with a space between, currently, as does a List or Array

[06:17] <wolverian> refs never turn to lists magically.

[06:18] <Darren_Duncan> well, thats happening to me

[06:18] <nothingmuch> http://wiki.yapctoronto.org/index.cgi?ArrivalRSVP

[06:18] <wolverian> I should have said - they aren't supposed to :)

[06:18] <nothingmuch> they're making reservations, so put yourself down

[06:18] <Darren_Duncan> they are doing so every time they are in a list context

[06:18] <QtPlatypus> Darren_Duncan: Thats not what I was talking about.  Hold on I'll try to replicate it with evalbot

[06:20] <wolverian> Darren_Duncan: that is very broken. 

[06:20] <wolverian> pugs> (want,[9..12])

[06:20] <wolverian> ('List (Any)', {ref:<Array>})

[06:20] <wolverian> the naive case works on feather :)

[06:20] <wolverian> (r4691)

[06:20] <QtPlatypus> ?eval my @rray=<a b c d e f>; my %foo = {@rray => 1};%foo.keys.perl

[06:20] <evalbot6> '(\'1\', \'a\', \'c\', \'e\')' 

[06:21] <wolverian> heh. easier to read without the .perl, maybe

[06:21] <QtPlatypus> ?eval my @rray=<a b c d e f>; my %foo = {@rray => 1};%foo.keys

[06:21] <evalbot6> ('1', 'a', 'c', 'e') 

[06:21] <wolverian> that's supposed to happen. well, besides the fact that assigning a hashref to a hash shouldn't be making it a hash.

[06:22] <QtPlatypus> wolverian: Why is that supposed to happen?

[06:22] <Darren_Duncan> ?eval sub bar( $foo ) { "{$foo.ref}" } foo( {1=>2,3=>4} );

[06:22] <evalbot6> Error: No compatible subroutine found: "&foo" 

[06:22] <Darren_Duncan> ?eval sub bar( $foo ) { "{$foo.ref}" } bar( {1=>2,3=>4} );

[06:22] <evalbot6> 'List' 

[06:22] <Darren_Duncan> now, I didn't pass in a List, but a Hash

[06:23] <Darren_Duncan> see my workaround ...

[06:23] <QtPlatypus> ?eval my $foo = {[<a b c d e f>] => 1};$foo.keys

[06:23] <evalbot6> ('1', 'a', 'c', 'e') 

[06:23] <wolverian> Darren_Duncan: now, that seems a bug

[06:23] <Darren_Duncan> ?eval sub bar( $foo ) { "{$foo.ref}" } my $temp = {1=>2,3=>4}; bar( $temp );

[06:23] <evalbot6> 'Hash' 

[06:23] <Darren_Duncan> see the difference?

[06:23] <wolverian> Darren_Duncan: yes. seems to be {}s are broken :)

[06:24] <Darren_Duncan> that's not all

[06:24] <Darren_Duncan> it happens with Arrays too

[06:24] <Darren_Duncan> and Pairs

[06:25] <Darren_Duncan> I wasn't sure whether or not this was supposed to happen or not

[06:25] <nothingmuch> wow, some spammer is nice enough to try random login names (peter, bob, etc) on woobling.org, but since i had cable problems yesterday the backup MX accepted them

[06:25] <nothingmuch> so now they're bouncing back to [email@hidden.address] which is aliased to me

[06:25] <nothingmuch> *sigh*

[06:25] * QtPlatypus mmmms  a bit

[06:25] <QtPlatypus> ?eval my $foo = ([<a b c d e f>] => 1);$foo.keys

[06:25] <evalbot6> (['a', 'b', 'c', 'd', 'e', 'f']) 

[06:26] <QtPlatypus> ?eval my $foo = ([<a b c d e f>] => 1);$foo

[06:26] <evalbot6> (['a', 'b', 'c', 'd', 'e', 'f'] => 1) 

[06:26] <Darren_Duncan> the cause of the problem is that the variable is passed as a sub/method argument, which imposes a list context

[06:26] <Darren_Duncan> it seems

[06:27] <Darren_Duncan> since array/hash etc constructors auto become a list in list context or a ref in scalar context, I was forcing scalar with the $temp

[06:27] <QtPlatypus> I see what was happening {} was being considered as being a block.

[06:27] <Darren_Duncan> I'm not sure if its supposed to do that or not

[06:27] <Darren_Duncan> what you say is true if it is empty or has no => at its start

[06:27] <Darren_Duncan> but if it does have a =>, then it should be interpreted as a hash

[06:28] <Darren_Duncan> this is what I see in the Synopsis, and also what Pugs currently does

[06:28] <QtPlatypus> I't doesn't look like my example was.

[06:28] <QtPlatypus> ?eval my $foo = ([<a b c d e f>] => 1);$foo

[06:28] <evalbot6> (['a', 'b', 'c', 'd', 'e', 'f'] => 1) 

[06:28] <Darren_Duncan> your example has the => in it

[06:28] <QtPlatypus> ?eval my $foo = {[<a b c d e f>] => 1};$foo

[06:28] <evalbot6> {('1' => undef), ('a' => 'b'), ('c' => 'd'), ('e' => 'f')} 

[06:28] <Darren_Duncan> the => is enough to make it a hash

[06:29] <QtPlatypus> What is the one with the {}

[06:29] <QtPlatypus> 's doing in this case?

[06:29] <Darren_Duncan> a plain old {} will make a block

[06:29] <Darren_Duncan> to make an empty hash, use hash()

[06:30] <Darren_Duncan> Synopsis 5 i think

[06:30] <QtPlatypus> Shouldn't my second example be treated as a hash since it has a => in it?

[06:30] <Darren_Duncan> your last example did not have a => at the root level

[06:30] <Darren_Duncan> mind you ...

[06:30] <Darren_Duncan> nevermind

[06:30] <QtPlatypus> It didn't?

[06:31] <Darren_Duncan> ?eval my $foo = {[<a b c d e f>] => 1};$foo.ref

[06:31] <evalbot6> ::Hash 

[06:31] <Darren_Duncan> your last example is a Hash

[06:31] <Darren_Duncan> so no worries there

[06:31] <QtPlatypus> What it looks like is happening is that the stuff in the [<...>] is getting flattened?  Sould it be flattened like that?

[06:31] <Darren_Duncan> ?eval my $foo = {}; $foo.ref

[06:31] <evalbot6> ::Bare 

[06:32] <Darren_Duncan> ?eval my $foo = hash(); $foo.ref

[06:32] <evalbot6> ::Hash 

[06:32] <Darren_Duncan> I think it is supposed to flatten

[06:32] <Aankhen``> Hmm.

[06:33] <Darren_Duncan> or maybe not

[06:33] <Aankhen``> Try as I may, I cannot get this file to parse.

[06:33] <QtPlatypus> That doesn't seem like usefull behavour,  If I wished to have it flatten i wouldn't put []'s  around it.

[06:33] <Aankhen``> So I'm going to commit it under t_disabled/ and hope someone can help.

[06:33] <Darren_Duncan> I seem to recall that you can use anything as a hash key, including an object or reference

[06:34] <Darren_Duncan> give me a few minutes and I'll commit my recent work ...

[06:34] <QtPlatypus> Darren_Duncan: In some of the stuff I've been doing the objects seem to loose there object nature.

[06:35] <QtPlatypus> And end up normal strings.

[06:35] <Darren_Duncan> in Perl 5 that happens, I haven't tried it in Perl 6 yet

[06:36] <Darren_Duncan> I mean when used as hash keys

[06:36] <Aankhen``> D'oh!

[06:36] <Darren_Duncan> figured it out eh?

[06:36] <Aankhen``> Yep.

[06:36] * Aankhen`` looks ashamed.

[06:37] <autrijus> rehi \camels!

[06:37] <Aankhen``> Morning autrijus. :-)

[06:37] <Darren_Duncan> morning

[06:37] <autrijus> I'm reading up on Boo.  it looks wonderfully like perl 6.

[06:37] <Darren_Duncan> I'm about to commit a big LKT change, then want to talk about it

[06:37] <Darren_Duncan> I discovered several Pugs bugs and/or apparent mis-features

[06:37] <QtPlatypus> ?eval my %hash = (Object.new => "foo");%hash.perl

[06:37] <evalbot6> '{(\'<obj:Object>\' => \'foo\')}' 

[06:37] <autrijus> In fact, I think it's much better than PyPy to copy from.

[06:38] <nothingmuch> Boo?

[06:38] <autrijus> nothingmuch: http://boo.codehaus.org/ -- read the manifesto

[06:38] <QtPlatypus> The object looks like it gets stringafied, and that seems to be what happens in my code as well.

[06:38] <svnbot6> r4708, Aankhen++ | * added adverbial_modifiers.t under t_disabled due to parsefail.  Help!

[06:38] <svnbot6> r4709, Aankhen++ | * t_disabled/adverbial_modifiers.t -- fixed parsefail.

[06:38] <svnbot6> r4710, Aankhen++ | * moved adverbial_modifiers.t to t/operators/

[06:39] <autrijus> it's very well thought out... almost all perl6's core language "highlights" are supported one way or another

[06:39] <autrijus> QtPlatypus: right, hash is shaped as (key=Str, val=Any) by default

[06:39] <autrijus> QtPlatypus: there's currently no other IHash type

[06:39] <autrijus> QtPlatypus: but writing a IHashAny will get you key=Obj

[06:40] <autrijus> but bear with me a bit... I've slept for 6hr only and just woke up

[06:41] <Aankhen``> ?eval sub prefix:<blub> (Str $foo, Int +$times) { ("BLUB" x $times) ~ $foo }; blub "bar";

[06:41] <evalbot6> Error: No compatible subroutine found: "&blub" 

[06:42] <Aankhen``> ?eval sub prefix:<blub> (Str $foo, Int +$times) { ("BLUB" x $times) ~ $foo }; blub"bar";

[06:42] <evalbot6> Error: No compatible subroutine found: "&blub" 

[06:42] <autrijus> ?eval sub blub (Str $foo, Int +$times) { ("BLUB" x $times) ~ $foo }; blub"bar";

[06:42] <evalbot6> 'bar' 

[06:42] <Darren_Duncan> committed as 4711

[06:42] <autrijus> Aankhen``: parser bug I think... the prefix: should be removed for nonsymbolics

[06:42] <Darren_Duncan> 20_TrnProps passes all tests

[06:43] <Darren_Duncan> 10_MsgProps would pass all tests were it not for Bugs in Pugs

[06:43] <Aankhen``> Ah.

[06:43] <Darren_Duncan> once y'all update you can see what I mean

[06:44] <QtPlatypus> autrijus: I guess I'll have to learn haskal then.

[06:44] <svnbot6> r4711, Darren_Duncan++ | large Locale-KeyedText change set : changed all plural object properties to be refs to hashes/arrays rather than hashes/arrays; likewise all plural arguments and retvals are now refs; plural properties are now copied on input/output; updated LKT_10_MsgProps.t and LKT_20_TrnProps.t and t_LKT_Util.pm to work around an apparent Pugs misfeature where Hash|Array|Pair auto-become List when given as arguments; workaround a Pugs bug where sin

[06:44] <autrijus> QtPlatypus: walked thru nothingmuch's harrorth journal yet?

[06:45] <QtPlatypus> autrijus: No please throw me a URL.

[06:47] <Darren_Duncan> autrijus, the most serious Pugs bug I encountered can be easily illustrated by comparing the following 2 examples ...

[06:47] <Darren_Duncan> ?eval my %foo = {1=>2,3=>4,5=>6}; "{%foo.pairs.join(',')}";

[06:47] <evalbot6> '1 2,3 4,5 6' 

[06:47] <Darren_Duncan> ?eval my %foo = {1=>2}; "{%foo.pairs.join(',')}";

[06:47] <evalbot6> '1,2' 

[06:47] <Darren_Duncan> the first example shows 3 pairs separated by commas; the second shows 2 scalars, the one Pair was split up

[06:48] <Darren_Duncan> fix this and 2 of my failing tests will work

[06:48] <autrijus> QtPlatypus: http://perlcabal.org/~nothingmuch/harrorth/

[06:49] <autrijus> Darren_Duncan: is there a standalone test for it?

[06:49] <Darren_Duncan> I don't know

[06:49] <autrijus> t/data_types/*

[06:49] <autrijus> hm, not sure

[06:49] <Darren_Duncan> in any event, all the problems I found were when trial-and-erroring LKT

[06:49] <autrijus> the test is t/builtins/arrays_and_hashes/pairs.t

[06:50] <autrijus> but your example is not in there

[06:50] <autrijus> can you spare a moment to add it in there so it's easier to track? I'll fix it right away.

[06:50] <Darren_Duncan> will do

[06:50] <autrijus> danke

[06:52] <Aankhen``> Um.

[06:52] <Aankhen``> Darren_Duncan >> You're using {...} to assign to a hash?

[06:52] <Aankhen``> Doesn't that create a hash ref?

[06:52] <Darren_Duncan> it should, but currently those flatten anyway

[06:52] <Aankhen``> Ah.

[06:52] <autrijus> ?eval my %foo = (1=>2); "{%foo.pairs.join(',')}";

[06:53] <evalbot6> '1,2' 

[06:53] <Aankhen``> ?eval my %foo = (1=>2,3=>4,5=>6); "{%foo.pairs.join(',')}";

[06:53] <evalbot6> '1 2,3 4,5 6' 

[06:53] <autrijus> Aankhen``: currently the % in %foo is just a cxt hinter.

[06:53] <Aankhen``> OK.

[06:53] <Darren_Duncan> same result, see

[06:53] <autrijus> Aankhen``: so you can store a Ref in it.

[06:53] <gaal_> is there someinth akin to p5 STDIO in p6?

[06:53] <autrijus> I'm unsure of whether it's a bug or a feature or both.

[06:53] <Aankhen``> Darren_Duncan >> I thought it would be, I just wanted to do it for the sake of completeness. :-)

[06:53] <gaal_> ie stdin+stdout

[06:53] <Darren_Duncan> ?eval my $foo = (1=>2,3=>4,5=>6); "{$foo.pairs.join(',')}";

[06:53] <evalbot6> '0 1 2,1 3 4,2 5 6' 

[06:53] <Aankhen``> autrijus >> Say it's a feature till someone complains? ;-)

[06:54] <autrijus> gaal_: there is no such thing as STDIO in p5.

[06:54] <Darren_Duncan> ?eval my $foo = {1=>2,3=>4,5=>6}; "{$foo.pairs.join(',')}";

[06:54] <autrijus> Aankhen``: it's a feature :)

[06:54] <evalbot6> '1 2,3 4,5 6' 

[06:54] <Aankhen``> autrijus >> Roger!

[06:54] *** gaal_ is now known as gaal

[06:54] <gaal> isn't there?

[06:54] <Darren_Duncan> ?eval my $foo = {1=>2}; "{$foo.pairs.join(',')}";

[06:54] <evalbot6> '1,2' 

[06:54] <Darren_Duncan> I normally use the $ form anyway, and here it gives the same result

[06:55] <Aankhen``> Darren_Duncan >> I see that.

[06:55] <Aankhen``> ?eval 1 => 2

[06:55] <gaal> eek, you're right. now why did i think there was?

[06:55] <evalbot6> (1 => 2) 

[06:55] <autrijus> it's actually a join bug.

[06:55] <autrijus> ?eval my %foo = (1=>2); %foo.pairs;

[06:55] <evalbot6> (\('1', 2)) 

[06:55] <autrijus> ?eval my %foo = (1=>2, 4 => 5); %foo.pairs;

[06:55] <evalbot6> (\('1', 2), \('4', 5)) 

[06:55] <autrijus> look, completly sane

[06:56] <autrijus> ?eval my %foo = (1=>2, 4 => 5); join '---', %foo.pairs;

[06:56] <evalbot6> '1 2 4 5' 

[06:56] <autrijus> basically join() is borked. fixing

[06:56] <Khisanth> where did the --- go?

[06:56] <autrijus> er, newlines.

[06:56] <autrijus> ?eval my %foo = (1=>2); (join '---', %foo.pairs).perl;

[06:56] <evalbot6> '\'1 2\'' 

[06:56] <autrijus> ?eval my %foo = (1=>2, 4 => 5); (join '---', %foo.pairs).perl;

[06:57] <evalbot6> '\'1 2 4 5\'' 

[06:57] <autrijus> hmmmmm

[06:57] <obra>  ?eval for ('q','e') -> (say $_)

[06:57] <autrijus> ?eval for ('q','e') -> { say $_ }

[06:57] <QtPlatypus> obra: evalbot doesn't know about say

[06:57] <Darren_Duncan> join() isn't the problem by itself; try doing a map:{} on the pairs() that invokes .key or something

[06:57] <evalbot6> Error: No compatible subroutine found: "&say" 

[06:57] <Darren_Duncan> program crash

[06:57] <autrijus> ?eval gather @_ { for ('q','e') -> { take $_ } }; @_

[06:57] <evalbot6> Error:  unexpected "{" expecting operator, postfix conditional, postfix loop, postfix iteration, ";" or end of input 

[06:58] <autrijus> ?eval gather { for ('q','e') -> { take $_ } }

[06:58] <evalbot6> ('q', 'e') 

[06:58] <autrijus> there.

[06:58] <obra>  ?eval gather { for ('q','e') -> $foo { take $_ } }

[06:58] <autrijus> don't add space before ?eval

[06:58] <obra> urg. paste fault

[06:58] <obra> ?eval gather { for ('q','e') -> $foo { take $_ } }

[06:58] <evalbot6> ('perl6', 'perl6') 

[06:58] <autrijus> wwwwwwtf?

[06:58] * obra grins

[06:59] <autrijus> ah. it's correct in a sense ;)

[06:59] <autrijus> it took the outer scope's $_

[06:59] <obra> not according to A06

[06:59] <Darren_Duncan> ?eval my $foo = {1=>2,3=>4,5=>6}; "{$foo.pairs.map:{.key~'='~.value}}";

[06:59] <evalbot6> '1=2 3=4 5=6' 

[06:59] <obra> at least according to one interpretation

[06:59] <Darren_Duncan> ?eval my $foo = {1=>2}; "{$foo.pairs.map:{.key~'='~.value}}";

[06:59] <obra>     Methods, submethods, macros, rules, and pointy subs all                                          

[06:59] <evalbot6> Error: cannot cast from VStr "1" to (Pugs.AST.Internals.Val,Pugs.AST.Internals.Val) 

[06:59] <obra>     bind their first argument to C<$_>;

[06:59] <Darren_Duncan> now see ...

[06:59] <Darren_Duncan> that's how I FIRST encountered the problem

[07:00] <Darren_Duncan> and no join in sight (here)

[07:00] <Darren_Duncan> my join() example just better illustrates that pairs() is the piece at fault

[07:00] <autrijus> obra: a bug. test?

[07:01] <obra> was going to sleep, but ok. where should it live?

[07:01] <autrijus> t/subroutines/whatever.t

[07:01] <autrijus> dollar_underscore.t

[07:03] <nothingmuch> boo sounds cool

[07:03] <nothingmuch> maybe he should target parrot ;-)

[07:03] <autrijus> Darren_Duncan: unfortunately, it's a class of problem plagueing all list/array methods.

[07:03] <autrijus> Darren_Duncan: I'm fixing it :)

[07:03] <obra> autrijus: I'd named it that before flipping back to this screen to see that you had too

[07:04] * nothingmuch goes to learn some Qt and write chapter 8

[07:04] <autrijus> obra: heh cool

[07:04] * autrijus hopes Qt and ch8 are not related

[07:05] <Darren_Duncan> autrijus, this is another thing, perhaps related ...

[07:05] <Darren_Duncan> ?eval sub bar( $foo ) { "{$foo.ref}" } my $temp = {1=>2,3=>4}; bar( $temp );

[07:05] <evalbot6> 'Hash' 

[07:05] <Darren_Duncan> compare to

[07:05] <nothingmuch> no, they aren't =)

[07:05] <Darren_Duncan> ?eval sub bar( $foo ) { "{$foo.ref}" } my bar ( {1=>2,3=>4} );

[07:05] <evalbot6> Error:  unexpected "{" expecting variable name, "undef" or ")" 

[07:05] <Darren_Duncan> one sec

[07:05] <Darren_Duncan> ?eval sub bar( $foo ) { "{$foo.ref}" } my bar( {1=>2,3=>4} );

[07:05] <evalbot6> Error:  unexpected "{" expecting variable name, "undef" or ")" 

[07:06] <Darren_Duncan> again

[07:06] <Darren_Duncan> ?eval sub bar( $foo ) { "{$foo.ref}" } bar( {1=>2,3=>4} );

[07:06] <evalbot6> 'List' 

[07:06] <Darren_Duncan> see, 'Hash' became 'List', and I didn't want it to

[07:07] <Darren_Duncan> the same thing happens with 'Array' and 'Pair' when passed as argument

[07:07] <Darren_Duncan> putting in all those $temp is troublesome

[07:07] <Darren_Duncan> but this may also be a symptom of a deeper problem affecting other things

[07:10] <autrijus> nod.

[07:10] <autrijus> there are more than one bug here.

[07:10] <obra> autrijus: committed

[07:10] <autrijus> I'd appreciate if they are in a unit-by-unit form so I can test my fixes against... maybe stash them all into t/pugsbugs/ for now?

[07:10] <autrijus> obra++

[07:13] * obra -> sleep.

[07:14] <ingy> hi obra, autrijus 

[07:14] <obra>     hey ingysan

[07:15] <obra> er. autrijus, is openfoundry the canonical repo these days?

[07:16] <svnbot6> r4712, jesse++ | * Tests for pugs breakage when using the $_ implicit param after declaring a param

[07:16] <svnbot6> r4712, jesse++ | According to A06:                                       

[07:16] <svnbot6> r4712, jesse++ |     Methods, submethods, macros, rules, and pointy subs all                                          

[07:16] <svnbot6> r4712, jesse++ |     bind their first argument to C<$_>; ordinary subs declare                                        

[07:16] <svnbot6> r4712, jesse++ |     a lexical C<$_> but leave it undefined.   

[07:16] <obra> ah, yes :)

[07:16] <ingy> obra: did you see doolittle?

[07:17] <obra> ingy: no. whatis?

[07:17] <ingy> obra: oh... hmm hold on

[07:19] <ingy> obra: http://doolittle.kwiki.org/

[07:20] <ingy> so the idea is that everyone can write the *real* Kwiki/Spoon doc now

[07:20] <ingy> changes get saved right into the modules

[07:20] <ingy> which I can later release to cpan

[07:20] <obra> ah. you finally did it. cool

[07:20] <ingy> :)

[07:20] <ingy> so I want to open this up as a general service

[07:20] <Darren_Duncan> committed 4713 ...

[07:21] <Darren_Duncan> has the pairs() test added to pairs.t as autrijus requested

[07:21] <ingy> and i was thinking that anyone with a FreePAN account should get this for free

[07:21] <svnbot6> r4713, Darren_Duncan++ | updated test t/builtins/arrays_and_hashes/pairs.t to check that pairs() on single and double element hashes returns one or two pair objects respectively

[07:22] <ingy> which would be great for freepan. then I was thinking there should be some RT tie-ins too

[07:22] <ingy> which brings me to you!

[07:22] <Darren_Duncan> of course, 2 of the 4 added tests fail ... of those the second crashes the program

[07:23] <ingy> obra: oh, btw, gugod and I are writing Kwiki::Archive::Simple which just uses files and dirs. The big advantage is that you'll be able to delete spam with simple unix commands find/grep/xargs/rm etc

[07:24] <obra> nice

[07:24] <Darren_Duncan> another bug I discovered, which I still have to isolate, is why simply reading a hash element that doesn't exist will add that key to the hash

[07:24] <obra> ingy: we should talk rt tieins when I'm more awake and less eyes-crossy

[07:25] <Darren_Duncan> meanwhile, you can see it when running LKT_10_MsgProps.t; see the last 6 or so tests in it

[07:25] * obra -> thud, really

[07:28] <ingy> obra: fair nuff

[07:56] <Aankhen``> ?eval my %foo = (); %foo<bar>

[07:56] <evalbot6> \undef 

[07:56] <Aankhen``> ?eval my %foo = (); %foo<bar>; %foo.exists("bar");

[07:57] <evalbot6> bool::true 

[07:57] <Aankhen``> ?eval my %foo = (foo => "bar"); %foo.exists('foo')

[07:57] <evalbot6> bool::true 

[07:57] <Aankhen``> ?eval my %foo = (foo => "bar"); (%foo.exists('foo'), %foo.exists('bar'));

[07:57] <evalbot6> (bool::true, bool::false) 

[07:58] <Aankhen``> ?eval my %foo = (foo => "bar"); (%foo.exists('foo'), %foo<bar>, %foo.exists('bar'));

[07:58] <evalbot6> (bool::true, \undef, bool::true) 

[07:58] <Aankhen``> Darren_Duncan >> If you're busy, should I write the test?

[07:58] <Darren_Duncan> just a minute

[07:58] <Aankhen``> ?eval true

[07:58] <evalbot6> Error:  unexpected end of input expecting term 

[07:58] <Aankhen``> Bleh.

[07:58] <Aankhen``> OK.

[07:59] <Darren_Duncan> you can go ahead

[07:59] <Aankhen``> A'right.

[07:59] <Darren_Duncan> I'm still isolating it in a different way

[08:03] <Aankhen``> Hmm.

[08:03] <Aankhen``> The bug doesn't seem to be there on my build...

[08:03] <Aankhen``> ?eval $?PUGS_VERSION

[08:03] <evalbot6> \'Perl6 User\'s Golfing System, version 6.2.7, June 13, 2005 (r4691)' 

[08:04] <pasteling> "Aankhen``" at 203.101.16.84 pasted "Reading an inexistent hash key" (5 lines, 212B) at http://sial.org/pbot/11124

[08:04] <Aankhen``> Seems to be fixed in later builds...

[08:05] <gaal> autrijus + other lambdafolk: http://www.haskell.org/tmrwiki/ArrowsIntroduction

[08:05] <Darren_Duncan> ?eval sub baz( Any $input ) {} my $foo; baz( $foo{'zzz'} ); baz( $foo{'bar'} ); "{$foo}";

[08:05] <evalbot6> 'bar	 zzz	 ' 

[08:05] <Darren_Duncan> there's my isolation

[08:06] <Darren_Duncan> of the hash problem

[08:06] <Darren_Duncan> the symptom only occurs if you put the read value as a sub argument

[08:06] <Aankhen``> I think you should wait for evalbot6 to recompile.

[08:07] <Darren_Duncan> my machine is on the latest Pugs version and has the symptom

[08:07] <Darren_Duncan> 4713

[08:07] <Aankhen``> OK.

[08:08] <Darren_Duncan> Aankhen, if you're still writing a test for this, try to include something like what I eval'd above, and credit me for the research

[08:08] <Aankhen``> Could you write the test?  I have to run now...

[08:08] <Darren_Duncan> okay

[08:09] <Aankhen``> (I wrote a test, discovered that it passed on my machine, and deleted the file [earlier])

[08:09] <Darren_Duncan> but I won't be including any of that exists stuff you were doing

[08:09] <Aankhen``> BBL, haircut. &

[08:10] <Darren_Duncan> sub baz( Any $input ) {} my $foo; baz( $foo{'zzz'} ); baz( $foo{'bar'} ); "{$foo.pairs.join(',')}"

[08:10] <Darren_Duncan> ?eval sub baz( Any $input ) {} my $foo; baz( $foo{'zzz'} ); baz( $foo{'bar'} ); "{$foo.pairs.join(',')}"

[08:10] <evalbot6> 'bar ,zzz ' 

[08:11] <Darren_Duncan> brb

[08:44] <Darren_Duncan> okay, committed some tests that hashes don't gain elements as a side-effect of being read from

[08:44] <svnbot6> r4714, Darren_Duncan++ | added test set to t/builtins/arrays_and_hashes/exists.t that asserts hashes will not gain elements just because someone reads from them

[08:45] <Darren_Duncan> I put them in exists.t since it was the closest related conceptually; if that was wrong, feel free to split out

[08:47] <Darren_Duncan> I'm going to bed now ... at almost 2am ... good night

[09:31] <chip> Anybody else running screen on feather?

[09:39] *** Boogie___ is now known as Boogie

[09:42] <nothingmuch> chip: I can run it if you like ;-)

[09:43] <chip> I'm just seeing some display artifacts.  Missing spaces .. and for a while, #perl6 was actually "pound perl6".  Like, british pound sterling

[09:43] <nothingmuch> heh

[09:44] <nothingmuch> i've never used screen because my prompt includes a ‚Ä¢ and i never had any time to find out to get it properly displayed

[09:44] * nothingmuch just realized it was pointless to type a ‚Ä¢ since you can't see ‚Ä¢'s under screen. what it is a bullet, like what you see when you fill in a password box

[09:45] <nothingmuch> and the reason it's there is that my bash prompt function will color it red or green based on the exit code of the last command

[09:45] <lumi> Why not?

[09:46] <lumi> screen -U

[09:46] <nothingmuch> chip: I guess that's your answer ;-)

[09:46] <gugod> pugs.kwiki.org is getting spam :(

[09:46] <nothingmuch> gugod: yeah, i've cleaned some on several occasions

[09:46] <nothingmuch> lumi++

[09:46] <nothingmuch> i think i'll start learning to use screen now =D

[09:47] <chip> it's back

[09:47] <chip> &perl6

[09:47] <chip> £perl6 even

[09:47] <chip> My kde terminal doesn't understand utf8 though.  Hm.

[09:47] <chip> or maybe it does...

[09:48] <nothingmuch> ◊©◊ú◊ï◊ù!

[09:48] <nothingmuch> did that look like latin or hebrew?

[09:48] <gugod> ‚ô® 

[09:48] <chip> that looks like x copyright x reverse-\ x reverse-U x reverse-] !

[09:49] <nothingmuch> i'm sending out utf8

[09:49] <nothingmuch> and I saw gugod's hot spring

[09:52] <gugod> Kwiki is kinda weak when rendering massive spam links

[09:53] <nothingmuch> kwiki is always pretty slow

[09:53] <nothingmuch> on small chunks of data it just doesn't matter

[09:53] <gugod> HomePage was having 70KB of "http://..." , and it consumes >100MB to render it

[09:53] <gugod> and never finished

[09:53] <lumi> I think the screen needs to be originally launched -U, and then you go /set term_type utf-8 in irssi

[09:54] <lumi> That is, screen -U irssi, and not just reattaching to an old, formerly non-utf8 screen, but I might be mistaken

[09:55] <gugod> you can do ":encoding utf8 utf8" for old screen too

[10:18] <formalin14> does perl6 have pragmas?

[10:18] <crysflame> did you have any specific ones in mind?

[10:21] <autrijus> formalin14: yes, perl6 does. pugs however does not because we don't yet have a compiler. I'm however working on it.

[10:22] <formalin14> how to use perl5's pragmas?

[10:26] <meppl> formalin14,   use modulename;

[10:26] <formalin14> ?

[10:27] <meppl> "use modulname;"

[10:28] <pjcj> las cover

[10:32] <formalin14_> to use perl5 module: use LWP::Simple--perl5;        but how to export functions?

[10:32] <formalin14_> use POSIX--perl5 qw(strftime); not ok

[10:33] <formalin14_> use strict--perl5 "vars", "subs";    not ok too

[10:35] *** formalin14_ is now known as formalin14

[10:38] <mugwump> formalin14: at the moment, I think you need to use only OO interfaces

[10:39] <formalin14> what is the multi-thread module in pugs?

[10:44] <meppl> i would ask, if it still exists

[10:44] <mugwump> there has been threading support via GHC

[10:45] <mugwump> have a look at autrijus' recent paper

[10:46] <nothingmuch> oh my, ch8 is getting long

[10:51] <mugwump> ch8?

[10:52] <formalin14> wondering too

[11:05] <lumi_> Maybe divide it

[11:18] <cognominal> autrijus, what do you use to format kwid docs?

[11:28] <autrijus> cognominal: Spork::Formatter::Kwid

[11:30] <cognominal> Spork will eat the world...

[11:30] <cognominal> http://autrijus.org/tmp/perlkwid.kwid # is this a reference document?

[11:31] <autrijus> yeah

[11:32] <cognominal> I see there is an kwid event parser in pugs

[11:34] <autrijus> it's stevan's. right

[12:20] <Gruber> hmm

[12:20] <Gruber> tobez@hrum src/pugs> ./pugs -e '"hello, world".reverse.say; my $x="hello, world"; $x.reverse.say'

[12:20] <Gruber> hello, world

[12:20] <Gruber> dlrow ,olleh

[12:22] * autrijus notes something about list context reverse.

[12:23] <autrijus> but I'm not sure if that is relevant here.  looks like the same list/array bug darren ran into. hmm. but I need to run to lunch now.  bbiab...

[12:42] <mugwump> ‚ô® ‚àã ‚ò∫

[12:43] <nothingmuch> is there a word meaning "reschedule to an earlier date"?

[12:43] <nothingmuch> chapter 8 is done

[12:43] <mugwump> "to bring forward"

[12:44] <nothingmuch> in the context of elections? do you "bring forward the elections"?

[12:44] <mugwump> yes, or "bring the elections forward"

[12:45] <mugwump> or just "have early", perhaps.  as in "have the elections early"

[12:49] <nothingmuch> darcs pull

[12:50] <nothingmuch> feedback on chapter 8 more than welcome

[12:50] <nothingmuch> there's a known bug though

[13:26] <pasteling> "gaal" at 192.115.25.249 pasted "Emit.PIR compilation warnings (linux)" (20 lines, 1.3K) at http://sial.org/pbot/11132

[13:26] <autrijus> gaal: known :)

[13:26] <gaal> k :)

[13:26] <gaal> did you see that link about arrow?

[13:27] <autrijus> gaal: you're welcome to add signs

[13:27] <gaal> arrows

[13:27] <autrijus> gaal: yes and I surveyed parrow

[13:27] <autrijus> it doesn't looks like production grade now

[13:27] <autrijus> I'd wait until it can be more or less a dropin for parsec

[13:27] <autrijus> (and also ghc runs monads faster than arrows, last I heard, so the space leak optimisation may not worth it)

[13:28] <gaal> oh

[13:29] <gaal> it looked like for parsers it can work faster

[13:29] <gaal> not that i actually understand what "it" or "they" are.. :)

[13:30] <autrijus> gaal: "can" as in "potentially in the future" :)

[13:30] <gaal> ah :)

[14:18] <Limbic_Region> autrijus - if you have time, there is a great parrot -> p6 question

[14:18] <Limbic_Region> http://perlmonks.org/index.pl?node_id=467256

[14:18] <Limbic_Region> I don't know how to answer it myself

[14:19] <Limbic_Region> ooh - didn't realize the channel was that quiet

[14:19] <Limbic_Region> anyone who knows how to get p6 and parrot talking to one another beyond rules support is welcome to answer btw

[14:20] <autrijus> alright.

[14:20] <autrijus> all pugs can compile to parrot using -BParrot

[14:20] <autrijus> pugs -BParrot examples/mandel.p6

[14:20] <autrijus> compiles to parrot, finds parrot in PATH, and run it.

[14:21] <autrijus> replacing -B with -C compiles things to dump.ast.

[14:21] <autrijus> in trunk pugs, there is a much more robust support, in the form of -BPIR and -CPIR.

[14:21] <Limbic_Region> what about getting at Pugs from Parrot?

[14:21] <chip> yay

[14:21] <Limbic_Region> which I think is the root of the question

[14:21] <autrijus> Limbic_Region: if you compile pugs with PUGS_EMBED=parrot

[14:21] <chip> Limbic_Region: .sub foo / chdir "pugs" / .end

[14:21] <autrijus> then you can eval perl6 using the usual compreg thing.

[14:21] * chip gets at pugs

[14:22] <autrijus> see my previous p6c posts

[14:22] <autrijus> i.e. you can eval perl 6 code from PIR

[14:22] <autrijus> but that's all.

[14:22] <autrijus> there is currently no support in running pugs directly from the parrot executable.

[14:22] * Limbic_Region would rather autrijus and/or chip answer the question by ninthwave since he feels he is likely to F it up bigtime

[14:22] <autrijus> I can see a --with-pugs in the future.

[14:22] <autrijus> (for parrot)

[14:24] <Khisanth> ./parrot dump.ast is suppose to work?

[14:25] <autrijus> Khisanth: aye

[14:25] <Limbic_Region> ok - I will summarize this conversation as a reply and hope it suffices

[14:25] <autrijus> gawd.

[14:25] <autrijus> I replied it almost

[14:25] <autrijus> and hit Ctrl-W

[14:25] <autrijus> and this is new firefox

[14:25] <autrijus> without extensions

[14:26] <autrijus> oh well.

[14:26] <autrijus> anyway, mention require_parrot() eval_parrot() primitives too

[14:26] <autrijus> which works even with external parrot

[14:26] <autrijus> the current help I can use is to help transcribe Pugs.Prims into Emit.PIR's prims.

[14:29] <Khisanth> parrot has rather long op names O_O

[14:31] <gaal> what's p6 for "$#bigarr = 65535"?

[14:31] <autrijus> gaal: lvalue .end I think. not sure

[14:32] <gaal> we don't have that yet, do we?

[14:32] <gaal> ..no.

[14:32] <QtPlatypus> @dim is shaped(0..65535);

[14:32] <QtPlatypus> my @dim is shaped(0..65535);

[14:32] <QtPlatypus> Does that sound right?

[14:33] <gaal> could be :) what does @dim[70000] do? modulo, or error?

[14:33] <QtPlatypus> Error IIRC

[14:33] <gaal> ("is shape" probably)

[14:34] <gaal> yes, thanks, that's what s09 says

[14:35] <chip> welcome to PL/I

[14:35] <gaal> does this actually allocate memory?

[14:36] <svnbot6> r4715, iblech++ | * Added the usual svn props to t/subroutines/dollar_underscore.t and

[14:36] <svnbot6> r4715, iblech++ |   t/operators/adverbial_modifiers.t.

[14:36] <svnbot6> r4715, iblech++ | * Added a test for the &prefix:<=> operator (generic iteration operator)

[14:36] <svnbot6> r4715, iblech++ |   (t/operators/iteration.t).

[14:36] <chip> I loved PL/I, actually.  Even before I knew why it was different, it just seemed .... right

[14:36] <gaal> and so can i have a class data constant saying $SIZE = 100, and then declare "has @arr is shape (0.. $SIZE-1)" ?

[14:36] <chip> if if = then then then = else else else = end end if

[14:37] <QtPlatypus> gaal: I expect thats an implementation issue.  But I would expect that the compiler would be able to make use of the extra infomation to opimize arrays of fixxed size.  Including prealocating the memory.

[14:38] <chip> hm.  I see two use cases.  One is just trying to validate the indices, like locked hashes do.  The other is actually planning to use the whole size every time.

[14:39] <gaal> i like to have .end say the right thing right from start

[14:39] <gaal> 'id

[14:39] <Limbic_Region> my reply - http://perlmonks.org/index.pl?node_id=467294

[14:39] <gaal> i'd

[14:39] <gaal> man i can't type

[14:40] <pdcawley> ? eval sub foo { my sub bar { 1 }; bar(); }; foo()

[14:40] <pdcawley> ?eval sub foo { my sub bar { 1 }; bar(); }; foo()

[14:40] <evalbot6> Error: Undeclared variable: "&bar" 

[14:40] <gaal> but actually since i need to initialize the array i just did @.arr[0 .. $MAX-1] = 0 in BUILD....

[14:40] * pdcawley could have sworn that something he read in an apocalypse or exegesis made that legal, but I can't find it now...

[14:41] <Khisanth> WOW! O_O

[14:41] <svnbot6> r4716, iblech++ | Emit.PIR, Pugs.Compile.PIR -- Added "#ifndef HADDOCK" directives to make "make

[14:41] <svnbot6> r4716, iblech++ | haddock" work again.

[14:41] <Khisanth> the speed difference between ./pugs examples/mandel.p6 and ./parrot dump.ast is just ...

[14:42] <QtPlatypus> Khisanth: About 100x faster.

[14:42] <Skilled_sniper> where ist iblechbot ?

[14:42] <Khisanth> I think parrot does the whole thing in less time than it takes pugs to do 1 line

[14:43] <Khisanth> strange, every line with parrot seems to be constant time but pugs slows down around the "middle" of the fractal

[14:43] <integral> is the parrot one faster than the perl5 one yet?

[14:43] <pdcawley> That probably just means that hte parrot one *does* slow down, but that drawing to the screen is the limiting factor.

[14:44] <Khisanth> parrot can draw to the screen faster than pugs?

[14:44] <iblech> Skilled_sniper: Err? What do you mean?

[14:44] <integral> Khisanth: haskell can be quite slow with strings (they're stored as cons lists)

[14:44] <svnbot6> r4717, iblech++ | Pugs.Prim, Prelude -- Made =$obj mean $obj.next(), as said by Damian (see

[14:44] <svnbot6> r4717, iblech++ | t/operators/iteration.t for a link to his post).

[14:44] <pdcawley> Khisanth: No, but it can do the maths a lot quicker, so drawing to the screen takes up a greater percentage of its time. 

[14:45] <pdcawley> But on thinking further, I'm probably talking utter bollocks.

[14:45] * pdcawley should just stick to playing world of warcraft and be done with all this technical stuff.

[14:45] <Khisanth> EWW

[14:46] <Khisanth> integral: does not even come close to beating p5 :/

[14:47] <pdcawley> Is this JITted or unjitted parrot?

[14:47] <Khisanth> not sure, how do find out?

[14:47] <integral> iirc you'll need a very recent parrot for JIT to work

[14:47] <pdcawley> parrot -j mandel.pasm

[14:47] <pdcawley> if memory serves.

[14:47] <Khisanth> integral: I just checked it out not too many minutes ago :)

[14:48] <integral> ok :-)

[14:48] <pdcawley> Or whatever the file is...

[14:48] * Khisanth waits for pugs to finish running

[14:49] <integral> is this an optimized pugs?

[14:49] <Khisanth> integral: do the Haskell people plan to do anything about the slowness of the strings?

[14:49] <Khisanth> integral: I thought that was the default

[14:49] <integral> there's a faster string type,  pugs just doesn't use it

[14:50] <integral> it's more opaque so you can't do pattern matching on it

[14:50] <Khisanth> I mean the optimized pugs

[14:50] <integral> if you type 'make' yes :-)

[14:50] <Khisanth> then yes

[14:51] <Khisanth> I usually update pugs, have it start building and then go to sleep

[14:52] <autrijus> jit unbox mandel beats p5.

[14:52] <autrijus> but we are using boxed unoptimised parrot currently

[14:52] <autrijus> for safety and ease of testing.

[14:52] <autrijus> optimisation comes later.

[14:52] <autrijus> (I benched unboxed mandel a few months ago on my journal)

[14:53] <autrijus> even unoptimised parrot comes out to be 5% faster than optimised perl5.

[14:53] <autrijus> (here unbox is just for literals)

[14:53] <Khisanth> pdcawley: I don't think it's the string handling that is causing the slowdown

[14:53] <autrijus> the slowdown in pugs's runloop is because we are running the parse tree

[14:53] <autrijus> so all if() etc are processed in tight loop

[14:54] <autrijus> redispatched and the closures recreated etc

[14:54] <Khisanth> the middle part requires more if?

[14:54] <autrijus> Khisanth: the 

[14:54] <autrijus>                 last() if $k > 12;

[14:54] <Arathorn> autrijus: are you joking about targetting ecmascript/perl5, btw?

[14:54] <autrijus> is redispatched with (Syn "if") every time

[14:54] <autrijus> Arathorn: no.

[14:54] <Arathorn> (or would that just be an academic exercise?)

[14:54] <integral> looking at this new stuff, that doesn't look too hard, Arathorn :-)

[14:54] <autrijus> Arathorn: I think a full fledged js/p5 retarget, even just for the base language (i.e. not full object model)

[14:55] <autrijus> is maybe three days of work.

[14:55] <autrijus> even easier if you have a working js/p5 emitter ast from haskell space.

[14:55] <Arathorn> well, wow, then :)

[14:57] <autrijus> so... if someone want to survey and integrate Emit.JS or Emit.Perl5 or Emit.Python or Emit.DotNet or Emit.JVM

[14:57] <autrijus> please feel free to check into pugs.

[14:57] <autrijus> I'll hook Pugs.Emit.* laters :)

[14:57] <Khisanth> pdcawley: getting around the same speed with and without -j between multiple runs

[14:58] <autrijus> the -j thing is bogus for all-PIR operations.

[14:58] <autrijus> need to unbox constants to have it take any effect.

[14:58] <Khisanth> ok

[15:00] <autrijus> s/all-PIR/all-PMC/

[15:02] * autrijus notes that "retargets" sounds much better than "translates to"

[15:02] <autrijus> it implies that you actually have a formal operational semantic that is truly portable without relying on the underlying machine thing.

[15:02] <pdcawley> You're just a marketing guy at herat aren't you?

[15:02] <autrijus> like, you know, the C language

[15:04] <autrijus> pdcawley: actually at heart I'm three marketing guys, four actresses, one dentist, nine jugglers, seventeen bouncing balls, 355/113 trees, e*pi time zones, one half jabberwocky

[15:04] <autrijus> and then some.

[15:04] <autrijus> not to mention a fraction of register alligator.

[15:05] * Limbic_Region prefers just to store 30 digits or so of pi in his head then to remember approximations like 22/7 and 355/113

[15:05] <autrijus> but 113355 is so easy to remember :o

[15:06] <Limbic_Region> did you get a chance to read my reply?

[15:06] <Limbic_Region> http://perlmonks.org/index.pl?node_id=467294

[15:06] <autrijus> yes, it's I think adequate, and if s/he has more followup, I'll field

[15:06] <Limbic_Region> thanks

[15:06] * autrijus is still trying to trick out a segfault from the old alligator

[15:22] <Aankhen``> Someone tell nothingmuch that "reschedule to an earlier date" == "prepone".

[15:26] <Aankhen``> Ahh... I think the next time I work on Pugs will be after nearly three weeks.

[15:26] <Aankhen``> Oh well.

[15:26] <Aankhen``> I have more than a year to continue with it. =)

[15:27] <Aankhen``> Hmm, I want to do something brainless...

[15:27] <Aankhen``> Ah yes.

[15:27] <Aankhen``> UT2004. &

[15:31] <svnbot6> r4718, bsmith++ | Added type signatures to Emit.PIR and Pugs.Compile.PIR where they were lacking.

[15:39] <gaal> hi, a class method is defined "method foo(Class $class: .....)", right?

[15:39] <iblech> Yep

[15:40] <gaal> thanks!

[15:40] <gaal> and if actually it isn't going to use the $class, is there an elegant way to write that?

[15:41] <gaal> i still want it to be callable as MyClass.foo

[15:41] <iblech> Wondered about that, too... But no, I think you have to give a varname, even if you don't use it

[15:42] <gaal> hm, on the language level mayve stipulating "(Class undef)" for that could have worked

[15:42] <gaal> useful for letting the compiler emit warnings on unused vars, after all.

[15:43] <iblech> Like that :) And the use of "undef" in "(Class undef)" is similar to the use of "undef" in "my ($a, undef, $b) = (...)"

[15:44] <gaal> i'll propose it on p6-l then.

[15:44] <iblech> Good :)

[16:01] <gaal> btw, does it make a difference if i say (Class $x : ) or (Class $x)  [<-- no colon] ?

[16:02] <dada> wouldn't "sub foo(...)" work the same?

[16:03] <Arathorn> surreal - Sun are including the Rhino javascript engine as part of j2sdk 6

[16:03] <dada> inside "Class", that is

[16:03] <gaal> sub foo would have to be invoked as MyClass::foo

[16:03] <dada> gaal: right, sure

[16:06] <PerlJam> Larry's response to autrijus regarding zip() has crossed my threshhold for english becoming a foreign language.

[16:07] <gaal> also i thought Pipe was reserved for p5ish open| results

[16:08] * autrijus is having trouble understanding it.

[16:08] <autrijus> gaal: looks like Pipe is this generic thing.

[16:08] <autrijus> not sure how it plays with Iterator/Enumerator

[16:08] <gaal> oh, nyeh, my reply was to larry by mistake and not the list.

[16:08] * autrijus decides to punt and go back to assembly

[16:08] <autrijus> but! tests still welcome

[16:08] <autrijus> (for zip)

[16:09] <gaal> autrijus, i don't see a connection between unix pipes and lists?

[16:09] <autrijus> gaal: lazy lists 

[16:09] <autrijus> gaal: *nix pipes can be thought of a lazy list with the iterate method that returns the next char.

[16:09] <autrijus> or something like that.

[16:09] <gaal> then any filehandle does that.

[16:09] <autrijus> right

[16:09] <autrijus> so it's all Chewbacca to me.

[16:09] <gaal> following damian's recent = == iterator revelation

[16:10] <gaal> sorry, = == iterate

[16:10] <autrijus> please clarify it with larry some, and write some more test, and kill yet some more existing tests :)

[16:10] <autrijus> right

[16:12] <rjbs> = ==?

[16:12] <PerlJam> rjbs: unary = as iterator

[16:13] <rjbs> while (my $item = =@list) ?

[16:13] <rjbs> maybe I should go rtfml

[16:14] <rjbs> Aha, thanks.

[16:14] <PerlJam> that would be the same as   while (my $item = @list.next) { ... }

[16:15] <PerlJam> Assuming arrays have a .next method

[16:15] <rjbs> Yup, just read post.

[16:16] <PerlJam> unary = still doesn't sit well with me though.  I wish I could think of something better.

[16:16] <PerlJam> (syntactically)

[16:17] <kungfuftr> autrijus: http://lxr.mozilla.org/mozilla/source/extensions/sql/

[16:18] <kungfuftr> autrijus: the idl files in there might be bloody handy

[16:20] <autrijus> kungfuftr: you mean retargetting sql!?

[16:20] <autrijus> compile perl6 to sql?

[16:20] <autrijus> mm that's something I havn't thought about.

[16:20] <autrijus> why not?

[16:20] <kungfuftr> *blink*

[16:20] <awwaiid> uh

[16:20] <rjbs> PerlJam: I agree, unary = is a strange choice.

[16:21] <rjbs> Is === an operator?  can you say ($value===$iterator) ? :)

[16:21] * kungfuftr was thinking more in terms of using the idl's as a way to help bind to mysql, etc.

[16:21] <PerlJam> rjbs: the main problem I have is that it's almost always $foo = =$bar;  and "= =" is bothersome

[16:22] <PerlJam> no, === is not an op (unless you define one)

[16:22] <rjbs> PerlJam: I just think = as a unary operator is jarring.  Maybe I'll get over it.

[16:22] <rjbs> PerlJam: I was miscounting anyway, as if one could contract "= =" to "===" because I thinkoed it as "== ="

[16:23] <kungfuftr> autrijus: compile perl6 to sql!?!? are you crazy!?

[16:23] <PerlJam> kungfuftr: crazy like a fox!

[16:24] <xerox> Is SQL turing-complete?

[16:24] <PerlJam> (or just some demented smart person anyway)

[16:24] <PerlJam> ;-)

[16:24] <kungfuftr> xerox: nope

[16:25] <Aankhen``> autrijus >> Re "I've also started thinking about retargetting the PAST -- that is the "essence" of Perl 6 evaluation -- to Javascript or Perl 5.": you're crazy. In a good way. :-D

[16:26] <Aankhen``> Wouldn't it be quite difficult to target JS, though?

[16:26] <Aankhen``> It doesn't really strike me as being a good match for Perl 6...

[16:29] <acme_> but it's a sign of a good AST ;-)

[16:29] <Aankhen``> I guess.

[16:29] <Aankhen``> I never really understood the whole targeting thing anyway. :-P

[16:30] * Corion pops his head in

[16:30] * chip takes aim at Aankhen`` 

[16:30] * Aankhen`` whacks Corion's head.

[16:30] <Corion> I'd be interested in having a JS (and Perl5) target for Pugs :-)

[16:31] <QtPlatypus> ?eval sub zerorry () {2};zeorry * 2;

[16:31] <evalbot6> Error: No compatible subroutine found: "&zeorry" 

[16:31] <Aankhen``> Sure, it'd be interesting.  I'm not against, I'm just idly musing on the difficulty of such a thing... I would be more than happy to use it. :-)

[16:31] <Aankhen``> Against it, even.

[16:31] <QtPlatypus> ?eval sub zerorry () {2};zerorry * 2;

[16:31] <evalbot6> 2 

[16:31] <Aankhen``> o_O

[16:32] <Aankhen``> ?eval sub zerorry () { 2 }; zerorry() * 2;

[16:32] <evalbot6> 4 

[16:32] <Aankhen``> ?eval sub zerorry () { 2 }; zerorry * 2;

[16:32] <evalbot6> 2 

[16:32] <Corion> Aankhen``: I've written a really smallish "compiler" for a subset of Perl5 to JavaScript (mostly for client side validation with server side validation)

[16:32] <QtPlatypus> ?eval sub zerorry () {2};zerorry 

[16:32] <evalbot6> 2 

[16:32] <Aankhen``> Corion >> Did it, perchance, include C<open>? :-D

[16:32] <QtPlatypus> ?eval sub zerorry () {2}; 2 * zerorry 

[16:32] <evalbot6> 4 

[16:33] <Corion> Aankhen``: Naah ;)

[16:33] <Aankhen``> Corion >> Darn.

[16:33] <gaal> Corion! long time no moose.

[16:33] <Corion> Hi gaal!

[16:33] <Aankhen``> I just want something that gets Time::Local working in Pugs. :-)

[16:33] <Corion> It won't get much better - no time this weekend for hacking ...

[16:34] <Aankhen``> (like, say, someone writing it)

[16:34] <Aankhen``> s/writing/porting/

[16:34] <Corion> Bike, People and GTA:SA are sucking all my time, and $work as well ...

[16:34] <gaal> I am writing an interpreter of my own! (seems to be in vogue :-)

[16:35] <Corion> gaal: For what language? And in what language?

[16:35] <Corion> HOP is another fresh timesink too :)

[16:35] <gaal> in p6 of course, and let me tell you, it's going to be l33t!

[16:36] <Aankhen``> Corion >> HOP?

[16:36] <Corion> Aankhen``: Higher Order Perl. "Stolen Secrets of the Wizards of the Ivory Towers"

[16:36] <Aankhen``> Ah.

[16:36] <Corion> (How to program in Perl5 as if it were Lisp)

[16:36] <Aankhen``> Neat. :-)

[16:37] <Corion> Aankhen``: Yeah - I've read most chapters online already :)

[16:37] <autrijus> yay, control structures work.

[16:37] <autrijus> I have successfully created call-by-need (aka lazy evaluation) in parrot!

[16:37] <Aankhen``> Awesome!

[16:37] <autrijus> proceed to compile Grin over and we'll have Haskell running on parrot in no time!

[16:37] <Corion> autrijus: Are you porting Haskell to Parrot? :)

[16:37] <Aankhen``> :-o

[16:37] <PerlJam> Corion: HOP is already online?

[16:37] <autrijus> Corion: thinking about it :)

[16:37] <Corion> autrijus: Wacky man!

[16:37] <autrijus> Corion: but anyway, the thunk is also needed for

[16:37] <Corion> PerlJam: It was at the time I read the drafts

[16:37] <autrijus> (f() ?? g() :: h()) //= i();

[16:37] <Aankhen``> Hmm.  I know what Grin is... don't I?

[16:38] <autrijus> Aankhen``: it's Jhc's internal lang

[16:38] <Aankhen``> Jhc?

[16:38] <Corion> Ah - Jhc - Joes Haskell Compiler or something

[16:38] <Aankhen``> OK.

[16:38] <autrijus> Aankhen``: a very slow haskell compiler that generates blazingly fast C code without the need of a runtime.

[16:38] <Aankhen``> Cool.

[16:38] <autrijus> quite so

[16:41] <QtPlatypus> ?eval sub zerorry () {return @_}; zerorry "foo"

[16:41] <evalbot6> 'foo' 

[16:41] <svnbot6> r4719, autrijus++ | * Pugs.Compile.PIR - control structure; thunks; lazy evaluation

[16:41] <autrijus> ugh. bug.

[16:42] <gaal> hmmm, we have no labelled blocks yet, right? if i have

[16:42] <Aankhen``> ?eval multi sub prefix:<blub> (Str $foo) { "BLUB$foo" }; blub "blub";

[16:42] <evalbot6> 'BLUBblub' 

[16:42] <gaal> loop { given .. { when .. { last

[16:42] <gaal> what does the last break out of?

[16:43] <Aankhen``> ?eval sub foo (Str $bar) { "BAR$bar" }; "f".foo()

[16:43] <evalbot6> 'BARf' 

[16:47] <Aankhen``> ?eval sub coolrays (Str $foo) { "$foosome"; }; "awe".coolrays;

[16:47] <evalbot6> Error: Undeclared variable: "$foosome" 

[16:48] <Aankhen``> Dang.

[16:48] <Aankhen``> ?eval sub coolrays (Str $foo) { $foo ~ "some"; }; "awe".coolrays;

[16:48] <evalbot6> 'awesome' 

[16:48] <Aankhen``> ?eval sub coolrays (Str $foo) { "{$foo}some"; }; "awe".coolrays;

[16:48] <evalbot6> 'awesome' 

[17:02] <gaal> ?eval my @res; while "one two three" ~~ rx:P5<g>/(\S+)\s*/ { push @res, $0 }; @res

[17:02] <evalbot6> (no output)

[17:02] <gaal> how do i iterate over words in a string?

[17:03] <gaal> i mean before iblech's proposal kicks in.

[17:03] * dada remembers vaguely something like :w

[17:04] <gaal> :w on what?

[17:04] <dada> rules

[17:04] <gaal> i want to avoid p6 rules until they're supported everywhere pugs runs.

[17:04] <dada> oh yes, I see

[17:05] <Khisanth> for <<$foo>> -> $word { }?

[17:05] <rjbs> where aren't they supported?

[17:05] <dada> ?eval my @res = split(/\W/, "one two three"); @res

[17:05] <evalbot6> pugs: src/events.c:265: init_events_first: Assertion `rc == 0' failed. 

[17:05] <dada> ouch :-)

[17:05] <Khisanth> hmm

[17:05] <gaal> i also want to avoid split :) it's not lazy.

[17:06] <gaal> at least i think it isn't?

[17:06] <gaal> eval "words $foo", lang => 'haskell' :)

[17:06] <gaal> won't work of course.

[17:07] <broquaint> ?eval my @res = split(rx:perl5/\W/, 'one two three');

[17:07] <evalbot6> ['one', 'two', 'three'] 

[17:07] <Aankhen``> ?eval my @res; while ("one two three" ~~ rx:P5/(\S+)/) { push @res, $0; }; @res;

[17:07] <evalbot6> (no output)

[17:07] <Khisanth> why does <> and <<>> give an extra undef element?

[17:07] <gaal> k, now also make it also span newlines

[17:08] <Aankhen``> ?eval my @res = split(rx:perl5/\W/, "one two\nthree");

[17:08] <evalbot6> ['one', 'two', 'three'] 

[17:08] <gaal> cool!

[17:08] <Aankhen``> Khisanth >> How so?

[17:08] <gaal> except that it isn't lazy that is.

[17:08] <dada> gaal: and it eats any punctuation (don't know if this is what you want)

[17:08] <Khisanth> ?eval <1 2 3>

[17:08] <evalbot6> ('1', '2', '3') 

[17:08] <Khisanth> hmm

[17:08] <Aankhen``> ?eval <<1 2 3 >>

[17:08] <evalbot6> ('1', '2', '3') 

[17:09] <Khisanth> here it's giving me 1,2,3,undef

[17:09] <gaal> i don't actually care about punctuation right now :)

[17:09] <dada> ?eval my @res = split(rx:perl5/\W/, "one! two?\nthree!!!");

[17:09] <evalbot6> ['one', '', 'two', '', 'three', '', ''] 

[17:09] <Aankhen``> ?eval $?PUGS_VERSION

[17:09] <evalbot6> \'Perl6 User\'s Golfing System, version 6.2.7, June 13, 2005' 

[17:09] <Corion> Khisanth: It shouldn't :)

[17:09] <Aankhen``> Err?

[17:09] <gaal> actually i do care, i want it to be part of the word.

[17:09] <dada> ?eval my @res = split(rx:perl5/\W+/, "one! two?\nthree!!!");

[17:09] <Aankhen``> Where's the SVN revision?

[17:09] <evalbot6> ['one', 'two', 'three'] 

[17:09] <dada> better with a +

[17:09] <gaal> or stripped, that works too.

[17:09] <Corion> Anyway - I'm fading away again - CU soonish, latest in Braga I hope :)

[17:09] <Aankhen``> ?eval my @res = split(rx:perl5/\S+/, "one! two?\nthree!!!");

[17:09] <evalbot6> ['', ' ', ' '] 

[17:10] <Aankhen``> ?eval my @res = split(rx:perl5/\s+/, "one! two?\nthree!!!");

[17:10] <evalbot6> ['one!', 'two?', 'three!!!'] 

[17:10] <gaal> Braga!? that's a nice place in Tuscany

[17:10] <dada> Tuscany?

[17:10] <Khisanth> Perl6 User's Golfing System, version 6.2.7, June 13, 2005 (r4711)

[17:10] <dada> you sure, gaal?

[17:10] <gaal> no, sorry, that's Barga.

[17:10] <dada> :-)

[17:10] <gaal> vi's ESCxp is seeping into my brain!!

[17:11] <kungfuftr> gaal: Braga is north portugal

[17:11] <gaal> And Barga is in Tuscany :)

[17:14] <gaal> ok the problem with split /\W+/ is also that it doesn't strip out leading whitespace.

[17:14] <svnbot6> r4720, autrijus++ | * Compile.PIR - nested thunks:

[17:14] <svnbot6> r4720, autrijus++ |     say(1 ?? (2 ?? 3 :: 4) :: undef)

[17:14] <svnbot6> r4720, autrijus++ |   now works as advertised.

[17:14] <gaal> but i can do that :)

[17:14] * autrijus proceeds to build all control structures out from thunks.

[17:14] <gaal> hmmm though - to do that i need to "is copy", which is kind of a waste.

[17:16] <Limbic_Region> ?eval (1 ?? (2 ?? 3 :: 4) :: undef)

[17:16] <evalbot6> 3 

[17:17] <gaal> ?eval my $x = 10; my @a; @a[0..$x] = 0; "done"

[17:17] <evalbot6> 'done' 

[17:17] <gaal> ?eval my $x = 10000; my @a; @a[0..$x] = 0; "done"

[17:17] <evalbot6> (no output)

[17:18] <gaal> slice assignments are VERY slow.

[17:25] *** Arathorn is now known as Aragone

[17:36] * geoffb *finally* catches up on the last 21 hours of #perl6

[17:37] <autrijus> :)

[17:37] <Limbic_Region> so - summarize it for me so I don't have to ;-)

[17:37] * autrijus is happy that .pir output is finally very debuggable

[17:37] <Limbic_Region> so the stuff you generate that is segfaulting is easy to figure out or what?

[17:38] <geoffb> I wish I could do that Stranger in a Strange Land thing where he accelerates his local perception of time, so that the can get a pile done while the world ticks by slowly around him

[17:38] <sri_> is there a simple way to get all classes of a required file?

[17:38] <sri_> (porting Module::Pluggable)

[17:38] <geoffb> Limbic_Region, my wife would only let me spend time on that if I got paid for it . . . I have enough trouble convincing her it's a good thing that I'm in here as much as I am

[17:39] <autrijus> sri_: no... can't think of any. how do you do it in perl5?

[17:39] <geoffb> BTW, autrijus, what do you mean by "thunks" in this case -- I usually think of them as things that convert API mismatches back and forth.

[17:39] <sri_> using the source :/

[17:39] <svnbot6> r4721, autrijus++ | * source column-range and Exp level debugging output

[17:39] <svnbot6> r4721, autrijus++ |   as PIR comments!

[17:39] <autrijus> geoffb: http://en.wikipedia.org/wiki/Thunk

[17:40] <geoffb> Oh sure, give me something else to read.  ;-)

[17:40] * autrijus is porting loops over... control structures as normal function calls

[17:40] <autrijus> and "is lazy" traits

[17:40] <autrijus> is lots of fun

[17:40] <autrijus> basically all special case goes away

[17:41] <autrijus> it's all just function calls :)

[17:41] <autrijus> (with really fast tailcall and first-class continuation builtin)

[17:41] <geoffb> heh

[17:41] <geoffb> OK, so my conception of thunks were just a subset of the proper CS definition

[17:43] * pdcawley reads back. Wow! Way to go autrijus!

[17:52] <autrijus> pdcawley: so. I'm implemeenting

[17:52] <autrijus> &call_with_current_continuation

[17:52] <autrijus> I think you'll like it.

[17:52] <autrijus> it's the real one.

[17:53] <pdcawley> Yay!

[17:53] <pdcawley> Don't you mean &?CALLER_CONTUATION? or are we just doing callcc and having done with it?

[17:54] <autrijus> pdcawley: it's a parrot internal thing.

[17:54] <integral> do we also get prompts+subcontinuations?

[17:54] <autrijus> integral: yes.

[17:54] <integral> yay!   autrijus++

[17:54] <autrijus> integral: and let-hypotheticals in form of nonthreaded STM partial rollbacks.

[17:54] <autrijus> so feel free to port prolog over.

[17:54] * integral uses upwards only subcontinuations via Coro in perl5+POE

[17:55] <Limbic_Region> someone call Ovid

[17:55] * pdcawley notes that Larry is *so* going to have to finish the design real soon now at the rate you're implementing.

[17:55] * pdcawley wonders what a minimal scheme implementation looks like.

[17:55] <autrijus> pdcawley: with my PAST

[17:55] <integral> we could threaten to replace him with a perl6 expert system :-P

[17:55] <autrijus> I think compiling scheme to it is no problem.

[17:56] <autrijus> because I'm explicitly modelling it with scheme semantics.

[17:56] <autrijus> with auto-taillcalls you don't need to ask for

[17:56] <pdcawley> Tee hee.

[17:56] * integral crosses his fingers that svk commit -P  doesn't mess up and commit

[17:57] * autrijus praises CPS

[17:58] <Limbic_Region> pdcawley - yeah - that's one of the 4 reasons I didn't list with regards to opening up the design document process to the general public

[17:58] <Limbic_Region> the 3 I listed are good enough not to also say - so Pugs doesn't run out of things to do

[17:58] <Limbic_Region> unfortunately, it looks like the thread has been warnocked

[17:59] * pdcawley notes that, if all else fails you can go look at Damian's Perl 5+i for pointers -- get something implemented so Larry can say "Not like that, like this"...

[17:59] <pdcawley> Except in the areas where he doesn't.

[18:00] * pdcawley rather liked Perl 5+i as a language. Perl 6 is better mind.

[18:01] <Limbic_Region> I thought the analogy of the house was a convincing argument

[18:01] <Limbic_Region> perhaps there is no argument but also no reference material for mere mortals to frame up the house

[18:02] <pdcawley> So how much of pugs runs on Parrot now?

[18:03] <integral> .oO( someone will have to set up smoking for this )

[18:06] <pdcawley> integral: Well volunteered.

[18:06] <Darren_Duncan> hiiiiiii everybody!

[18:06] <Limbic_Region> salutations Darren_Duncan

[18:06] <Darren_Duncan> back after some sleep, and currently looking to see what changed meanwhile

[18:07] <Darren_Duncan> since 9 hours ago

[18:07] <pdcawley> Oh, everything.

[18:08] <geoffb> Didn't you notice the sky is now pink?

[18:08] * integral is more scared of the perl5 in the build system, than the haskell in the compiler

[18:08] <geoffb> heh

[18:08] <Darren_Duncan> aside from the regexp support, the Perl 5 is optional as I recall

[18:08] <gaal> I am Larry, Lazy of Lazys, heed my emails an despair!

[18:08] <Darren_Duncan> as the regexp is provided by PCRE

[18:09] <integral> Darren_Duncan: well Makefile.PL is written in perl5,  and using it is *much* easier than remembering today's ghc options 8)

[18:09] <Darren_Duncan> sure

[18:11] <Darren_Duncan> seems only 7 Pugs commits since my last one

[18:12] <Darren_Duncan> superficially none appear to address the bugs I raised, and so I'll be limited in how much more I can do before then

[18:32] <autrijus> yay, lvalue subs.

[18:32] <svnbot6> r4722, Darren_Duncan++ | updated planned test count of t/builtins/arrays_and_hashes/exists.t , which I forgot to do with r4714

[18:32] <autrijus> "my ($x, $y); (1 ?? $x :: $y) = 2"

[18:33] <integral> autrijus: are class Compile and Translate both ok to lift out to Pugs.Compile.Types?

[18:34] <autrijus> integral: mmm not sure what you means

[18:34] <integral> just move them to another .hs file so that a different Pugs.Compile.* module can use them

[18:34] <integral> s/lift/move/

[18:35] <Aankhen``> MOVE OUT!!!

[18:36] <autrijus> integral: oh. sure. my idea is that Pugs.Compile will be just compiler

[18:36] <autrijus> which handles Exp->PAST

[18:36] <autrijus> and the so-called retargettable compilers

[18:36] <autrijus> is actually Translators

[18:36] <integral> oh, hang on, yeah, ok :-)

[18:36] <autrijus> of Pugs.Trans.PIR and Pugs.Trans.*

[18:36] <integral> I was reading PAST as Parrot AST, not Pugs AST

[18:36] <autrijus> of the form (PAST a) -> Foo a

[18:36] <autrijus> no, it's pugs ast :)

[18:36] <autrijus> the parrot ast thing is nonexistent.

[18:37] <integral> is pugs -BPIR examples/mandel.p6 known to not work?

[18:37] <svnbot6> r4723, autrijus++ | * lvalue subroutines and thunks that Really World (tm)!

[18:38] <autrijus> integral: no. I'm fixing it now

[18:39] <integral> :)

[18:39] <Aankhen``> Really World?

[18:40] <autrijus> integral: worksforme now.

[18:40] <autrijus> Really Works. 

[18:40] <autrijus> sigh.

[18:40] <autrijus> integral: as of 4723

[18:40] <Aankhen``> Ahh

[18:40] <Aankhen``> .

[18:41] <integral> thanks :-)  autrijus++

[18:41] <autrijus> =)

[18:42] <Darren_Duncan> yo

[18:43] <Aankhen``> Yoyo!

[18:43] <geoffb> Please, someone, anyone, get 'make install' to stop rebuilding pugs when you just did a compile using 'make' or 'make unoptimized' immediately before.  The reason this matters is that you may have to be root to do the install . . . which means the newly compiled/linked files are now owned by root, so you have to be root even to 'make clean'

[18:43] <Aankhen``> geoffb >> `make install` doesn't rebuild it here...

[18:43] <Aankhen``> (Win32, MSVC)

[18:43] <integral> it depends on how the version grabber script is getting the revision number

[18:44] <geoffb> integral, oh?

[18:44] <integral> if you use svn everything's fine,  if you done, poor you

[18:44] <geoffb> I use svk

[18:44] <integral> geoffb: I assume it's Help.hs forcing the rebuild?

[18:45] <geoffb> integral, nodnod

[18:45] * integral sees about fixing, since he uses svk and is partially responsible

[18:45] <geoffb> THANK YOU

[18:45] <geoffb> integral++

[18:45] <Darren_Duncan> I never tried 'make install' but I know that plain make will only redo the files for which the source changed or their dependencies

[18:46] <Darren_Duncan> that said, Help.hs seems to recompile no matter what, even with no changes

[18:46] <geoffb> Darren_Duncan, right.

[18:46] <geoffb> That's the problem

[18:46] <Darren_Duncan> I use svn

[18:47] <geoffb> Perhaps the solution is just to fix util/version_h.pl to not rewrite if the version it finds in pugs_version.h matches the one it was about to write

[18:47] * geoffb guesses that is exactly what integral is doing.  ;-)

[18:47] <Darren_Duncan> fyi, I'm running a 'make test' on 4722 ... should finish in awhile

[18:47] <Darren_Duncan> I only do that every few days

[18:48] <geoffb> ditto

[18:48] <geoffb> 4 hours is just too long to wait

[18:48] <integral> yeah, exactly that =)

[18:48] <Aankhen``> I used to do it daily.

[18:48] * integral does it while he eats breakfast

[18:48] <Darren_Duncan> I look forward to the day when Perl 6 compiles and runs as fast as Perl 5

[18:49] <Aankhen``> integral >> So your... system... eats tests for breakfast?

[18:49] * Aankhen`` ducks.

[18:49] <Darren_Duncan> right now is like 20+ times slower

[18:49] <integral> heh.     /me doesn't test :-P

[18:49] <integral> Darren_Duncan: when running on parrot it's only slightly slower than p5

[18:49] <Darren_Duncan> the make test is more of a sanity check really

[18:50] <Darren_Duncan> I've only used pure Pugs for now for simplicity ... may change eventually

[18:50] <geoffb> Darren_Duncan, you're being kind to the pugs interpreter there

[18:50] <Khisanth> only 20?

[18:50] <Aankhen``> I wish I could link Perl 5 and Parrot into Pugs on Win32...

[18:50] <Darren_Duncan> maybe its 100 times slower

[18:50] <Aankhen``> With MSVC 7...

[18:51] <Darren_Duncan> I just know that Perl runs my tests in 1 second, while Pugs I have to at least count to 10 before it starts to run the tests

[18:51] <Darren_Duncan> I haven't benchmarked them

[18:51] <geoffb> :-)

[18:52] <geoffb> here 'pugs -e 1' takes 6.9s

[18:52] <geoffb> 'pugs -MTest -e 1' takes 23.7

[18:52] <Aankhen``> Here, about 1.3s.

[18:52] <Aankhen``> (pugs -e 1)

[18:52] <Aankhen``> About 3 or 4 for -MTest.

[18:52] <Aankhen``> About 0.3s for `perl -MTest -e 1`. :-P

[18:53] <Darren_Duncan> autrijus or whomever it applies to, any progress on those bugs I reported c10 hours ago, or do you have higher priorities at the moment?

[18:53] <geoffb> Though the two Test.pm's are not equivalent, I get your point.  :-)

[18:54] <Aankhen``> Heh.

[18:54] <Darren_Duncan> brb

[18:55] * Aankhen`` eagerly anticipates the return of Darren_Duncan.

[18:56] <geoffb> svk++ # Is there anything it doesn't do well?

[18:56] <nothingmuch> evening

[18:56] <nothingmuch> make tea

[18:56] <Aankhen``> geoffb >> Work on Windows?

[18:56] <Darren_Duncan> Aankhen, I'm still around, just paying less attention to #perl6

[18:56] <Aankhen``> Yay!

[18:57] * Aankhen`` breathes a sigh of relief.

[18:57] <Darren_Duncan> oh, see exists.t for that test you were going to write but I did instead

[18:57] <Aankhen``> OK.

[18:57] <geoffb> Aankhen``, OK, "Is there anything it doesn't do well *on platforms it runs at all on*?  :-)

[18:58] <geoffb> Darren_Duncan, feeling caffeinated today?

[18:58] <integral> hmm, well it no longer rebuilds Help.hs, but it still runs ghc everytime :-/

[18:58] <Darren_Duncan> I don't drink coffee at all ... chocolate is another matter though

[18:59] <geoffb> integral, does ghc insist on relinking?

[18:59] <integral> I suspect it's a makefile issue.

[18:59] <Aankhen``> geoffb >> Er... emulate its failure on other platforms?

[18:59] <geoffb> Darren_Duncan, do you prefer white, milk, dark, bittersweet, . . . ?

[18:59] <Darren_Duncan> milk

[18:59] <geoffb> Aankhen``, LOL

[18:59] <nothingmuch> Aankhen``: you have editing to do

[19:00] <Darren_Duncan> with nuts and/or creams inside, non-alcoholic

[19:00] <Aankhen``> nothingmuch >> Where?

[19:00] <nothingmuch> http://feather.perl6.nl/~nothingmuch/harrorth

[19:00] <nothingmuch> primarily doc/08.kwid

[19:00] <Aankhen``> OK, I'll look at it in a few minutes.

[19:00] <Aankhen``> Darren_Duncan >> Nice, very thorough test.

[19:00] <Aankhen``> s/\.$/s./

[19:01] * geoffb is firmly a 70% extra-dark kinda guy

[19:01] * Aankhen`` mutters something about not lik...

[19:01] <geoffb> Mmmm, maybe I will have to go pull some El Rey out of the cabinet . . .

[19:01] <geoffb> NO, NO, MUST FIGHT THE CHOCOLATE BEFORE LUNCH URGE

[19:01] <Aankhen``> geoffb >> Give into the Dark Side, young geoffb... you know you want to...

[19:01] <Darren_Duncan> Aankhen, the previous one I did was in pairs.t ... that one's even better because it crashes

[19:02] * nothingmuch likes dark ~70%, and milk equally well

[19:02] <nothingmuch> as long as it has no sourness whatsoever

[19:02] <integral> why is unoptimized a double colon target?

[19:02] <geoffb> Aankhen``, well, yeah, I do, but that would be somewhat dissonant with complaining about fitness

[19:04] <geoffb> autrijus, how are you liking openfoundry SVN hosting?  Any complaints?

[19:04] <svnbot6> r4724, bsmith++ | Changed version_h.pl to only rewrite version.h when the revision number changes.

[19:04] <geoffb> I'm thinking of moving a project there

[19:05] <geoffb> (and maybe more than one, if that works out, I suppose)

[19:06] * geoffb goes back to lurk mode while he reads HOP and waits for svk++ to finish mirroring the parrot trunk

[19:08] <Aankhen``> C:\Development\harrorth>darcs pull

[19:08] <Aankhen``> Invalid repository:  http://feather.perl6.nl/~nothingmuch/harrorth

[19:08] <Aankhen``> darcs failed:  Failed to download URL http://feather.perl6.nl/~nothingmuch/harro

[19:08] <Aankhen``> rth/_darcs/inventory

[19:08] <Aankhen``> libcurl error code: 28

[19:08] <Aankhen``> Argh... I REALLY need to nopaste stuff.

[19:08] <Aankhen``> Hrm, looks like it was just a DNS error.

[19:08] <nothingmuch> bah!

[19:08] <nothingmuch> ah

[19:08] <Aankhen``> 08.kwid, you say?

[19:09] <nothingmuch> yep

[19:09] <Aankhen``> OK.

[19:09] <Aankhen``> Editing. &

[19:09] <nothingmuch> a new evaluator

[19:09] <nothingmuch> skip the wtf -> wth translation this time ;-)

[19:09] <nothingmuch> also 07.kwid p'raps, i'm not sure you got it

[19:14] <Aankhen``> Should I send the spellchecked version immediately or edit it thoroughly then send?

[19:14] <geoffb> OK, I just gotta say -- while I'm certainly loving the content of HOP, the book itself is just beautifully designed.  The layout and typography are masterful, at least to my lay eyes

[19:15] <Limbic_Region> geoffb - the errata is quite large and still growing - available online fwiw (assuming you aren't on the HOP-discuss list)

[19:16] <geoffb> I'm not, and thankyou

[19:16] <geoffb> there was a note in the preface about MJD running the tests just before going to press and finding out most of them didn't run

[19:17] <geoffb> Are the errata mostly in the code or the text or both?

[19:19] <Aankhen``> nothingmuch >> Ping.

[19:20] <nothingmuch> pong

[19:20] <Aankhen``> PM?

[19:21] <nothingmuch> uh, okay

[19:21] <Limbic_Region> geoffb - http://hop.perl.plover.com/errata/

[19:23] <geoffb> Man, nobody lets me get away with laziness around here.  :-)

[19:24] <geoffb> thanks, Limbic_Region 

[19:42] <nothingmuch> Aankhen`` says my english is lousy, and I agree

[19:42] <nothingmuch> so harrorth needs a swarm of volunteer editors

[19:42] <nothingmuch> please submit darcs patches for english you don't like

[19:42] <nothingmuch> i promise to apply them

[19:47] <nothingmuch> Aankhen``: says "That's defamation"

[19:47] <nothingmuch> ;-)

[19:47] <Aankhen``> Not to mention "slanderous". :-P

[19:48] <clkao> 1/aw

[19:48] <nothingmuch> not only that, Aankhen`` thinks Michael Jackson is innocent

[19:48] <Limbic_Region> I thought slander was verbal and something else was written?

[19:48] <nothingmuch> and he has only one nose!

[19:48] <Aankhen``> :-o

[19:48] <Aankhen``> Limbic_Region >> libel?

[19:48] <Limbic_Region> right

[19:49] <Aankhen``> I wasn't aware of the distinction.

[19:49] <Aankhen``> Anyway, on IRC, you pretend everything's verbal. :-P

[19:49] <Aankhen``> " A false and malicious statement or report about someone."

[19:49] <Aankhen``> (one of the meanings)

[19:50] <Aankhen``> But according to Merriam-Webster, it is only oral...

[19:50] <Limbic_Region> http://dictionary.reference.com/search?q=slander http://dictionary.reference.com/search?q=libel

[19:50] <Aankhen``> I am checking libel now.

[19:50] <Aankhen``> I already checked slander. :-)

[19:50] <Aankhen``> OK.

[19:51] <Aankhen``> s/slanderous/libel/

[19:51] <nothingmuch> so, any volunteers?

[19:51] * Aankhen`` points at Limbic_Region.

[19:52] <Limbic_Region> Aankhen`` nothingmuch has been prodding me to get involved with harroth for some time

[19:52] <Aankhen``> Oh, good!  You can get started now.

[19:52] <Limbic_Region> problem is I have lost my interest *again* in Haskell

[19:52] <Aankhen``> Judging by the "again", I'd say you can regain it. :-D

[19:52] * Limbic_Region isn't as smart as he likes to think he is and needs more time than he has to digest

[19:58] <autrijus> geoffb: I run openfoundry

[19:58] <stevan> ah but Limbic_Region you are smart enough to know you are not smart enough, which is very smart :)

[19:58] <svnbot6> r4725, gaal++ | * interpreter for the esoteric language l33t. (TODO: CON opcode)

[19:58] <autrijus> geoffb: or, not true (anymore), but I wrote most of its code

[19:58] <autrijus> and still maintains stuff there

[19:58] <autrijus> geoffb: so I'm as biased as you can get

[20:04] <Aankhen``> Nite.

[20:04] * Aankhen`` sleeps. &

[20:05] <Limbic_Region> autrijus - how many days (localtime) is left on the current hackathon?

[20:06] <autrijus> 3

[20:06] <autrijus> or 4

[20:06] <autrijus> not sure

[20:06] <autrijus> probably 3 full days

[20:14] * geoffb is back

[20:14] <geoffb> Reading scrollback

[20:17] <geoffb> autrijus, ah, well then, I'm guessing you like it then.  :-)

[20:18] <autrijus> I try, I try :)

[20:18] <geoffb> So, any tips for someone moving a project there?

[20:19] <autrijus> not much... if you were using cvs or svn

[20:19] <autrijus> you can newproject with a "mirror remote" (r/o) option

[20:19] <autrijus> so it will transport all your revision history

[20:19] <autrijus> then you can switch it to r/w

[20:20] <geoffb> One project is coming from CVS, the other is coming from a tarball . . . but since the CVS repository is private (not net-accessible), I was expecting to need to use something else to push that codebase in --

[20:21] <geoffb> can svk do this easily?

[20:22] <autrijus> sure!

[20:22] <autrijus> you can first mirror cvs locally

[20:23] <autrijus> sync all its history

[20:23] <autrijus> then use "svk sm -BI" to replay it to openfoundry

[20:23] <autrijus> alternately, if this is oneshot, use cvs2svn first

[20:23] <autrijus> and then a svnmirror

[20:23] <autrijus> via svm or replay

[20:23] <autrijus> see svk.elixus.org for hints

[20:23] <autrijus> #svk too

[20:23] <clkao> one svk to rule them all

[20:24] <geoffb> Yeah, the CVS project would be a oneshot conversion . . . I'll look at the above

[20:25] <geoffb> clkao, the more servers you make svk understand, the better this world will be.  Thanks for all you've done so far.  :-)

[20:25] <clkao> GRR!

[20:25] <kungfuftr> svk can do bitkeeper too?

[20:25] <clkao> don't thank! find bug and complain!

[20:25] <clkao> kungfuftr: bk exported cvs. 

[20:25] <clkao> git is coming.

[20:25] <kungfuftr> ah... k

[20:26] <geoffb> clkao, I can only do so many things at once.  Heck, in the background I've got SVK mirroring parrot's repo so that I can turn my suggestion to chip into a patch as he requested

[20:26] <geoffb> And I already reported the "other server" tops on my list . . . darcs.  So there.  ;-)

[20:27] <clkao> darcs won't be very hard. and there's the nice script converting darcs on svk.elixus.org

[20:28] <geoffb> Oh, I don't have any darcs repos to convert; I just want to never have to believe that there is any SCM client other than SVK.  And there are more and more darcs repositories I find myself needing to use

[20:28] <svnbot6> r4726, autrijus++ | * nested thunks now works, thanks to a horrible hack.

[20:28] <svnbot6> r4726, autrijus++ |   eventually when leo fixes get_param over calls I'll

[20:28] <svnbot6> r4726, autrijus++ |   revisit.

[20:29] <clkao> *nod8

[20:29] <clkao> that should be simple, after i finish the git thing. i shall ditch vcp for those foreign system who knows about changeset already

[20:29] <clkao> vcp--

[20:29] <geoffb> vcp's just there to make CVS interop easier, yes?

[20:31] <clkao> yes. or harder.

[20:31] <geoffb> ah, eww

[20:31] <geoffb> brb, testing xchat startup config

[20:39] <integral> anyone know why unoptimized is a double colon target in the makefile?

[21:02] *** sri___ is now known as sri_

[21:08] <geoffb> integral, what's the difference between a single or double-colon target (/me is not a makefile expert)

[21:10] <integral> that's a good question :-)

[21:18] <dkf> geoff: http://shekel.jct.ac.il/cc-res/online-doc/make/make_41.html#SEC40

[21:30] <Aankhen``> Good morning. :-P

[21:37] <Darren_Duncan> when testing, it appears that 't/pugsrun/02-dash-n' has gone into an infinite loop, stalling 'make test' ... will confirm

[21:38] <Darren_Duncan> that was on r4722

[21:39] <geoffb> Belated good morning, Aankhen`` 

[21:40] <Aankhen``> WHAT'S SO GOOD ABOUT IT, PUNK?

[21:40] <Darren_Duncan> getting all scrooge are you?

[21:40] <Aankhen``> Scrooge?

[21:40] <Darren_Duncan> the guy in the story 'Christmas Carol'

[21:41] <Darren_Duncan> I think one of his famous lines is "what's good about it?"

[21:41] <Aankhen``> Ahh.

[21:41] <Darren_Duncan> unless I'm confusing someone else with him

[21:41] <Aankhen``> Didn't know about the line.

[21:41] <Aankhen``> Could be that my brain is refusing to work on 2 minutes of sleep, though.

[21:41] <Darren_Duncan> I think it was near the beginning of the story ... someone says "good morning" to him

[21:41] <svnbot6> r4727, autrijus++ | * PIR - more work on loop/while/etc statement control and inner blocks.

[21:41] <svnbot6> r4727, autrijus++ | * nested lvalue:

[21:41] <svnbot6> r4727, autrijus++ |     my ($x, $y); (0 ?? $x :: (0 ?? $x :: $y)) = 3; say $y;

[21:42] <Aankhen``> Y'know, now that PIR has bool::* in the main namespace, maybe Pugs ought to be modified to be the same too... :-P

[21:47] <Darren_Duncan> any idea how long t/pugsrun/02-dash-n.t is supposed to run?

[21:47] <Darren_Duncan> I think the version I've got goes infinite-loopy

[21:48] <Aankhen``> I see 3/3 tests run.

[21:48] <Aankhen``> 1..3

[21:48] <Darren_Duncan> it also seems to catch ctrl-c and keep on going

[21:49] <Darren_Duncan> at least 3 times, then it doesn't

[21:49] <pasteling> "Aankhen``" at 203.101.1.243 pasted "t/pugsrun/02-dash-n.t" (9 lines, 406B) at http://sial.org/pbot/11158

[21:50] <Darren_Duncan> I'm updating a few more revisons and will try again

[21:51] <Darren_Duncan> now made 4724; waiting while test runs

[21:52] <Darren_Duncan> it printed out this so far, and then just hangs there ...

[21:52] <Darren_Duncan> 1..3 <break> # Running under darwin <break> # ./pugs -n -e say < temp-ex-input.9874.130 > temp-ext-output.9874.130

[21:53] <Aankhen``> Does redirection work alright on Darwin?

[21:54] <Darren_Duncan> I would expect so, and I think I've used it before

[21:54] <Aankhen``> OK.

[21:54] <Darren_Duncan> the two specified files do get created

[21:55] <Darren_Duncan> now 3 minutes ago by my clock

[21:56] <Aankhen``> Put in `diag $str` and `diag $got`?

[21:59] <Darren_Duncan> rerunning with change ...

[22:00] <Aankhen``> BRB.

[22:01] <Darren_Duncan> the hang seems to be in 'system $command'

[22:02] <mugwump> chromatic++ # Parrot SDL

[22:03] <Darren_Duncan> so either the 'system' call is hanging, or what it is calling is hanging, eg: ./pugs -n -e say < temp-ex-input.9904.887 > temp-ext-output.9904.887

[22:06] <mugwump> ffs Darren_Duncan, isolate the exact cause, commit a fix to the test suite that stops it looping, commit a test that demonstrates the bug without looping infinitely, and preferably fix it.  but quit whinging and expecting people to look at every little bug you find in the interpreter and think "oh shit, better fix that so that Darren can finish coding LKT!"

[22:07] <svnbot6> r4728, autrijus++ | * hw2005 - Patrick's review.

[22:07] <Darren_Duncan> sorry mugwump

[22:07] <Darren_Duncan> in this case, it has nothing to do with my module

[22:08] <Darren_Duncan> I just preferred to discuss issues I found before changing code

[22:08] <mugwump> ok that's fine, and I apologise for being rude

[22:08] <Aankhen``> mugwump >> Chill... O_O

[22:09] <Aankhen``> [03:17:23] <Darren_Duncan> any idea how long t/pugsrun/02-dash-n.t is supposed to run?

[22:09] <Aankhen``> [03:17:39] <Darren_Duncan> I think the version I've got goes infinite-loopy

[22:09] <Aankhen``> He just asked what the normal running time is.

[22:09] <Darren_Duncan> fyi, I didn't think I was being annoying, but that people would want to know about bugs

[22:10] <Aankhen``> I was the one who was trying to help him figure out what was up.

[22:10] <Darren_Duncan> and my main involvement is to find bugs, but I am not saavy enough to actually edit the Haskell

[22:10] <autrijus> right. and it's appreciated. I don't think darren is whining, and I'm sorry for not having the cycle of looking at them in time.

[22:10] <autrijus> (as I said so in the journal.)

[22:11] <autrijus> but they are failing tests, and failing tests are swept during the weekend before release. :)

[22:11] <Aankhen``> Heh.

[22:11] <autrijus> think of the weekdays as the "mark" phase and weekend as the "sweep" phase.

[22:11] <Darren_Duncan> I'll also mention that I'm in no great hurry to get LKT etc ported; trying to do so is just the main way I discover bugs that affect people in real life usage scenarios

[22:12] <autrijus> Darren_Duncan: right, and it's very very helpful.

[22:12] <autrijus> I'm doing the same with parrot right now... and where pugs has bogus output or hangs occasionally... parrot just segfaults ;)

[22:12] <autrijus> but at least it segfaults in constant time.

[22:12] <Darren_Duncan> at the same time, I would appreciate if people told me if I sounded rude or demanding, so I change my ways before it gets worse

[22:12] * Aankhen`` goes to play UT2K4, where he can happily bite off people's heads.

[22:12] <mugwump> all I'm saying is that the work towards isolating the fault needs to be performed by someone in any case.

[22:13] <Aankhen``> mugwump >> Right, it's just that DD needed a little guidance.

[22:13] <Aankhen``> Like whether there was a problem in the first place.

[22:13] <autrijus> mugwump: darren has a good track record of isolating individual failures and getting them into t/... :)

[22:13] <Aankhen``> And whether it was restricted to his machine.

[22:13] <Aankhen``> UT2K4. &

[22:14] <mugwump> ok, well I apologise again to you Darren_Duncan.  I've been a little cranky recently, interfacing to a Java code base via XML

[22:14] <autrijus> Darren_Duncan: and, fwiw, 02dashn hangs for me too.

[22:14] <Darren_Duncan> no prob ... at least we worked it out

[22:15] <autrijus> it's likely broken by iblech.

[22:15] <Darren_Duncan> fyi, while it may run counter to the way some people work, I find that sometimes it is more effective to share issues before working too much to isolate them, since its possible someone else already did so

[22:16] <autrijus> he made "=$*IN" call $*IN.next;

[22:16] <Darren_Duncan> don't be afraid to ask questions and all that

[22:16] <autrijus> which simply hangs.

[22:16] <Darren_Duncan> on a different note ...

[22:16] <autrijus> I'm adding IO::next now

[22:17] <autrijus> done

[22:17] <autrijus> testing.

[22:17] <Darren_Duncan> I will be leaving within an hour to go to town, but should check in about 8 hours from now

[22:17] <autrijus> great... I'll sleep now :)

[22:28] <autrijus> Darren_Duncan: fixed!

[22:28] <Darren_Duncan> great ... will confirm now ...

[22:28] <autrijus> r4729. thanks so much

[22:29] <autrijus> please ping me here if it breaks still

[22:30] <autrijus> I'll go ahead and sleep :) 

[22:30] * autrijus waves &

[22:34] <Darren_Duncan> autrijus, the fix is confirmed ... t/pugsrun/02-dash-n.t now passes

[22:34] <svnbot6> r4729, autrijus++ | * Darren_Duncan++ for pointing out that $*IN.next did not

[22:34] <svnbot6> r4729, autrijus++ |   actually do a readline -- iblech's fix only went halfway --

[22:34] <svnbot6> r4729, autrijus++ |   which caused `pugs -n` to go into infinite loop.  Fixed!

[22:34] <Darren_Duncan> you give me too much credit ... you figured out the $*IN thing

[22:35] <wolverian> what's $*IN?

[22:35] <mugwump> STDIN

[22:36] <wolverian> oh. well. could have guessed. but I thought it's still called $*STDIN :)

[22:36] <wolverian> someone needs to add a generic iterator class to wrap our coroutines around 

[22:36] <wolverian> er, s,around,in,

[22:44] <Aankhen``> Make it a role.

[22:44] <Aankhen``> :-D

[22:44] <Aankhen``> class Foo does Iterator { ... }

[22:45] * Aankhen`` goes smiling all the way to the happy farm.

[22:46] <wolverian> hahaha

[22:46] <wolverian> anyway, yes, you're obviously correct, it should be a role.

[22:46] <Aankhen``> Am I? O_O

[22:46] <wolverian> yes.

[22:46] <Aankhen``> Oh.

[22:46] <Aankhen``> That's nice.

[22:47] <wolverian> we're using roles for software reuse, now, remember, not classes.

[22:47] <Aankhen``> I should try to sleep less more often.

[22:47] <wolverian> maybe. :)

[22:47] <Aankhen``> Hmm.

[22:48] <Aankhen``> ?eval role Happy { method smile () { ":-)" }; method laugh () { ":-D" }; method wink () { ";-)" }; }

[22:48] <evalbot6> undef 

[22:48] <wolverian> I don't think we have roles yet.

[22:48] <Aankhen``> ?eval role Happy { method smile () { ":-)" }; method laugh () { ":-D" }; method wink () { ";-)" }; }; my $Aankhen does Happy;

[22:48] <evalbot6> undef 

[22:48] <wolverian> (the ;s are redundant, by the way.)

[22:48] <mugwump> technically, modules are for software re-use and roles are for behavioural units :)

[22:48] <Aankhen``> ?eval role Happy { method smile () { ":-)" }; method laugh () { ":-D" }; method wink () { ";-)" }; }; my $Aankhen does Happy; $Aankhen.smile();

[22:48] <evalbot6> Error: No compatible subroutine found: "&smile" 

[22:48] <Aankhen``> Dang.

[22:48] <mugwump> even more fine-grained precision!  :)

[22:48] <Aankhen``> It was going so well.

[22:49] <wolverian> mugwump: right, right. fine-grained. yes.

[22:49] <wolverian> I was just saying that myself, too, but you were faster.

[22:49] <Aankhen``> [04:18:43] <wolverian> (the ;s are redundant, by the way.) # yes, I know, I just scatter extra semi-colons around my statements. :-)

[22:49] <wolverian> and of course, perl6 very much pushes you towards using them, since all type matching is done with .does

[22:49] <wolverian> (er, ~~, but anyway...)

[22:50] <wolverian> maybe someone should write a tutorial on how to use roles, classes and even traits correctly

[22:50] <Aankhen``> role Sage { has $.intelligence; has $.wisdom; has $:motives; }

[22:50] <Aankhen``> Perl 6 poetry? :-D

[22:50] <Aankhen``> (yes, yes, $:motives is contrive)

[22:50] <wolverian> that's funny :)

[22:50] <Aankhen``> Contrived, even.

[22:51] <Aankhen``> Hrm.

[22:51] <wolverian> role Sage { has ( $.intelligence, $.wisdom, $:motives ) } # nicer, maybe.

[22:51] <wolverian> although, that should probably be @:motives

[22:51] <Aankhen``> role Sage { has ($.intelligence, $.wisdom, $:intelligence, $:wisdom); } # more accurate? ;-)

[22:51] <Aankhen``> No, wait!

[22:51] <mugwump> how about; role Sage { has $.intelligence; has $.wisdom; }; role Guru does Sage { has $:secrets }

[22:52] <wolverian> mugwump: @:secrets!

[22:52] <Aankhen``> role Sage { has ($.intelligence, $.wisdom); } role Sage::Wannabe { has ($:intelligence, $:wisdom); }

[22:52] <wolverian> let's not totally abandon the sigil-based plural/singular distinction perl gives us

[22:52] <wolverian> Aankhen``: maybe the latter is merely an older sage, who understand that showing off is not a sign of true wisdom.

[22:52] <mugwump> Which is actually optional, really.  Because $ sigil variables might be hashes

[22:53] <wolverian> s,understand,understands,

[22:53] <mugwump> I guess that the % means that the variable .does(Hash)

[22:53] <wolverian> mugwump: .isa(Hash), actually, by default

[22:53] <Aankhen``> role Sage { has ($.intelligence, $.wisdom); has @.modules; }; role Sage::Fake does Sage { method modules () { 0 } }

[22:54] <wolverian> Aankhen``: why did you use two has-statements? :)

[22:54] <Aankhen``> wolverian >> I like to group variables according to sigil.

[22:54] <Aankhen``> (or purpose)

[22:54] <wolverian> oh, okay.

[22:54] <wolverian> I just use vertical whitespace.

[22:54] <wolverian> I'm not scared of long expressions.

[22:54] <wolverian> cough, python, cough

[22:54] <Aankhen``> Heh.

[22:54] <Aankhen``> That was some fun stuff. :-

[22:54] <Aankhen``> D

[22:55] <mugwump> language keywords are like whitespace!  :)

[22:55] <wolverian> perl6 has no keywords.

[22:56] <Aankhen``> role MailingList::Flamer { has @:opinions; }

[22:56] <Aankhen``> role MailingList::Flamer { has @:opinions; does Argue; }

[22:56] <Aankhen``> (C<does Argue> doesn't make much sense, but it reads well!)

[22:56] <wolverian> hey, do class Foo { does Bar } type does-statements work?

[22:57] <wolverian> I mean, are they specced?

[22:57] <Aankhen``> Yes.

[22:57] <wolverian> ah, good stuff. thanks.

[22:57] <Aankhen``> You can have either: C<class Foo does Bar { ... }>

[22:57] <Aankhen``> Or: C<class Foo { does Bar; }>

[22:57] <Aankhen``> It applies to C<has> too.

[22:57] <wolverian> egh, really?

[22:57] <Aankhen``> I believe so...

[22:57] <mugwump> role MailingList::Flamer { has @:opinions; has @.knowledge ::= @:opinions }

[22:57] <Aankhen``> Now you have confused me.

[22:58] <Aankhen``> For shame!

[22:58] <wolverian> mugwump: hmm. does 'has @.knowledge ::= has @:opinions' work?

[22:58] <Aankhen``> Probably not.

[22:58] <mugwump> heh, I might have the syntax wrong.  It implies "presenting personal opinions as knowledge"

[22:58] <wolverian> ('does' as in 'should it')

[22:59] <wolverian> mugwump: yes, the syntax is correct.

[22:59] <wolverian> I'm just wondering about my syntax :)

[22:59] <Aankhen``> Hmm, I seem to be wrong.  I think maybe you can't use C<class Foo has $.bar>.

[22:59] <wolverian> I certainly hope so.

[23:00] <wolverian> that's putting too much into the signature.

[23:00] <wolverian> (if you can call the class declaration that..)

[23:00] <Aankhen``> Yea.

[23:02] <Aankhen``> Right.

[23:02] * Aankhen`` leaves -- going out of town, back on the 3rd.

[23:02] <Aankhen``> I will miss hacking Pugs. :-(

[23:02] <Aankhen``> Ah well.

[23:02] <Aankhen``> Be seein' y'all!

[23:03] <wolverian> back to boredom. :(

[23:07] <geoffb> wolverian, if you're just starved for something to do, some debugging of --perl5 module usage would be very nice.  I can provide you with a very short example showing the breakage, if you like.  ;-)

[23:09] <geoffb> (for the "MAKE IT A TEST" crowd -- I'm doing OpenGL stuff; the bug can be seen easily, but good luck writing a test that doesn't just trigger more related bugs)

[23:09] <wolverian> geoffb: if it's haskell I'd be debugging, I'm afraid I'd be totally lost. if it's perl, sure.

[23:09] <geoffb> I think it might actually be Perl6, Perl5, and XS between them

[23:10] <wolverian> that sounds ugly.

[23:10] <geoffb> Hence the reason I've been avoiding it.  :-)

[23:13] <wolverian> :)

[23:17] <wolverian> I'm trying to fix my perldoc to not show '|' as <E2><94><82> over ssh

[23:17] <wolverian> and other such character oddities

[23:17] <wolverian> well, s,perldoc,nroff, as it doesn't happen with -t

[23:21] <geoffb> Any OSSF bigwigs around?

[23:23] <geoffb> OK then, that mental thread will have to block . . . 

[23:24] * geoffb does geoffb.brain.schedule()

[23:56] *** Limbic_Region_ is now known as Limbic_Region

